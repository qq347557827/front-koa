{
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\main.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\main.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\main.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\main.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\",
        "sourceFileName": "main.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _koaBody = _interopRequireDefault(require(\"koa-body\"));\n\nvar _koaStatic = _interopRequireDefault(require(\"koa-static\"));\n\nvar _koaJwt = _interopRequireDefault(require(\"koa-jwt\"));\n\nvar _index = _interopRequireDefault(require(\"./config/index\"));\n\nvar _ErrorHandle = _interopRequireDefault(require(\"./conmon/ErrorHandle\"));\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _WebSocket = _interopRequireDefault(require(\"./config/WebSocket.js\"));\n\nvar _Auth = _interopRequireDefault(require(\"./conmon/Auth\"));\n\nvar _Init = _interopRequireDefault(require(\"./conmon/Init\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst koa = require('koa');\n\nconst combineRoutes = require('./routes/routes');\n\nconst cors = require('@koa/cors');\n\nconst json = require('koa-json');\n\nconst app = new koa();\nconst ws = new _WebSocket.default();\nws.init();\nglobal.ws = ws;\nconst jwt = (0, _koaJwt.default)({\n  secret: _index.default.JWT_SECRET\n}).unless({\n  path: [/^\\/public/, /^\\/svgcap/, /^\\/submitLogin/, /^\\/reg/, /^\\/add/]\n});\nconst corsOptions = {\n  origin: 'http://localhost:8080',\n  credentials: true,\n  //access-control-allow-credentials:true\n  optionSuccessStatus: 200,\n  // 'Access-Control-Allow-Methods':'POST',\n  allowMethods: ['GET', 'PUT', 'POST', 'DELETE', 'PATCH', 'OPTIONS']\n};\nconst koaBodyConfig = {\n  multipart: true,\n  //// 开启文件上传\n  jsonLimit: '100mb',\n  //JSON 数据体的大小限制\n  formLimit: '100mb',\n  //表单请求体的大小限制\n  textLimit: '100mb',\n  // text body 的大小限制\n  formidable: {\n    // 上传目录\n    // uploadDir: path.join(__dirname, 'public/uploads'),\n    // 保留文件扩展名\n    keepExtensions: true,\n    maxFields: 10 * 1024 * 1024,\n    //限制字段的数量\n    maxFieldsSize: 10 * 1024 * 1024 //限制字段的最大大小\n\n  }\n};\napp.use((0, _koaBody.default)(koaBodyConfig));\napp.use((0, _koaStatic.default)(_path.default.join(__dirname, '../public'), {\n  index: false,\n  hidden: false,\n  defer: false\n}));\napp.use(_Auth.default);\napp.use(cors());\napp.use(_ErrorHandle.default);\napp.use(json({\n  pretty: false,\n  param: 'pretty'\n}));\napp.use(combineRoutes());\napp.use(jwt);\napp.listen(3000, (0, _Init.default)());\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsia29hIiwicmVxdWlyZSIsImNvbWJpbmVSb3V0ZXMiLCJjb3JzIiwianNvbiIsImFwcCIsIndzIiwiV2ViU29ja2V0IiwiaW5pdCIsImdsb2JhbCIsImp3dCIsInNlY3JldCIsImNvbmZpZyIsIkpXVF9TRUNSRVQiLCJ1bmxlc3MiLCJwYXRoIiwiY29yc09wdGlvbnMiLCJvcmlnaW4iLCJjcmVkZW50aWFscyIsIm9wdGlvblN1Y2Nlc3NTdGF0dXMiLCJhbGxvd01ldGhvZHMiLCJrb2FCb2R5Q29uZmlnIiwibXVsdGlwYXJ0IiwianNvbkxpbWl0IiwiZm9ybUxpbWl0IiwidGV4dExpbWl0IiwiZm9ybWlkYWJsZSIsImtlZXBFeHRlbnNpb25zIiwibWF4RmllbGRzIiwibWF4RmllbGRzU2l6ZSIsInVzZSIsImpvaW4iLCJfX2Rpcm5hbWUiLCJpbmRleCIsImhpZGRlbiIsImRlZmVyIiwiQXV0aCIsIkVycm9ySGFuZGxlIiwicHJldHR5IiwicGFyYW0iLCJsaXN0ZW4iXSwibWFwcGluZ3MiOiI7O0FBSUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFaQSxNQUFNQSxHQUFHLEdBQUdDLE9BQU8sQ0FBQyxLQUFELENBQW5COztBQUNBLE1BQU1DLGFBQWEsR0FBR0QsT0FBTyxDQUFDLGlCQUFELENBQTdCOztBQUNBLE1BQU1FLElBQUksR0FBR0YsT0FBTyxDQUFDLFdBQUQsQ0FBcEI7O0FBQ0EsTUFBTUcsSUFBSSxHQUFHSCxPQUFPLENBQUMsVUFBRCxDQUFwQjs7QUFhQSxNQUFNSSxHQUFHLEdBQUcsSUFBSUwsR0FBSixFQUFaO0FBRUEsTUFBTU0sRUFBRSxHQUFHLElBQUlDLGtCQUFKLEVBQVg7QUFDQUQsRUFBRSxDQUFDRSxJQUFIO0FBQ0FDLE1BQU0sQ0FBQ0gsRUFBUCxHQUFZQSxFQUFaO0FBRUEsTUFBTUksR0FBRyxHQUFHLHFCQUFJO0FBQUVDLEVBQUFBLE1BQU0sRUFBRUMsZUFBT0M7QUFBakIsQ0FBSixFQUFtQ0MsTUFBbkMsQ0FBMEM7QUFBRUMsRUFBQUEsSUFBSSxFQUFFLENBQUMsV0FBRCxFQUFjLFdBQWQsRUFBMkIsZ0JBQTNCLEVBQTZDLFFBQTdDLEVBQXVELFFBQXZEO0FBQVIsQ0FBMUMsQ0FBWjtBQUVBLE1BQU1DLFdBQVcsR0FBRztBQUNsQkMsRUFBQUEsTUFBTSxFQUFFLHVCQURVO0FBRWxCQyxFQUFBQSxXQUFXLEVBQUUsSUFGSztBQUVZO0FBQzlCQyxFQUFBQSxtQkFBbUIsRUFBRSxHQUhIO0FBSWxCO0FBRUFDLEVBQUFBLFlBQVksRUFBRSxDQUFDLEtBQUQsRUFBUSxLQUFSLEVBQWUsTUFBZixFQUF1QixRQUF2QixFQUFpQyxPQUFqQyxFQUEwQyxTQUExQztBQU5JLENBQXBCO0FBVUEsTUFBTUMsYUFBYSxHQUFHO0FBQ3BCQyxFQUFBQSxTQUFTLEVBQUUsSUFEUztBQUNIO0FBQ2pCQyxFQUFBQSxTQUFTLEVBQUUsT0FGUztBQUVEO0FBQ25CQyxFQUFBQSxTQUFTLEVBQUUsT0FIUztBQUdEO0FBQ25CQyxFQUFBQSxTQUFTLEVBQUUsT0FKUztBQUlEO0FBQ25CQyxFQUFBQSxVQUFVLEVBQUU7QUFDVjtBQUNBO0FBQ0E7QUFDQUMsSUFBQUEsY0FBYyxFQUFFLElBSk47QUFNVkMsSUFBQUEsU0FBUyxFQUFFLEtBQUssSUFBTCxHQUFZLElBTmI7QUFNbUI7QUFDN0JDLElBQUFBLGFBQWEsRUFBRSxLQUFLLElBQUwsR0FBWSxJQVBqQixDQU9zQjs7QUFQdEI7QUFMUSxDQUF0QjtBQW1CQXhCLEdBQUcsQ0FBQ3lCLEdBQUosQ0FBUSxzQkFBS1QsYUFBTCxDQUFSO0FBQ0FoQixHQUFHLENBQUN5QixHQUFKLENBQVEsd0JBQU1mLGNBQUtnQixJQUFMLENBQVVDLFNBQVYsRUFBcUIsV0FBckIsQ0FBTixFQUF5QztBQUMvQ0MsRUFBQUEsS0FBSyxFQUFFLEtBRHdDO0FBRS9DQyxFQUFBQSxNQUFNLEVBQUUsS0FGdUM7QUFHL0NDLEVBQUFBLEtBQUssRUFBRTtBQUh3QyxDQUF6QyxDQUFSO0FBS0E5QixHQUFHLENBQUN5QixHQUFKLENBQVFNLGFBQVI7QUFDQS9CLEdBQUcsQ0FBQ3lCLEdBQUosQ0FBUTNCLElBQUksRUFBWjtBQUNBRSxHQUFHLENBQUN5QixHQUFKLENBQVFPLG9CQUFSO0FBQ0FoQyxHQUFHLENBQUN5QixHQUFKLENBQVExQixJQUFJLENBQUM7QUFBRWtDLEVBQUFBLE1BQU0sRUFBRSxLQUFWO0FBQWlCQyxFQUFBQSxLQUFLLEVBQUU7QUFBeEIsQ0FBRCxDQUFaO0FBQ0FsQyxHQUFHLENBQUN5QixHQUFKLENBQVE1QixhQUFhLEVBQXJCO0FBQ0FHLEdBQUcsQ0FBQ3lCLEdBQUosQ0FBUXBCLEdBQVI7QUFDQUwsR0FBRyxDQUFDbUMsTUFBSixDQUFXLElBQVgsRUFBaUIsb0JBQWpCIiwic291cmNlUm9vdCI6IkQ6XFxIVE1MK2Nzcytqc1xcbm9kZV9rb2FcXHNyY1xcIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qga29hID0gcmVxdWlyZSgna29hJylcclxuY29uc3QgY29tYmluZVJvdXRlcyA9IHJlcXVpcmUoJy4vcm91dGVzL3JvdXRlcycpXHJcbmNvbnN0IGNvcnMgPSByZXF1aXJlKCdAa29hL2NvcnMnKVxyXG5jb25zdCBqc29uID0gcmVxdWlyZSgna29hLWpzb24nKVxyXG5pbXBvcnQgQm9keSBmcm9tICdrb2EtYm9keSc7XHJcbmltcG9ydCBzZXJ2ZSBmcm9tICdrb2Etc3RhdGljJztcclxuaW1wb3J0IEpXVCBmcm9tICdrb2Etand0JztcclxuaW1wb3J0IGNvbmZpZyBmcm9tICcuL2NvbmZpZy9pbmRleCc7XHJcbmltcG9ydCBFcnJvckhhbmRsZSBmcm9tICcuL2Nvbm1vbi9FcnJvckhhbmRsZSc7XHJcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xyXG5pbXBvcnQgV2ViU29ja2V0IGZyb20gJy4vY29uZmlnL1dlYlNvY2tldC5qcyc7XHJcbmltcG9ydCBBdXRoIGZyb20gJy4vY29ubW9uL0F1dGgnO1xyXG5pbXBvcnQgaW5pdCBmcm9tICcuL2Nvbm1vbi9Jbml0JztcclxuXHJcblxyXG5cclxuY29uc3QgYXBwID0gbmV3IGtvYSgpXHJcblxyXG5jb25zdCB3cyA9IG5ldyBXZWJTb2NrZXQoKVxyXG53cy5pbml0KClcclxuZ2xvYmFsLndzID0gd3NcclxuXHJcbmNvbnN0IGp3dCA9IEpXVCh7IHNlY3JldDogY29uZmlnLkpXVF9TRUNSRVQgfSkudW5sZXNzKHsgcGF0aDogWy9eXFwvcHVibGljLywgL15cXC9zdmdjYXAvLCAvXlxcL3N1Ym1pdExvZ2luLywgL15cXC9yZWcvLCAvXlxcL2FkZC9dIH0pXHJcblxyXG5jb25zdCBjb3JzT3B0aW9ucyA9IHtcclxuICBvcmlnaW46ICdodHRwOi8vbG9jYWxob3N0OjgwODAnLFxyXG4gIGNyZWRlbnRpYWxzOiB0cnVlLCAgICAgICAgICAgIC8vYWNjZXNzLWNvbnRyb2wtYWxsb3ctY3JlZGVudGlhbHM6dHJ1ZVxyXG4gIG9wdGlvblN1Y2Nlc3NTdGF0dXM6IDIwMCxcclxuICAvLyAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcyc6J1BPU1QnLFxyXG5cclxuICBhbGxvd01ldGhvZHM6IFsnR0VUJywgJ1BVVCcsICdQT1NUJywgJ0RFTEVURScsICdQQVRDSCcsICdPUFRJT05TJ10sXHJcblxyXG59XHJcblxyXG5jb25zdCBrb2FCb2R5Q29uZmlnID0ge1xyXG4gIG11bHRpcGFydDogdHJ1ZSwgLy8vLyDlvIDlkK/mlofku7bkuIrkvKBcclxuICBqc29uTGltaXQ6ICcxMDBtYicsLy9KU09OIOaVsOaNruS9k+eahOWkp+Wwj+mZkOWItlxyXG4gIGZvcm1MaW1pdDogJzEwMG1iJywvL+ihqOWNleivt+axguS9k+eahOWkp+Wwj+mZkOWItlxyXG4gIHRleHRMaW1pdDogJzEwMG1iJywvLyB0ZXh0IGJvZHkg55qE5aSn5bCP6ZmQ5Yi2XHJcbiAgZm9ybWlkYWJsZToge1xyXG4gICAgLy8g5LiK5Lyg55uu5b2VXHJcbiAgICAvLyB1cGxvYWREaXI6IHBhdGguam9pbihfX2Rpcm5hbWUsICdwdWJsaWMvdXBsb2FkcycpLFxyXG4gICAgLy8g5L+d55WZ5paH5Lu25omp5bGV5ZCNXHJcbiAgICBrZWVwRXh0ZW5zaW9uczogdHJ1ZSxcclxuXHJcbiAgICBtYXhGaWVsZHM6IDEwICogMTAyNCAqIDEwMjQsIC8v6ZmQ5Yi25a2X5q6155qE5pWw6YePXHJcbiAgICBtYXhGaWVsZHNTaXplOiAxMCAqIDEwMjQgKiAxMDI0IC8v6ZmQ5Yi25a2X5q6155qE5pyA5aSn5aSn5bCPXHJcblxyXG5cclxuXHJcbiAgfVxyXG59XHJcblxyXG5hcHAudXNlKEJvZHkoa29hQm9keUNvbmZpZykpXHJcbmFwcC51c2Uoc2VydmUocGF0aC5qb2luKF9fZGlybmFtZSwgJy4uL3B1YmxpYycpLCB7XHJcbiAgaW5kZXg6IGZhbHNlLFxyXG4gIGhpZGRlbjogZmFsc2UsXHJcbiAgZGVmZXI6IGZhbHNlXHJcbn0pKVxyXG5hcHAudXNlKEF1dGgpXHJcbmFwcC51c2UoY29ycygpKVxyXG5hcHAudXNlKEVycm9ySGFuZGxlKVxyXG5hcHAudXNlKGpzb24oeyBwcmV0dHk6IGZhbHNlLCBwYXJhbTogJ3ByZXR0eScgfSkpXHJcbmFwcC51c2UoY29tYmluZVJvdXRlcygpKVxyXG5hcHAudXNlKGp3dClcclxuYXBwLmxpc3RlbigzMDAwLCBpbml0KCkpIl19",
    "map": {
      "version": 3,
      "sources": [
        "main.js"
      ],
      "names": [
        "koa",
        "require",
        "combineRoutes",
        "cors",
        "json",
        "app",
        "ws",
        "WebSocket",
        "init",
        "global",
        "jwt",
        "secret",
        "config",
        "JWT_SECRET",
        "unless",
        "path",
        "corsOptions",
        "origin",
        "credentials",
        "optionSuccessStatus",
        "allowMethods",
        "koaBodyConfig",
        "multipart",
        "jsonLimit",
        "formLimit",
        "textLimit",
        "formidable",
        "keepExtensions",
        "maxFields",
        "maxFieldsSize",
        "use",
        "join",
        "__dirname",
        "index",
        "hidden",
        "defer",
        "Auth",
        "ErrorHandle",
        "pretty",
        "param",
        "listen"
      ],
      "mappings": ";;AAIA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAZA,MAAMA,GAAG,GAAGC,OAAO,CAAC,KAAD,CAAnB;;AACA,MAAMC,aAAa,GAAGD,OAAO,CAAC,iBAAD,CAA7B;;AACA,MAAME,IAAI,GAAGF,OAAO,CAAC,WAAD,CAApB;;AACA,MAAMG,IAAI,GAAGH,OAAO,CAAC,UAAD,CAApB;;AAaA,MAAMI,GAAG,GAAG,IAAIL,GAAJ,EAAZ;AAEA,MAAMM,EAAE,GAAG,IAAIC,kBAAJ,EAAX;AACAD,EAAE,CAACE,IAAH;AACAC,MAAM,CAACH,EAAP,GAAYA,EAAZ;AAEA,MAAMI,GAAG,GAAG,qBAAI;AAAEC,EAAAA,MAAM,EAAEC,eAAOC;AAAjB,CAAJ,EAAmCC,MAAnC,CAA0C;AAAEC,EAAAA,IAAI,EAAE,CAAC,WAAD,EAAc,WAAd,EAA2B,gBAA3B,EAA6C,QAA7C,EAAuD,QAAvD;AAAR,CAA1C,CAAZ;AAEA,MAAMC,WAAW,GAAG;AAClBC,EAAAA,MAAM,EAAE,uBADU;AAElBC,EAAAA,WAAW,EAAE,IAFK;AAEY;AAC9BC,EAAAA,mBAAmB,EAAE,GAHH;AAIlB;AAEAC,EAAAA,YAAY,EAAE,CAAC,KAAD,EAAQ,KAAR,EAAe,MAAf,EAAuB,QAAvB,EAAiC,OAAjC,EAA0C,SAA1C;AANI,CAApB;AAUA,MAAMC,aAAa,GAAG;AACpBC,EAAAA,SAAS,EAAE,IADS;AACH;AACjBC,EAAAA,SAAS,EAAE,OAFS;AAED;AACnBC,EAAAA,SAAS,EAAE,OAHS;AAGD;AACnBC,EAAAA,SAAS,EAAE,OAJS;AAID;AACnBC,EAAAA,UAAU,EAAE;AACV;AACA;AACA;AACAC,IAAAA,cAAc,EAAE,IAJN;AAMVC,IAAAA,SAAS,EAAE,KAAK,IAAL,GAAY,IANb;AAMmB;AAC7BC,IAAAA,aAAa,EAAE,KAAK,IAAL,GAAY,IAPjB,CAOsB;;AAPtB;AALQ,CAAtB;AAmBAxB,GAAG,CAACyB,GAAJ,CAAQ,sBAAKT,aAAL,CAAR;AACAhB,GAAG,CAACyB,GAAJ,CAAQ,wBAAMf,cAAKgB,IAAL,CAAUC,SAAV,EAAqB,WAArB,CAAN,EAAyC;AAC/CC,EAAAA,KAAK,EAAE,KADwC;AAE/CC,EAAAA,MAAM,EAAE,KAFuC;AAG/CC,EAAAA,KAAK,EAAE;AAHwC,CAAzC,CAAR;AAKA9B,GAAG,CAACyB,GAAJ,CAAQM,aAAR;AACA/B,GAAG,CAACyB,GAAJ,CAAQ3B,IAAI,EAAZ;AACAE,GAAG,CAACyB,GAAJ,CAAQO,oBAAR;AACAhC,GAAG,CAACyB,GAAJ,CAAQ1B,IAAI,CAAC;AAAEkC,EAAAA,MAAM,EAAE,KAAV;AAAiBC,EAAAA,KAAK,EAAE;AAAxB,CAAD,CAAZ;AACAlC,GAAG,CAACyB,GAAJ,CAAQ5B,aAAa,EAArB;AACAG,GAAG,CAACyB,GAAJ,CAAQpB,GAAR;AACAL,GAAG,CAACmC,MAAJ,CAAW,IAAX,EAAiB,oBAAjB",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\",
      "sourcesContent": [
        "const koa = require('koa')\r\nconst combineRoutes = require('./routes/routes')\r\nconst cors = require('@koa/cors')\r\nconst json = require('koa-json')\r\nimport Body from 'koa-body';\r\nimport serve from 'koa-static';\r\nimport JWT from 'koa-jwt';\r\nimport config from './config/index';\r\nimport ErrorHandle from './conmon/ErrorHandle';\r\nimport path from 'path';\r\nimport WebSocket from './config/WebSocket.js';\r\nimport Auth from './conmon/Auth';\r\nimport init from './conmon/Init';\r\n\r\n\r\n\r\nconst app = new koa()\r\n\r\nconst ws = new WebSocket()\r\nws.init()\r\nglobal.ws = ws\r\n\r\nconst jwt = JWT({ secret: config.JWT_SECRET }).unless({ path: [/^\\/public/, /^\\/svgcap/, /^\\/submitLogin/, /^\\/reg/, /^\\/add/] })\r\n\r\nconst corsOptions = {\r\n  origin: 'http://localhost:8080',\r\n  credentials: true,            //access-control-allow-credentials:true\r\n  optionSuccessStatus: 200,\r\n  // 'Access-Control-Allow-Methods':'POST',\r\n\r\n  allowMethods: ['GET', 'PUT', 'POST', 'DELETE', 'PATCH', 'OPTIONS'],\r\n\r\n}\r\n\r\nconst koaBodyConfig = {\r\n  multipart: true, //// 开启文件上传\r\n  jsonLimit: '100mb',//JSON 数据体的大小限制\r\n  formLimit: '100mb',//表单请求体的大小限制\r\n  textLimit: '100mb',// text body 的大小限制\r\n  formidable: {\r\n    // 上传目录\r\n    // uploadDir: path.join(__dirname, 'public/uploads'),\r\n    // 保留文件扩展名\r\n    keepExtensions: true,\r\n\r\n    maxFields: 10 * 1024 * 1024, //限制字段的数量\r\n    maxFieldsSize: 10 * 1024 * 1024 //限制字段的最大大小\r\n\r\n\r\n\r\n  }\r\n}\r\n\r\napp.use(Body(koaBodyConfig))\r\napp.use(serve(path.join(__dirname, '../public'), {\r\n  index: false,\r\n  hidden: false,\r\n  defer: false\r\n}))\r\napp.use(Auth)\r\napp.use(cors())\r\napp.use(ErrorHandle)\r\napp.use(json({ pretty: false, param: 'pretty' }))\r\napp.use(combineRoutes())\r\napp.use(jwt)\r\napp.listen(3000, init())"
      ]
    },
    "sourceType": "script",
    "mtime": 1637059722419
  },
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\config\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\config\\\\index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\config\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\config\\index.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\config\\index.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\config\\index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\config\\",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst DB_URL = 'mongodb://admin:123456@119.91.192.232:27017/admin';\nconst JWT_SECRET = 'sjjimg&khdkjp*hji2%ijjdenipsjj-^2shvidkjthj!hdueblgp'; // 图片储存路径\n\nconst uploadPath = _path.default.join(__dirname, '../../public'); // 配置超级管理员用户\n\n\nconst admins = ['ok@qq.com'];\n/**在使用export default导出,一定要通过变量名引入,\r\n * 比如import config from '../config/index';\r\n * 在通过 config.uploadPath 这样\r\n * */\n\nvar _default = {\n  DB_URL,\n  JWT_SECRET,\n  uploadPath,\n  admins\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkRCX1VSTCIsIkpXVF9TRUNSRVQiLCJ1cGxvYWRQYXRoIiwicGF0aCIsImpvaW4iLCJfX2Rpcm5hbWUiLCJhZG1pbnMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7OztBQUVBLE1BQU1BLE1BQU0sR0FBRyxtREFBZjtBQUNBLE1BQU1DLFVBQVUsR0FBRyxzREFBbkIsQyxDQUVBOztBQUNBLE1BQU1DLFVBQVUsR0FBR0MsY0FBS0MsSUFBTCxDQUFVQyxTQUFWLEVBQXFCLGNBQXJCLENBQW5CLEMsQ0FFQTs7O0FBQ0EsTUFBTUMsTUFBTSxHQUFHLENBQUMsV0FBRCxDQUFmO0FBRUE7QUFDQTtBQUNBO0FBQ0E7O2VBQ2U7QUFDYk4sRUFBQUEsTUFEYTtBQUViQyxFQUFBQSxVQUZhO0FBR2JDLEVBQUFBLFVBSGE7QUFJYkksRUFBQUE7QUFKYSxDIiwic291cmNlUm9vdCI6IkQ6XFxIVE1MK2Nzcytqc1xcbm9kZV9rb2FcXHNyY1xcY29uZmlnXFwiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcclxuXHJcbmNvbnN0IERCX1VSTCA9ICdtb25nb2RiOi8vYWRtaW46MTIzNDU2QDExOS45MS4xOTIuMjMyOjI3MDE3L2FkbWluJ1xyXG5jb25zdCBKV1RfU0VDUkVUID0gJ3NqamltZyZraGRranAqaGppMiVpampkZW5pcHNqai1eMnNodmlka2p0aGohaGR1ZWJsZ3AnXHJcblxyXG4vLyDlm77niYflgqjlrZjot6/lvoRcclxuY29uc3QgdXBsb2FkUGF0aCA9IHBhdGguam9pbihfX2Rpcm5hbWUsICcuLi8uLi9wdWJsaWMnKVxyXG5cclxuLy8g6YWN572u6LaF57qn566h55CG5ZGY55So5oi3XHJcbmNvbnN0IGFkbWlucyA9IFsnb2tAcXEuY29tJ11cclxuXHJcbi8qKuWcqOS9v+eUqGV4cG9ydCBkZWZhdWx05a+85Ye6LOS4gOWumuimgemAmui/h+WPmOmHj+WQjeW8leWFpSxcclxuICog5q+U5aaCaW1wb3J0IGNvbmZpZyBmcm9tICcuLi9jb25maWcvaW5kZXgnO1xyXG4gKiDlnKjpgJrov4cgY29uZmlnLnVwbG9hZFBhdGgg6L+Z5qC3XHJcbiAqICovXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBEQl9VUkwsXHJcbiAgSldUX1NFQ1JFVCxcclxuICB1cGxvYWRQYXRoLFxyXG4gIGFkbWluc1xyXG59Il19",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "DB_URL",
        "JWT_SECRET",
        "uploadPath",
        "path",
        "join",
        "__dirname",
        "admins"
      ],
      "mappings": ";;;;;;;AAAA;;;;AAEA,MAAMA,MAAM,GAAG,mDAAf;AACA,MAAMC,UAAU,GAAG,sDAAnB,C,CAEA;;AACA,MAAMC,UAAU,GAAGC,cAAKC,IAAL,CAAUC,SAAV,EAAqB,cAArB,CAAnB,C,CAEA;;;AACA,MAAMC,MAAM,GAAG,CAAC,WAAD,CAAf;AAEA;AACA;AACA;AACA;;eACe;AACbN,EAAAA,MADa;AAEbC,EAAAA,UAFa;AAGbC,EAAAA,UAHa;AAIbI,EAAAA;AAJa,C",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\config\\",
      "sourcesContent": [
        "import path from 'path';\r\n\r\nconst DB_URL = 'mongodb://admin:123456@119.91.192.232:27017/admin'\r\nconst JWT_SECRET = 'sjjimg&khdkjp*hji2%ijjdenipsjj-^2shvidkjthj!hdueblgp'\r\n\r\n// 图片储存路径\r\nconst uploadPath = path.join(__dirname, '../../public')\r\n\r\n// 配置超级管理员用户\r\nconst admins = ['ok@qq.com']\r\n\r\n/**在使用export default导出,一定要通过变量名引入,\r\n * 比如import config from '../config/index';\r\n * 在通过 config.uploadPath 这样\r\n * */\r\nexport default {\r\n  DB_URL,\r\n  JWT_SECRET,\r\n  uploadPath,\r\n  admins\r\n}"
      ]
    },
    "sourceType": "script",
    "mtime": 1637060111109
  },
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\conmon\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\conmon\\\\ErrorHandle.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\conmon\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\conmon\\ErrorHandle.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\conmon\\ErrorHandle.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\conmon\\ErrorHandle.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\conmon\\",
        "sourceFileName": "ErrorHandle.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _default = (ctx, next) => {\n  return next().catch(err => {\n    if (401 === err.status) {\n      ctx.status = 401;\n      console.log(401);\n      ctx.body = 'Protected resource, use Authorization header to get access\\n';\n    } else {\n      console.log(404);\n      throw err;\n    }\n  });\n}; // export default (ctx, next) => {\n//   if (ctx.url.match(/^\\/public/)) {\n//     ctx.body = 'unprotected\\n';\n//   } else {\n//     return next();\n//   }\n// }\n\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkVycm9ySGFuZGxlLmpzIl0sIm5hbWVzIjpbImN0eCIsIm5leHQiLCJjYXRjaCIsImVyciIsInN0YXR1cyIsImNvbnNvbGUiLCJsb2ciLCJib2R5Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O2VBQWUsQ0FBQ0EsR0FBRCxFQUFNQyxJQUFOLEtBQWU7QUFDNUIsU0FBT0EsSUFBSSxHQUFHQyxLQUFQLENBQWNDLEdBQUQsSUFBUztBQUMzQixRQUFJLFFBQVFBLEdBQUcsQ0FBQ0MsTUFBaEIsRUFBd0I7QUFDdEJKLE1BQUFBLEdBQUcsQ0FBQ0ksTUFBSixHQUFhLEdBQWI7QUFDQUMsTUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksR0FBWjtBQUNBTixNQUFBQSxHQUFHLENBQUNPLElBQUosR0FBVyw4REFBWDtBQUNELEtBSkQsTUFJTztBQUVMRixNQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxHQUFaO0FBQ0EsWUFBTUgsR0FBTjtBQUNEO0FBQ0YsR0FWTSxDQUFQO0FBV0QsQyxFQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IkQ6XFxIVE1MK2Nzcytqc1xcbm9kZV9rb2FcXHNyY1xcY29ubW9uXFwiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCAoY3R4LCBuZXh0KSA9PiB7XHJcbiAgcmV0dXJuIG5leHQoKS5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBpZiAoNDAxID09PSBlcnIuc3RhdHVzKSB7XHJcbiAgICAgIGN0eC5zdGF0dXMgPSA0MDE7XHJcbiAgICAgIGNvbnNvbGUubG9nKDQwMSk7XHJcbiAgICAgIGN0eC5ib2R5ID0gJ1Byb3RlY3RlZCByZXNvdXJjZSwgdXNlIEF1dGhvcml6YXRpb24gaGVhZGVyIHRvIGdldCBhY2Nlc3NcXG4nO1xyXG4gICAgfSBlbHNlIHtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKDQwNCk7XHJcbiAgICAgIHRocm93IGVycjtcclxuICAgIH1cclxuICB9KVxyXG59XHJcblxyXG4vLyBleHBvcnQgZGVmYXVsdCAoY3R4LCBuZXh0KSA9PiB7XHJcbi8vICAgaWYgKGN0eC51cmwubWF0Y2goL15cXC9wdWJsaWMvKSkge1xyXG4vLyAgICAgY3R4LmJvZHkgPSAndW5wcm90ZWN0ZWRcXG4nO1xyXG4vLyAgIH0gZWxzZSB7XHJcbi8vICAgICByZXR1cm4gbmV4dCgpO1xyXG4vLyAgIH1cclxuLy8gfSJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "ErrorHandle.js"
      ],
      "names": [
        "ctx",
        "next",
        "catch",
        "err",
        "status",
        "console",
        "log",
        "body"
      ],
      "mappings": ";;;;;;;eAAe,CAACA,GAAD,EAAMC,IAAN,KAAe;AAC5B,SAAOA,IAAI,GAAGC,KAAP,CAAcC,GAAD,IAAS;AAC3B,QAAI,QAAQA,GAAG,CAACC,MAAhB,EAAwB;AACtBJ,MAAAA,GAAG,CAACI,MAAJ,GAAa,GAAb;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ;AACAN,MAAAA,GAAG,CAACO,IAAJ,GAAW,8DAAX;AACD,KAJD,MAIO;AAELF,MAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ;AACA,YAAMH,GAAN;AACD;AACF,GAVM,CAAP;AAWD,C,EAED;AACA;AACA;AACA;AACA;AACA;AACA",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\conmon\\",
      "sourcesContent": [
        "export default (ctx, next) => {\r\n  return next().catch((err) => {\r\n    if (401 === err.status) {\r\n      ctx.status = 401;\r\n      console.log(401);\r\n      ctx.body = 'Protected resource, use Authorization header to get access\\n';\r\n    } else {\r\n\r\n      console.log(404);\r\n      throw err;\r\n    }\r\n  })\r\n}\r\n\r\n// export default (ctx, next) => {\r\n//   if (ctx.url.match(/^\\/public/)) {\r\n//     ctx.body = 'unprotected\\n';\r\n//   } else {\r\n//     return next();\r\n//   }\r\n// }"
      ]
    },
    "sourceType": "script",
    "mtime": 1629041256852
  },
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\config\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\config\\\\WebSocket.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\config\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\config\\WebSocket.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\config\\WebSocket.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\config\\WebSocket.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\config\\",
        "sourceFileName": "WebSocket.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _ws = _interopRequireDefault(require(\"ws\"));\n\nvar _Utils = require(\"../conmon/Utils\");\n\nvar _test = _interopRequireDefault(require(\"../model/test\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass WebSocketSever {\n  constructor(config = {}) {\n    const defaultConfig = {\n      port: 3001,\n      timeInterval: 30 * 1000,\n      isAuth: true\n    };\n    const finalConfig = { ...defaultConfig,\n      ...config\n    };\n    this.wss = {};\n    this.port = finalConfig.port;\n    this.timeInterval = finalConfig.timeInterval; // this.interval = null\n\n    this.isAuth = finalConfig.isAuth;\n    this.options = config.options || {};\n  }\n\n  init() {\n    this.wss = new _ws.default.Server({\n      port: this.port,\n      ...this.options\n    }); // 连接信息\n\n    this.wss.on('connection', ws => {\n      ws.isAlive = true;\n      ws.send(JSON.stringify({\n        event: 'heartbeat',\n        message: 'ping'\n      }));\n      ws.on('message', msg => {\n        this.onMessage(ws, msg);\n      });\n      ws.on('close', () => this.onClose(ws));\n    }); // 心跳检测\n\n    this.heartbeat();\n  }\n\n  onMessage(ws, msg) {\n    const msgObj = JSON.parse(msg);\n    const events = {\n      auth: async () => {\n        try {\n          const obj = await (0, _Utils.getJWTPayload)(msgObj.message);\n\n          if (obj) {\n            const user = await _test.default.findById({\n              _id: obj._id\n            });\n            ws.isAuth = true;\n            ws._id = obj._id;\n            ws.send(JSON.stringify({\n              events: 'noauth',\n              message: {\n                unread_num: user.unread_num,\n                message: `您有${user.unread_num}条未读消息`\n              }\n            }));\n          }\n        } catch (err) {\n          ws.send(JSON.stringify({\n            events: 'noauth',\n            message: 'please auth again'\n          }));\n        }\n      },\n      heartbeat: () => {\n        // 鉴权拦截\n        if (msgObj.message === 'pong') {\n          ws.isAlive = true;\n        }\n      },\n      message: () => {// 鉴权拦截\n        // if (!ws.isAuth && this.isAuth) {\n        //   return\n        // }\n        // 消息广播\n        // this.wss.clients.forEach(client => {\n        //   if (client.readyState === WebSocket.OPEN && client._id === ws._id) {\n        //     this.send(msg)\n        //   }\n        // });\n      }\n    };\n    events[msgObj.event]();\n  } // 点对点的消息发送\n\n\n  send(uid, msg) {\n    this.wss.clients.forEach(client => {\n      if (client.readyState === _ws.default.OPEN && client._id === uid) {\n        const jsonMsg = JSON.stringify({\n          events: 'message',\n          message: msg\n        });\n        client.send(jsonMsg);\n      }\n    });\n  } // 广播消息 -> 推送系统消息\n\n\n  broadcast(msg) {\n    this.wss.clients.forEach(client => {\n      if (client.readyState === _ws.default.OPEN) {\n        client.send(msg);\n      }\n    });\n  }\n\n  onClose(ws) {} // 心跳检测\n\n\n  heartbeat() {\n    clearInterval(this.interval);\n    this.interval = setInterval(() => {\n      console.log('this.timeInterval: ', this.timeInterval);\n      this.wss.clients.forEach(ws => {\n        if (!ws.isAlive && ws.roomid) {\n          delete ws.roomid;\n          return ws.terminate();\n        } // 主动发送心跳检测请求\n        // 当客户端返回消息之后,主动设置flag为在线\n\n\n        ws.isAlive = false;\n        ws.send(JSON.stringify({\n          event: 'heartbeat',\n          message: 'ping'\n        }));\n      });\n    }, this.timeInterval);\n  }\n\n}\n\nvar _default = WebSocketSever;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIldlYlNvY2tldC5qcyJdLCJuYW1lcyI6WyJXZWJTb2NrZXRTZXZlciIsImNvbnN0cnVjdG9yIiwiY29uZmlnIiwiZGVmYXVsdENvbmZpZyIsInBvcnQiLCJ0aW1lSW50ZXJ2YWwiLCJpc0F1dGgiLCJmaW5hbENvbmZpZyIsIndzcyIsIm9wdGlvbnMiLCJpbml0IiwiV2ViU29ja2V0IiwiU2VydmVyIiwib24iLCJ3cyIsImlzQWxpdmUiLCJzZW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsImV2ZW50IiwibWVzc2FnZSIsIm1zZyIsIm9uTWVzc2FnZSIsIm9uQ2xvc2UiLCJoZWFydGJlYXQiLCJtc2dPYmoiLCJwYXJzZSIsImV2ZW50cyIsImF1dGgiLCJvYmoiLCJ1c2VyIiwiVXNlcnMiLCJmaW5kQnlJZCIsIl9pZCIsInVucmVhZF9udW0iLCJlcnIiLCJ1aWQiLCJjbGllbnRzIiwiZm9yRWFjaCIsImNsaWVudCIsInJlYWR5U3RhdGUiLCJPUEVOIiwianNvbk1zZyIsImJyb2FkY2FzdCIsImNsZWFySW50ZXJ2YWwiLCJpbnRlcnZhbCIsInNldEludGVydmFsIiwiY29uc29sZSIsImxvZyIsInJvb21pZCIsInRlcm1pbmF0ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsY0FBTixDQUFxQjtBQUNuQkMsRUFBQUEsV0FBVyxDQUFDQyxNQUFNLEdBQUcsRUFBVixFQUFjO0FBQ3ZCLFVBQU1DLGFBQWEsR0FBRztBQUNwQkMsTUFBQUEsSUFBSSxFQUFFLElBRGM7QUFFcEJDLE1BQUFBLFlBQVksRUFBRSxLQUFLLElBRkM7QUFHcEJDLE1BQUFBLE1BQU0sRUFBRTtBQUhZLEtBQXRCO0FBS0EsVUFBTUMsV0FBVyxHQUFHLEVBQUUsR0FBR0osYUFBTDtBQUFvQixTQUFHRDtBQUF2QixLQUFwQjtBQUNBLFNBQUtNLEdBQUwsR0FBVyxFQUFYO0FBQ0EsU0FBS0osSUFBTCxHQUFZRyxXQUFXLENBQUNILElBQXhCO0FBQ0EsU0FB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QUFJLENBQUNBLEVBQUUsQ0FBQ0MsT0FBSixJQUFlRCxFQUFFLENBQUNtQyxNQUF0QixFQUE4QjtBQUM1QixpQkFBT25DLEVBQUUsQ0FBQ21DLE1BQVY7QUFFQSxpQkFBT25DLEVBQUUsQ0FBQ29DLFNBQUgsRUFBUDtBQUNELFNBTjRCLENBTzdCO0FBQ0E7OztBQUNBcEMsUUFBQUEsRUFBRSxDQUFDQyxPQUFILEdBQWEsS0FBYjtBQUNBRCxRQUFBQSxFQUFFLENBQUNFLElBQUgsQ0FBUUMsSUFBSSxDQUFDQyxTQUFMLENBQWU7QUFDckJDLFVBQUFBLEtBQUssRUFBRSxXQURjO0FBRXJCQyxVQUFBQSxPQUFPLEVBQUU7QUFGWSxTQUFmLENBQVI7QUFJRCxPQWREO0FBZ0JELEtBbEIwQixFQWtCeEIsS0FBS2YsWUFsQm1CLENBQTNCO0FBbUJEOztBQTFJa0I7O2VBNklOTCxjIiwic291cmNlUm9vdCI6IkQ6XFxIVE1MK2Nzcytqc1xcbm9kZV9rb2FcXHNyY1xcY29uZmlnXFwiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgV2ViU29ja2V0IGZyb20gJ3dzJztcclxuaW1wb3J0IHsgZ2V0SldUUGF5bG9hZCB9IGZyb20gJy4uL2Nvbm1vbi9VdGlscyc7XHJcbmltcG9ydCBVc2VycyBmcm9tICcuLi9tb2RlbC90ZXN0JztcclxuXHJcbmNsYXNzIFdlYlNvY2tldFNldmVyIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcgPSB7fSkge1xyXG4gICAgY29uc3QgZGVmYXVsdENvbmZpZyA9IHtcclxuICAgICAgcG9ydDogMzAwMSxcclxuICAgICAgdGltZUludGVydmFsOiAzMCAqIDEwMDAsXHJcbiAgICAgIGlzQXV0aDogdHJ1ZVxyXG4gICAgfVxyXG4gICAgY29uc3QgZmluYWxDb25maWcgPSB7IC4uLmRlZmF1bHRDb25maWcsIC4uLmNvbmZpZyB9XHJcbiAgICB0aGlzLndzcyA9IHt9XHJcbiAgICB0aGlzLnBvcnQgPSBmaW5hbENvbmZpZy5wb3J0XHJcbiAgICB0aGlzLnRpbWVJbnRlcnZhbCA9IGZpbmFsQ29uZmlnLnRpbWVJbnRlcnZhbFxyXG4gICAgLy8gdGhpcy5pbnRlcnZhbCA9IG51bGxcclxuICAgIHRoaXMuaXNBdXRoID0gZmluYWxDb25maWcuaXNBdXRoXHJcbiAgICB0aGlzLm9wdGlvbnMgPSBjb25maWcub3B0aW9ucyB8fCB7fVxyXG4gIH1cclxuICBpbml0ICgpIHtcclxuICAgIHRoaXMud3NzID0gbmV3IFdlYlNvY2tldC5TZXJ2ZXIoe1xyXG4gICAgICBwb3J0OiB0aGlzLnBvcnQsXHJcbiAgICAgIC4uLnRoaXMub3B0aW9uc1xyXG4gICAgfSlcclxuXHJcblxyXG4gICAgLy8g6L+e5o6l5L+h5oGvXHJcbiAgICB0aGlzLndzcy5vbignY29ubmVjdGlvbicsICh3cykgPT4ge1xyXG4gICAgICB3cy5pc0FsaXZlID0gdHJ1ZVxyXG4gICAgICB3cy5zZW5kKEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBldmVudDogJ2hlYXJ0YmVhdCcsXHJcbiAgICAgICAgbWVzc2FnZTogJ3BpbmcnXHJcbiAgICAgIH0pKVxyXG4gICAgICB3cy5vbignbWVzc2FnZScsIChtc2cpID0+IHtcclxuICAgICAgICB0aGlzLm9uTWVzc2FnZSh3cywgbXNnKVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgd3Mub24oJ2Nsb3NlJywgKCkgPT4gdGhpcy5vbkNsb3NlKHdzKSlcclxuICAgIH0pXHJcbiAgICAvLyDlv4Pot7Pmo4DmtYtcclxuICAgIHRoaXMuaGVhcnRiZWF0KClcclxuICB9XHJcblxyXG4gIG9uTWVzc2FnZSAod3MsIG1zZykge1xyXG4gICAgY29uc3QgbXNnT2JqID0gSlNPTi5wYXJzZShtc2cpXHJcblxyXG4gICAgY29uc3QgZXZlbnRzID0ge1xyXG4gICAgICBhdXRoOiBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IG9iaiA9IGF3YWl0IGdldEpXVFBheWxvYWQobXNnT2JqLm1lc3NhZ2UpXHJcbiAgICAgICAgICBpZiAob2JqKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2Vycy5maW5kQnlJZCh7IF9pZDogb2JqLl9pZCB9KVxyXG5cclxuICAgICAgICAgICAgd3MuaXNBdXRoID0gdHJ1ZVxyXG4gICAgICAgICAgICB3cy5faWQgPSBvYmouX2lkXHJcbiAgICAgICAgICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgIGV2ZW50czogJ25vYXV0aCcsXHJcbiAgICAgICAgICAgICAgbWVzc2FnZToge1xyXG4gICAgICAgICAgICAgICAgdW5yZWFkX251bTogdXNlci51bnJlYWRfbnVtLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYOaCqOaciSR7dXNlci51bnJlYWRfbnVtfeadoeacquivu+a2iOaBr2BcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgd3Muc2VuZChKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgIGV2ZW50czogJ25vYXV0aCcsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdwbGVhc2UgYXV0aCBhZ2FpbidcclxuICAgICAgICAgIH0pKVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgaGVhcnRiZWF0OiAoKSA9PiB7XHJcbiAgICAgICAgLy8g6Ym05p2D5oum5oiqXHJcbiAgICAgICAgaWYgKG1zZ09iai5tZXNzYWdlID09PSAncG9uZycpIHtcclxuICAgICAgICAgIHdzLmlzQWxpdmUgPSB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgbWVzc2FnZTogKCkgPT4ge1xyXG4gICAgICAgIC8vIOmJtOadg+aLpuaIqlxyXG4gICAgICAgIC8vIGlmICghd3MuaXNBdXRoICYmIHRoaXMuaXNBdXRoKSB7XHJcbiAgICAgICAgLy8gICByZXR1cm5cclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8g5raI5oGv5bm/5pKtXHJcbiAgICAgICAgLy8gdGhpcy53c3MuY2xpZW50cy5mb3JFYWNoKGNsaWVudCA9PiB7XHJcbiAgICAgICAgLy8gICBpZiAoY2xpZW50LnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOICYmIGNsaWVudC5faWQgPT09IHdzLl9pZCkge1xyXG4gICAgICAgIC8vICAgICB0aGlzLnNlbmQobXNnKVxyXG4gICAgICAgIC8vICAgfVxyXG4gICAgICAgIC8vIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZXZlbnRzW21zZ09iai5ldmVudF0oKVxyXG4gIH1cclxuICAvLyDngrnlr7nngrnnmoTmtojmga/lj5HpgIFcclxuICBzZW5kICh1aWQsIG1zZykge1xyXG4gICAgdGhpcy53c3MuY2xpZW50cy5mb3JFYWNoKGNsaWVudCA9PiB7XHJcbiAgICAgIGlmIChjbGllbnQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4gJiYgY2xpZW50Ll9pZCA9PT0gdWlkKSB7XHJcbiAgICAgICAgY29uc3QganNvbk1zZyA9IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIGV2ZW50czogJ21lc3NhZ2UnLFxyXG4gICAgICAgICAgbWVzc2FnZTogbXNnXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgY2xpZW50LnNlbmQoanNvbk1zZylcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcbiAgLy8g5bm/5pKt5raI5oGvIC0+IOaOqOmAgeezu+e7n+a2iOaBr1xyXG4gIGJyb2FkY2FzdCAobXNnKSB7XHJcbiAgICB0aGlzLndzcy5jbGllbnRzLmZvckVhY2goY2xpZW50ID0+IHtcclxuICAgICAgaWYgKGNsaWVudC5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTikge1xyXG4gICAgICAgIGNsaWVudC5zZW5kKG1zZylcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIG9uQ2xvc2UgKHdzKSB7XHJcblxyXG4gIH1cclxuXHJcbiAgLy8g5b+D6Lez5qOA5rWLXHJcbiAgaGVhcnRiZWF0ICgpIHtcclxuXHJcbiAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpXHJcbiAgICB0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZygndGhpcy50aW1lSW50ZXJ2YWw6ICcsIHRoaXMudGltZUludGVydmFsKTtcclxuICAgICAgdGhpcy53c3MuY2xpZW50cy5mb3JFYWNoKHdzID0+IHtcclxuXHJcbiAgICAgICAgaWYgKCF3cy5pc0FsaXZlICYmIHdzLnJvb21pZCkge1xyXG4gICAgICAgICAgZGVsZXRlIHdzLnJvb21pZFxyXG5cclxuICAgICAgICAgIHJldHVybiB3cy50ZXJtaW5hdGUoKVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDkuLvliqjlj5HpgIHlv4Pot7Pmo4DmtYvor7fmsYJcclxuICAgICAgICAvLyDlvZPlrqLmiLfnq6/ov5Tlm57mtojmga/kuYvlkI4s5Li75Yqo6K6+572uZmxhZ+S4uuWcqOe6v1xyXG4gICAgICAgIHdzLmlzQWxpdmUgPSBmYWxzZVxyXG4gICAgICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgZXZlbnQ6ICdoZWFydGJlYXQnLFxyXG4gICAgICAgICAgbWVzc2FnZTogJ3BpbmcnXHJcbiAgICAgICAgfSkpXHJcbiAgICAgIH0pO1xyXG5cclxuICAgIH0sIHRoaXMudGltZUludGVydmFsKVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgV2ViU29ja2V0U2V2ZXIiXX0=",
    "map": {
      "version": 3,
      "sources": [
        "WebSocket.js"
      ],
      "names": [
        "WebSocketSever",
        "constructor",
        "config",
        "defaultConfig",
        "port",
        "timeInterval",
        "isAuth",
        "finalConfig",
        "wss",
        "options",
        "init",
        "WebSocket",
        "Server",
        "on",
        "ws",
        "isAlive",
        "send",
        "JSON",
        "stringify",
        "event",
        "message",
        "msg",
        "onMessage",
        "onClose",
        "heartbeat",
        "msgObj",
        "parse",
        "events",
        "auth",
        "obj",
        "user",
        "Users",
        "findById",
        "_id",
        "unread_num",
        "err",
        "uid",
        "clients",
        "forEach",
        "client",
        "readyState",
        "OPEN",
        "jsonMsg",
        "broadcast",
        "clearInterval",
        "interval",
        "setInterval",
        "console",
        "log",
        "roomid",
        "terminate"
      ],
      "mappings": "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",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\config\\",
      "sourcesContent": [
        "import WebSocket from 'ws';\r\nimport { getJWTPayload } from '../conmon/Utils';\r\nimport Users from '../model/test';\r\n\r\nclass WebSocketSever {\r\n  constructor(config = {}) {\r\n    const defaultConfig = {\r\n      port: 3001,\r\n      timeInterval: 30 * 1000,\r\n      isAuth: true\r\n    }\r\n    const finalConfig = { ...defaultConfig, ...config }\r\n    this.wss = {}\r\n    this.port = finalConfig.port\r\n    this.timeInterval = finalConfig.timeInterval\r\n    // this.interval = null\r\n    this.isAuth = finalConfig.isAuth\r\n    this.options = config.options || {}\r\n  }\r\n  init () {\r\n    this.wss = new WebSocket.Server({\r\n      port: this.port,\r\n      ...this.options\r\n    })\r\n\r\n\r\n    // 连接信息\r\n    this.wss.on('connection', (ws) => {\r\n      ws.isAlive = true\r\n      ws.send(JSON.stringify({\r\n        event: 'heartbeat',\r\n        message: 'ping'\r\n      }))\r\n      ws.on('message', (msg) => {\r\n        this.onMessage(ws, msg)\r\n      })\r\n\r\n      ws.on('close', () => this.onClose(ws))\r\n    })\r\n    // 心跳检测\r\n    this.heartbeat()\r\n  }\r\n\r\n  onMessage (ws, msg) {\r\n    const msgObj = JSON.parse(msg)\r\n\r\n    const events = {\r\n      auth: async () => {\r\n        try {\r\n          const obj = await getJWTPayload(msgObj.message)\r\n          if (obj) {\r\n            const user = await Users.findById({ _id: obj._id })\r\n\r\n            ws.isAuth = true\r\n            ws._id = obj._id\r\n            ws.send(JSON.stringify({\r\n              events: 'noauth',\r\n              message: {\r\n                unread_num: user.unread_num,\r\n                message: `您有${user.unread_num}条未读消息`\r\n              }\r\n            }))\r\n          }\r\n        } catch (err) {\r\n          ws.send(JSON.stringify({\r\n            events: 'noauth',\r\n            message: 'please auth again'\r\n          }))\r\n        }\r\n      },\r\n      heartbeat: () => {\r\n        // 鉴权拦截\r\n        if (msgObj.message === 'pong') {\r\n          ws.isAlive = true\r\n        }\r\n      },\r\n\r\n      message: () => {\r\n        // 鉴权拦截\r\n        // if (!ws.isAuth && this.isAuth) {\r\n        //   return\r\n        // }\r\n        // 消息广播\r\n        // this.wss.clients.forEach(client => {\r\n        //   if (client.readyState === WebSocket.OPEN && client._id === ws._id) {\r\n        //     this.send(msg)\r\n        //   }\r\n        // });\r\n      }\r\n    }\r\n\r\n    events[msgObj.event]()\r\n  }\r\n  // 点对点的消息发送\r\n  send (uid, msg) {\r\n    this.wss.clients.forEach(client => {\r\n      if (client.readyState === WebSocket.OPEN && client._id === uid) {\r\n        const jsonMsg = JSON.stringify({\r\n          events: 'message',\r\n          message: msg\r\n        })\r\n\r\n        client.send(jsonMsg)\r\n      }\r\n    })\r\n  }\r\n  // 广播消息 -> 推送系统消息\r\n  broadcast (msg) {\r\n    this.wss.clients.forEach(client => {\r\n      if (client.readyState === WebSocket.OPEN) {\r\n        client.send(msg)\r\n      }\r\n    })\r\n  }\r\n\r\n  onClose (ws) {\r\n\r\n  }\r\n\r\n  // 心跳检测\r\n  heartbeat () {\r\n\r\n    clearInterval(this.interval)\r\n    this.interval = setInterval(() => {\r\n      console.log('this.timeInterval: ', this.timeInterval);\r\n      this.wss.clients.forEach(ws => {\r\n\r\n        if (!ws.isAlive && ws.roomid) {\r\n          delete ws.roomid\r\n\r\n          return ws.terminate()\r\n        }\r\n        // 主动发送心跳检测请求\r\n        // 当客户端返回消息之后,主动设置flag为在线\r\n        ws.isAlive = false\r\n        ws.send(JSON.stringify({\r\n          event: 'heartbeat',\r\n          message: 'ping'\r\n        }))\r\n      });\r\n\r\n    }, this.timeInterval)\r\n  }\r\n}\r\n\r\nexport default WebSocketSever"
      ]
    },
    "sourceType": "script",
    "mtime": 1632188103564
  },
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\conmon\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\conmon\\\\Utils.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\conmon\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\conmon\\Utils.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\conmon\\Utils.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\conmon\\Utils.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\conmon\\",
        "sourceFileName": "Utils.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.menusGetMenuData = exports.base64ToImg = exports.dirExists = exports.getJWTPayload = exports.checkCode = void 0;\n\nvar _RedisConfig = require(\"../config/RedisConfig\");\n\nvar _index = _interopRequireDefault(require(\"../config/index\"));\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _fs = _interopRequireDefault(require(\"fs\"));\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _makeDir = _interopRequireDefault(require(\"make-dir\"));\n\nvar _uuid = require(\"uuid\");\n\nvar _dayjs = _interopRequireDefault(require(\"dayjs\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst getJWTPayload = token => {\n  if (!token) return;\n\n  if (/^Bearer/.test(token)) {\n    return _jsonwebtoken.default.verify(token.split(' ')[1], _index.default.JWT_SECRET);\n  } else {\n    return _jsonwebtoken.default.verify(token, _index.default.JWT_SECRET);\n  }\n};\n\nexports.getJWTPayload = getJWTPayload;\n\nconst checkCode = async (key, value) => {\n  const redisCode = await (0, _RedisConfig.getValue)(key);\n\n  if (redisCode != null) {\n    if (value.toLowerCase() === redisCode.toLowerCase()) {\n      return 1;\n    } else {\n      return 0;\n    }\n  } else {\n    return 2;\n  }\n};\n\nexports.checkCode = checkCode;\n\nconst getStats = path => {\n  return new Promise(resolve => {\n    _fs.default.stat(path, (err, stats) => {\n      if (err) {\n        resolve(false);\n      } else {\n        resolve(stats);\n      }\n    });\n  });\n};\n\nconst mkdir = dir => {\n  return new Promise(resolve => {\n    _fs.default.mkdir(dir, err => {\n      if (err) {\n        resolve(false);\n      } else {\n        resolve(true);\n      }\n    });\n  });\n}; //循环遍历递归判读如果上级目录不存在,则创建上级目录\n\n\nconst dirExists = async dir => {\n  const isExist = await getStats(dir); // 如果该路径存在且不是文件, 返回true\n\n  if (isExist && isExist.isDirectory) {\n    return true;\n  } else if (isExist) {\n    该路径存在, 但是不是文件, 返回false;\n    return false;\n  }\n\n  const tempDir = _path.default.parse(dir).dir;\n\n  const status = await dirExists(tempDir);\n\n  if (status) {\n    const result = await mkdir(dir);\n    return result;\n  } else {\n    return false;\n  }\n};\n\nexports.dirExists = dirExists;\n\nconst base64ToImg = async base => {\n  const test = base.match(/^data:image\\/\\w+;base64,/g);\n  const ext = test[0].substr(11, test[0].length - 19);\n  const base_64_url = base.replace(/^data:image\\/\\w+;base64,/, \"\");\n  const dataBuffer = await new Buffer.from(base_64_url, 'base64');\n  const dir = `${_index.default.uploadPath}/${(0, _dayjs.default)().format('YYYYMMDD')}`;\n  await (0, _makeDir.default)(dir);\n  const picname = (0, _uuid.v4)();\n  const destPath = `${dir}/${picname}.${ext}`;\n  await _fs.default.writeFile(destPath, dataBuffer, function (err) {\n    //用fs写入文件\n    if (err) {} else {}\n  });\n  return `/${(0, _dayjs.default)().format('YYYYMMDD')}/${picname}.${ext}`;\n}; // const menusGetMenuData = (treeData, menus, flg) => {\n//   let arr = []\n//   for (let i = 0; i < treeData.length; i++) {\n//     const item = treeData[i];\n//     if (item.type === 'menu') {\n//       const id = item._id + ''\n//       if (flg || menus.includes(id)) {\n//         let obj = {\n//           _id: item._id,\n//           path: item.path,\n//           name: item.name,\n//           meta: {\n//             title: item.title,\n//             hideInBread: item.hideInBread,\n//             hideInMenu: item.hideInMenu,\n//             notCache: item.notCache,\n//             icon: item.icon\n//           },\n//           component: () => import(`@/${item.component}`)\n//         }\n//         if (item.children && item.children.length > 0) {\n//           obj.children = menusGetMenuData(item.children, menus, flg)\n//         }\n//         arr.push(obj)\n//       }\n//     }\n//   }\n//   return arr\n// }\n// const menusGetMenuData = (treeData, menus, flg) => {\n//   let arr = []\n//   for (let i = 0; i < treeData.length; i++) {\n//     const item = treeData[i];\n//     if (item.type === 'menu') {\n//       const id = item._id + ''\n//       if (flg || menus.includes(id)) {\n//         let obj = {\n//           _id: item._id,\n//           path: item.path,\n//           name: item.name,\n//           title: item.title,\n//           hideInBread: item.hideInBread,\n//           hideInMenu: item.hideInMenu,\n//           notCache: item.notCache,\n//           icon: item.icon,\n//           componentStr: item.component,\n//         }\n//         if (item.children && item.children.length > 0) {\n//           obj.children = menusGetMenuData(item.children, menus, flg)\n//         }\n//         arr.push(obj)\n//       }\n//     }\n//   }\n//   return arr\n// }\n\n\nexports.base64ToImg = base64ToImg;\n\nconst menusGetMenuData = (treeData, menus, flg) => {\n  let arr = [];\n\n  for (let i = 0; i < treeData.length; i++) {\n    const item = treeData[i];\n\n    if (item.type === 'menu') {\n      if (item.children && item.children.length > 0) {\n        item.children = menusGetMenuData(item.children, menus, flg);\n      }\n\n      const id = item._id + '';\n\n      if (flg || menus.includes(id) || item.children && item.children.length > 0) {\n        arr.push(item);\n      }\n    } else if (item.type === 'link' || item.type === 'resource') {\n      arr.push(item);\n    }\n  }\n\n  return arr;\n};\n\nexports.menusGetMenuData = menusGetMenuData;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlV0aWxzLmpzIl0sIm5hbWVzIjpbImdldEpXVFBheWxvYWQiLCJ0b2tlbiIsInRlc3QiLCJqd3QiLCJ2ZXJpZnkiLCJzcGxpdCIsImNvbmZpZyIsIkpXVF9TRUNSRVQiLCJjaGVja0NvZGUiLCJrZXkiLCJ2YWx1ZSIsInJlZGlzQ29kZSIsInRvTG93ZXJDYXNlIiwiZ2V0U3RhdHMiLCJwYXRoIiwiUHJvbWlzZSIsInJlc29sdmUiLCJmcyIsInN0YXQiLCJlcnIiLCJzdGF0cyIsIm1rZGlyIiwiZGlyIiwiZGlyRXhpc3RzIiwiaXNFeGlzdCIsImlzRGlyZWN0b3J5Iiwi6K+l6Lev5b6E5a2Y5ZyoIiwi5L2G5piv5LiN5piv5paH5Lu2Iiwi6L+U5ZueZmFsc2UiLCJ0ZW1wRGlyIiwicGFyc2UiLCJzdGF0dXMiLCJyZXN1bHQiLCJiYXNlNjRUb0ltZyIsImJhc2UiLCJtYXRjaCIsImV4dCIsInN1YnN0ciIsImxlbmd0aCIsImJhc2VfNjRfdXJsIiwicmVwbGFjZSIsImRhdGFCdWZmZXIiLCJCdWZmZXIiLCJmcm9tIiwidXBsb2FkUGF0aCIsImZvcm1hdCIsInBpY25hbWUiLCJkZXN0UGF0aCIsIndyaXRlRmlsZSIsIm1lbnVzR2V0TWVudURhdGEiLCJ0cmVlRGF0YSIsIm1lbnVzIiwiZmxnIiwiYXJyIiwiaSIsIml0ZW0iLCJ0eXBlIiwiY2hpbGRyZW4iLCJpZCIsIl9pZCIsImluY2x1ZGVzIiwicHVzaCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUVBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsYUFBYSxHQUFHQyxLQUFLLElBQUk7QUFFN0IsTUFBSSxDQUFDQSxLQUFMLEVBQVk7O0FBQ1osTUFBSSxVQUFVQyxJQUFWLENBQWVELEtBQWYsQ0FBSixFQUEyQjtBQUN6QixXQUFPRSxzQkFBSUMsTUFBSixDQUFXSCxLQUFLLENBQUNJLEtBQU4sQ0FBWSxHQUFaLEVBQWlCLENBQWpCLENBQVgsRUFBZ0NDLGVB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SUFBSSxHQUFHTCxRQUFRLENBQUNJLENBQUQsQ0FBckI7O0FBQ0EsUUFBSUMsSUFBSSxDQUFDQyxJQUFMLEtBQWMsTUFBbEIsRUFBMEI7QUFDeEIsVUFBSUQsSUFBSSxDQUFDRSxRQUFMLElBQWlCRixJQUFJLENBQUNFLFFBQUwsQ0FBY25CLE1BQWQsR0FBdUIsQ0FBNUMsRUFBK0M7QUFDN0NpQixRQUFBQSxJQUFJLENBQUNFLFFBQUwsR0FBZ0JSLGdCQUFnQixDQUFDTSxJQUFJLENBQUNFLFFBQU4sRUFBZ0JOLEtBQWhCLEVBQXVCQyxHQUF2QixDQUFoQztBQUNEOztBQUNELFlBQU1NLEVBQUUsR0FBR0gsSUFBSSxDQUFDSSxHQUFMLEdBQVcsRUFBdEI7O0FBQ0EsVUFBSVAsR0FBRyxJQUFJRCxLQUFLLENBQUNTLFFBQU4sQ0FBZUYsRUFBZixDQUFQLElBQThCSCxJQUFJLENBQUNFLFFBQUwsSUFBaUJGLElBQUksQ0FBQ0UsUUFBTCxDQUFjbkIsTUFBZCxHQUF1QixDQUExRSxFQUE4RTtBQUM1RWUsUUFBQUEsR0FBRyxDQUFDUSxJQUFKLENBQVNOLElBQVQ7QUFDRDtBQUNGLEtBUkQsTUFRTyxJQUFJQSxJQUFJLENBQUNDLElBQUwsS0FBYyxNQUFkLElBQXdCRCxJQUFJLENBQUNDLElBQUwsS0FBYyxVQUExQyxFQUFzRDtBQUMzREgsTUFBQUEsR0FBRyxDQUFDUSxJQUFKLENBQVNOLElBQVQ7QUFDRDtBQUVGOztBQUNELFNBQU9GLEdBQVA7QUFDRCxDQWxCRCIsInNvdXJjZVJvb3QiOiJEOlxcSFRNTCtjc3MranNcXG5vZGVfa29hXFxzcmNcXGNvbm1vblxcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0VmFsdWUgfSBmcm9tICcuLi9jb25maWcvUmVkaXNDb25maWcnO1xyXG5pbXBvcnQgY29uZmlnIGZyb20gJy4uL2NvbmZpZy9pbmRleCc7XHJcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcclxuaW1wb3J0IGZzIGZyb20gJ2ZzJztcclxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XHJcblxyXG5pbXBvcnQgbWFrZWRpciBmcm9tICdtYWtlLWRpcic7XHJcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ2RheWpzJztcclxuXHJcbmNvbnN0IGdldEpXVFBheWxvYWQgPSB0b2tlbiA9PiB7XHJcblxyXG4gIGlmICghdG9rZW4pIHJldHVyblxyXG4gIGlmICgvXkJlYXJlci8udGVzdCh0b2tlbikpIHtcclxuICAgIHJldHVybiBqd3QudmVyaWZ5KHRva2VuLnNwbGl0KCcgJylbMV0sIGNvbmZpZy5KV1RfU0VDUkVUKVxyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gand0LnZlcmlmeSh0b2tlbiwgY29uZmlnLkpXVF9TRUNSRVQpXHJcbiAgfVxyXG5cclxuXHJcbn1cclxuXHJcbmNvbnN0IGNoZWNrQ29kZSA9IGFzeW5jIChrZXksIHZhbHVlKSA9PiB7XHJcbiAgY29uc3QgcmVkaXNDb2RlID0gYXdhaXQgZ2V0VmFsdWUoa2V5KVxyXG5cclxuICBpZiAocmVkaXNDb2RlICE9IG51bGwpIHtcclxuICAgIGlmICh2YWx1ZS50b0xvd2VyQ2FzZSgpID09PSByZWRpc0NvZGUudG9Mb3dlckNhc2UoKSkge1xyXG5cclxuICAgICAgcmV0dXJuIDFcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiAwXHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiAyXHJcbiAgfVxyXG59XHJcblxyXG5cclxuXHJcbmNvbnN0IGdldFN0YXRzID0gKHBhdGgpID0+IHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgIGZzLnN0YXQocGF0aCwgKGVyciwgc3RhdHMpID0+IHtcclxuICAgICAgaWYgKGVycikge1xyXG4gICAgICAgIHJlc29sdmUoZmFsc2UpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVzb2x2ZShzdGF0cylcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9KVxyXG59XHJcbmNvbnN0IG1rZGlyID0gKGRpcikgPT4ge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgZnMubWtkaXIoZGlyLCBlcnIgPT4ge1xyXG4gICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgcmVzb2x2ZShmYWxzZSlcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXNvbHZlKHRydWUpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfSlcclxufVxyXG4vL+W+queOr+mBjeWOhumAkuW9kuWIpOivu+WmguaenOS4iue6p+ebruW9leS4jeWtmOWcqCzliJnliJvlu7rkuIrnuqfnm67lvZVcclxuY29uc3QgZGlyRXhpc3RzID0gYXN5bmMgKGRpcikgPT4ge1xyXG4gIGNvbnN0IGlzRXhpc3QgPSBhd2FpdCBnZXRTdGF0cyhkaXIpXHJcbiAgLy8g5aaC5p6c6K+l6Lev5b6E5a2Y5Zyo5LiU5LiN5piv5paH5Lu2LCDov5Tlm550cnVlXHJcblxyXG4gIGlmIChpc0V4aXN0ICYmIGlzRXhpc3QuaXNEaXJlY3RvcnkpIHtcclxuICAgIHJldHVybiB0cnVlXHJcbiAgfSBlbHNlIGlmIChpc0V4aXN0KSB7XHJcbiAgICDor6Xot6/lvoTlrZjlnKgsIOS9huaYr+S4jeaYr+aWh+S7tiwg6L+U5ZueZmFsc2VcclxuXHJcbiAgICByZXR1cm4gZmFsc2VcclxuICB9XHJcblxyXG4gIGNvbnN0IHRlbXBEaXIgPSBwYXRoLnBhcnNlKGRpcikuZGlyXHJcblxyXG4gIGNvbnN0IHN0YXR1cyA9IGF3YWl0IGRpckV4aXN0cyh0ZW1wRGlyKVxyXG4gIGlmIChzdGF0dXMpIHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1rZGlyKGRpcilcclxuXHJcbiAgICByZXR1cm4gcmVzdWx0XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH1cclxufVxyXG5cclxuXHJcbmNvbnN0IGJhc2U2NFRvSW1nID0gYXN5bmMgKGJhc2UpID0+IHtcclxuICBjb25zdCB0ZXN0ID0gYmFzZS5tYXRjaCgvXmRhdGE6aW1hZ2VcXC9cXHcrO2Jhc2U2NCwvZylcclxuXHJcbiAgY29uc3QgZXh0ID0gdGVzdFswXS5zdWJzdHIoMTEsIHRlc3RbMF0ubGVuZ3RoIC0gMTkpXHJcbiAgY29uc3QgYmFzZV82NF91cmwgPSBiYXNlLnJlcGxhY2UoL15kYXRhOmltYWdlXFwvXFx3KztiYXNlNjQsLywgXCJcIilcclxuICBjb25zdCBkYXRhQnVmZmVyID0gYXdhaXQgbmV3IEJ1ZmZlci5mcm9tKGJhc2VfNjRfdXJsLCAnYmFzZTY0JylcclxuICBjb25zdCBkaXIgPSBgJHtjb25maWcudXBsb2FkUGF0aH0vJHttb21lbnQoKS5mb3JtYXQoJ1lZWVlNTUREJyl9YFxyXG4gIGF3YWl0IG1ha2VkaXIoZGlyKVxyXG4gIGNvbnN0IHBpY25hbWUgPSB1dWlkdjQoKVxyXG4gIGNvbnN0IGRlc3RQYXRoID0gYCR7ZGlyfS8ke3BpY25hbWV9LiR7ZXh0fWBcclxuXHJcbiAgYXdhaXQgZnMud3JpdGVGaWxlKGRlc3RQYXRoLCBkYXRhQnVmZmVyLCBmdW5jdGlvbiAoZXJyKSB7Ly/nlKhmc+WGmeWFpeaWh+S7tlxyXG4gICAgaWYgKGVycikge1xyXG5cclxuICAgIH0gZWxzZSB7XHJcblxyXG4gICAgfVxyXG4gIH0pXHJcbiAgcmV0dXJuIGAvJHttb21lbnQoKS5mb3JtYXQoJ1lZWVlNTUREJyl9LyR7cGljbmFtZX0uJHtleHR9YFxyXG59XHJcblxyXG4vLyBjb25zdCBtZW51c0dldE1lbnVEYXRhID0gKHRyZWVEYXRhLCBtZW51cywgZmxnKSA9PiB7XHJcbi8vICAgbGV0IGFyciA9IFtdXHJcbi8vICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmVlRGF0YS5sZW5ndGg7IGkrKykge1xyXG4vLyAgICAgY29uc3QgaXRlbSA9IHRyZWVEYXRhW2ldO1xyXG4vLyAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ21lbnUnKSB7XHJcbi8vICAgICAgIGNvbnN0IGlkID0gaXRlbS5faWQgKyAnJ1xyXG4vLyAgICAgICBpZiAoZmxnIHx8IG1lbnVzLmluY2x1ZGVzKGlkKSkge1xyXG4vLyAgICAgICAgIGxldCBvYmogPSB7XHJcbi8vICAgICAgICAgICBfaWQ6IGl0ZW0uX2lkLFxyXG4vLyAgICAgICAgICAgcGF0aDogaXRlbS5wYXRoLFxyXG4vLyAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxyXG4vLyAgICAgICAgICAgbWV0YToge1xyXG4vLyAgICAgICAgICAgICB0aXRsZTogaXRlbS50aXRsZSxcclxuLy8gICAgICAgICAgICAgaGlkZUluQnJlYWQ6IGl0ZW0uaGlkZUluQnJlYWQsXHJcbi8vICAgICAgICAgICAgIGhpZGVJbk1lbnU6IGl0ZW0uaGlkZUluTWVudSxcclxuLy8gICAgICAgICAgICAgbm90Q2FjaGU6IGl0ZW0ubm90Q2FjaGUsXHJcbi8vICAgICAgICAgICAgIGljb246IGl0ZW0uaWNvblxyXG4vLyAgICAgICAgICAgfSxcclxuLy8gICAgICAgICAgIGNvbXBvbmVudDogKCkgPT4gaW1wb3J0KGBALyR7aXRlbS5jb21wb25lbnR9YClcclxuLy8gICAgICAgICB9XHJcbi8vICAgICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4gJiYgaXRlbS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XHJcbi8vICAgICAgICAgICBvYmouY2hpbGRyZW4gPSBtZW51c0dldE1lbnVEYXRhKGl0ZW0uY2hpbGRyZW4sIG1lbnVzLCBmbGcpXHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgICAgIGFyci5wdXNoKG9iailcclxuLy8gICAgICAgfVxyXG4vLyAgICAgfVxyXG5cclxuLy8gICB9XHJcbi8vICAgcmV0dXJuIGFyclxyXG4vLyB9XHJcblxyXG4vLyBjb25zdCBtZW51c0dldE1lbnVEYXRhID0gKHRyZWVEYXRhLCBtZW51cywgZmxnKSA9PiB7XHJcbi8vICAgbGV0IGFyciA9IFtdXHJcbi8vICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmVlRGF0YS5sZW5ndGg7IGkrKykge1xyXG4vLyAgICAgY29uc3QgaXRlbSA9IHRyZWVEYXRhW2ldO1xyXG4vLyAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ21lbnUnKSB7XHJcbi8vICAgICAgIGNvbnN0IGlkID0gaXRlbS5faWQgKyAnJ1xyXG4vLyAgICAgICBpZiAoZmxnIHx8IG1lbnVzLmluY2x1ZGVzKGlkKSkge1xyXG4vLyAgICAgICAgIGxldCBvYmogPSB7XHJcbi8vICAgICAgICAgICBfaWQ6IGl0ZW0uX2lkLFxyXG4vLyAgICAgICAgICAgcGF0aDogaXRlbS5wYXRoLFxyXG4vLyAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxyXG5cclxuLy8gICAgICAgICAgIHRpdGxlOiBpdGVtLnRpdGxlLFxyXG4vLyAgICAgICAgICAgaGlkZUluQnJlYWQ6IGl0ZW0uaGlkZUluQnJlYWQsXHJcbi8vICAgICAgICAgICBoaWRlSW5NZW51OiBpdGVtLmhpZGVJbk1lbnUsXHJcbi8vICAgICAgICAgICBub3RDYWNoZTogaXRlbS5ub3RDYWNoZSxcclxuLy8gICAgICAgICAgIGljb246IGl0ZW0uaWNvbixcclxuXHJcbi8vICAgICAgICAgICBjb21wb25lbnRTdHI6IGl0ZW0uY29tcG9uZW50LFxyXG5cclxuLy8gICAgICAgICB9XHJcbi8vICAgICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4gJiYgaXRlbS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XHJcbi8vICAgICAgICAgICBvYmouY2hpbGRyZW4gPSBtZW51c0dldE1lbnVEYXRhKGl0ZW0uY2hpbGRyZW4sIG1lbnVzLCBmbGcpXHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgICAgIGFyci5wdXNoKG9iailcclxuLy8gICAgICAgfVxyXG4vLyAgICAgfVxyXG5cclxuLy8gICB9XHJcbi8vICAgcmV0dXJuIGFyclxyXG4vLyB9XHJcblxyXG5jb25zdCBtZW51c0dldE1lbnVEYXRhID0gKHRyZWVEYXRhLCBtZW51cywgZmxnKSA9PiB7XHJcbiAgbGV0IGFyciA9IFtdXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmVlRGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgY29uc3QgaXRlbSA9IHRyZWVEYXRhW2ldO1xyXG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ21lbnUnKSB7XHJcbiAgICAgIGlmIChpdGVtLmNoaWxkcmVuICYmIGl0ZW0uY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGl0ZW0uY2hpbGRyZW4gPSBtZW51c0dldE1lbnVEYXRhKGl0ZW0uY2hpbGRyZW4sIG1lbnVzLCBmbGcpXHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgaWQgPSBpdGVtLl9pZCArICcnXHJcbiAgICAgIGlmIChmbGcgfHwgbWVudXMuaW5jbHVkZXMoaWQpIHx8IChpdGVtLmNoaWxkcmVuICYmIGl0ZW0uY2hpbGRyZW4ubGVuZ3RoID4gMCkpIHtcclxuICAgICAgICBhcnIucHVzaChpdGVtKVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ2xpbmsnIHx8IGl0ZW0udHlwZSA9PT0gJ3Jlc291cmNlJykge1xyXG4gICAgICBhcnIucHVzaChpdGVtKVxyXG4gICAgfVxyXG5cclxuICB9XHJcbiAgcmV0dXJuIGFyclxyXG59XHJcbmV4cG9ydCB7XHJcbiAgY2hlY2tDb2RlLFxyXG4gIGdldEpXVFBheWxvYWQsXHJcbiAgZGlyRXhpc3RzLFxyXG4gIGJhc2U2NFRvSW1nLFxyXG4gIG1lbnVzR2V0TWVudURhdGFcclxufSJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "Utils.js"
      ],
      "names": [
        "getJWTPayload",
        "token",
        "test",
        "jwt",
        "verify",
        "split",
        "config",
        "JWT_SECRET",
        "checkCode",
        "key",
        "value",
        "redisCode",
        "toLowerCase",
        "getStats",
        "path",
        "Promise",
        "resolve",
        "fs",
        "stat",
        "err",
        "stats",
        "mkdir",
        "dir",
        "dirExists",
        "isExist",
        "isDirectory",
        "该路径存在",
        "但是不是文件",
        "返回false",
        "tempDir",
        "parse",
        "status",
        "result",
        "base64ToImg",
        "base",
        "match",
        "ext",
        "substr",
        "length",
        "base_64_url",
        "replace",
        "dataBuffer",
        "Buffer",
        "from",
        "uploadPath",
        "format",
        "picname",
        "destPath",
        "writeFile",
        "menusGetMenuData",
        "treeData",
        "menus",
        "flg",
        "arr",
        "i",
        "item",
        "type",
        "children",
        "id",
        "_id",
        "includes",
        "push"
      ],
      "mappings": "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",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\conmon\\",
      "sourcesContent": [
        "import { getValue } from '../config/RedisConfig';\r\nimport config from '../config/index';\r\nimport jwt from 'jsonwebtoken';\r\nimport fs from 'fs';\r\nimport path from 'path';\r\n\r\nimport makedir from 'make-dir';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport moment from 'dayjs';\r\n\r\nconst getJWTPayload = token => {\r\n\r\n  if (!token) return\r\n  if (/^Bearer/.test(token)) {\r\n    return jwt.verify(token.split(' ')[1], config.JWT_SECRET)\r\n  } else {\r\n    return jwt.verify(token, config.JWT_SECRET)\r\n  }\r\n\r\n\r\n}\r\n\r\nconst checkCode = async (key, value) => {\r\n  const redisCode = await getValue(key)\r\n\r\n  if (redisCode != null) {\r\n    if (value.toLowerCase() === redisCode.toLowerCase()) {\r\n\r\n      return 1\r\n    } else {\r\n      return 0\r\n    }\r\n  } else {\r\n    return 2\r\n  }\r\n}\r\n\r\n\r\n\r\nconst getStats = (path) => {\r\n  return new Promise((resolve) => {\r\n    fs.stat(path, (err, stats) => {\r\n      if (err) {\r\n        resolve(false)\r\n      } else {\r\n        resolve(stats)\r\n      }\r\n    })\r\n  })\r\n}\r\nconst mkdir = (dir) => {\r\n  return new Promise((resolve) => {\r\n    fs.mkdir(dir, err => {\r\n      if (err) {\r\n        resolve(false)\r\n      } else {\r\n        resolve(true)\r\n      }\r\n    })\r\n  })\r\n}\r\n//循环遍历递归判读如果上级目录不存在,则创建上级目录\r\nconst dirExists = async (dir) => {\r\n  const isExist = await getStats(dir)\r\n  // 如果该路径存在且不是文件, 返回true\r\n\r\n  if (isExist && isExist.isDirectory) {\r\n    return true\r\n  } else if (isExist) {\r\n    该路径存在, 但是不是文件, 返回false\r\n\r\n    return false\r\n  }\r\n\r\n  const tempDir = path.parse(dir).dir\r\n\r\n  const status = await dirExists(tempDir)\r\n  if (status) {\r\n    const result = await mkdir(dir)\r\n\r\n    return result\r\n  } else {\r\n    return false\r\n  }\r\n}\r\n\r\n\r\nconst base64ToImg = async (base) => {\r\n  const test = base.match(/^data:image\\/\\w+;base64,/g)\r\n\r\n  const ext = test[0].substr(11, test[0].length - 19)\r\n  const base_64_url = base.replace(/^data:image\\/\\w+;base64,/, \"\")\r\n  const dataBuffer = await new Buffer.from(base_64_url, 'base64')\r\n  const dir = `${config.uploadPath}/${moment().format('YYYYMMDD')}`\r\n  await makedir(dir)\r\n  const picname = uuidv4()\r\n  const destPath = `${dir}/${picname}.${ext}`\r\n\r\n  await fs.writeFile(destPath, dataBuffer, function (err) {//用fs写入文件\r\n    if (err) {\r\n\r\n    } else {\r\n\r\n    }\r\n  })\r\n  return `/${moment().format('YYYYMMDD')}/${picname}.${ext}`\r\n}\r\n\r\n// const menusGetMenuData = (treeData, menus, flg) => {\r\n//   let arr = []\r\n//   for (let i = 0; i < treeData.length; i++) {\r\n//     const item = treeData[i];\r\n//     if (item.type === 'menu') {\r\n//       const id = item._id + ''\r\n//       if (flg || menus.includes(id)) {\r\n//         let obj = {\r\n//           _id: item._id,\r\n//           path: item.path,\r\n//           name: item.name,\r\n//           meta: {\r\n//             title: item.title,\r\n//             hideInBread: item.hideInBread,\r\n//             hideInMenu: item.hideInMenu,\r\n//             notCache: item.notCache,\r\n//             icon: item.icon\r\n//           },\r\n//           component: () => import(`@/${item.component}`)\r\n//         }\r\n//         if (item.children && item.children.length > 0) {\r\n//           obj.children = menusGetMenuData(item.children, menus, flg)\r\n//         }\r\n//         arr.push(obj)\r\n//       }\r\n//     }\r\n\r\n//   }\r\n//   return arr\r\n// }\r\n\r\n// const menusGetMenuData = (treeData, menus, flg) => {\r\n//   let arr = []\r\n//   for (let i = 0; i < treeData.length; i++) {\r\n//     const item = treeData[i];\r\n//     if (item.type === 'menu') {\r\n//       const id = item._id + ''\r\n//       if (flg || menus.includes(id)) {\r\n//         let obj = {\r\n//           _id: item._id,\r\n//           path: item.path,\r\n//           name: item.name,\r\n\r\n//           title: item.title,\r\n//           hideInBread: item.hideInBread,\r\n//           hideInMenu: item.hideInMenu,\r\n//           notCache: item.notCache,\r\n//           icon: item.icon,\r\n\r\n//           componentStr: item.component,\r\n\r\n//         }\r\n//         if (item.children && item.children.length > 0) {\r\n//           obj.children = menusGetMenuData(item.children, menus, flg)\r\n//         }\r\n//         arr.push(obj)\r\n//       }\r\n//     }\r\n\r\n//   }\r\n//   return arr\r\n// }\r\n\r\nconst menusGetMenuData = (treeData, menus, flg) => {\r\n  let arr = []\r\n  for (let i = 0; i < treeData.length; i++) {\r\n    const item = treeData[i];\r\n    if (item.type === 'menu') {\r\n      if (item.children && item.children.length > 0) {\r\n        item.children = menusGetMenuData(item.children, menus, flg)\r\n      }\r\n      const id = item._id + ''\r\n      if (flg || menus.includes(id) || (item.children && item.children.length > 0)) {\r\n        arr.push(item)\r\n      }\r\n    } else if (item.type === 'link' || item.type === 'resource') {\r\n      arr.push(item)\r\n    }\r\n\r\n  }\r\n  return arr\r\n}\r\nexport {\r\n  checkCode,\r\n  getJWTPayload,\r\n  dirExists,\r\n  base64ToImg,\r\n  menusGetMenuData\r\n}"
      ]
    },
    "sourceType": "script",
    "mtime": 1637151682639
  },
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\config\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\config\\\\RedisConfig.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\config\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\config\\RedisConfig.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\config\\RedisConfig.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\config\\RedisConfig.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\config\\",
        "sourceFileName": "RedisConfig.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getHvalue = exports.getValue = exports.setValue = exports.client = void 0;\n\nvar _redis = _interopRequireDefault(require(\"redis\"));\n\nvar _webpack = require(\"webpack\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst options = {\n  host: '119.91.192.232',\n  port: 15001,\n  password: '123456',\n  detect_buffers: true,\n  retry_strategy: function (options) {\n    if (options.error && options.error.code === \"ECONNREFUSED\") {\n      // End reconnecting on a specific error and flush all commands with\n      // a individual error\n      return new Error(\"The server refused the connection\");\n    }\n\n    if (options.total_retry_time > 1000 * 60 * 60) {\n      // End reconnecting after a specific timeout and flush all commands\n      // with a individual error\n      return new Error(\"Retry time exhausted\");\n    }\n\n    if (options.attempt > 10) {\n      // End reconnecting with built in error\n      return undefined;\n    } // reconnect after\n\n\n    return Math.min(options.attempt * 100, 3000);\n  }\n};\n\nconst client = _redis.default.createClient(options);\n\nexports.client = client;\n\nconst setValue = (key, value, time) => {\n  if (typeof value === 'undefined' || value == null || value === '') {\n    return;\n  }\n\n  if (typeof value === 'string') {\n    if (typeof time !== 'undefined') {\n      //EX是设置缓存失效时间\n      client.set(key, value, 'EX', time);\n    } else {\n      client.set(key, value);\n    }\n  } else if (typeof value === 'object') {\n    Object.keys(value).forEach(item => {\n      client.hset(key, item, value[item], _redis.default.print);\n    });\n  }\n};\n\nexports.setValue = setValue;\n\nconst {\n  promisify\n} = require('util');\n\nconst getAsync = promisify(client.get).bind(client);\n\nconst getValue = key => {\n  return getAsync(key);\n};\n\nexports.getValue = getValue;\n\nconst getHvalue = key => {\n  return promisify(client.hgetall).bind(client)(key);\n};\n\nexports.getHvalue = getHvalue;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlJlZGlzQ29uZmlnLmpzIl0sIm5hbWVzIjpbIm9wdGlvbnMiLCJob3N0IiwicG9ydCIsInBhc3N3b3JkIiwiZGV0ZWN0X2J1ZmZlcnMiLCJyZXRyeV9zdHJhdGVneSIsImVycm9yIiwiY29kZSIsIkVycm9yIiwidG90YWxfcmV0cnlfdGltZSIsImF0dGVtcHQiLCJ1bmRlZmluZWQiLCJNYXRoIiwibWluIiwiY2xpZW50IiwicmVkaXMiLCJjcmVhdGVDbGllbnQiLCJzZXRWYWx1ZSIsImtleSIsInZhbHVlIiwidGltZSIsInNldCIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwiaXRlbSIsImhzZXQiLCJwcmludCIsInByb21pc2lmeSIsInJlcXVpcmUiLCJnZXRBc3luYyIsImdldCIsImJpbmQiLCJnZXRWYWx1ZSIsImdldEh2YWx1ZSIsImhnZXRhbGwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUVBLE1BQU1BLE9BQU8sR0FBRztBQUNkQyxFQUFBQSxJQUFJLEVBQUUsZ0JBRFE7QUFFZEMsRUFBQUEsSUFBSSxFQUFFLEtBRlE7QUFHZEMsRUFBQUEsUUFBUSxFQUFFLFFBSEk7QUFJZEMsRUFBQUEsY0FBYyxFQUFFLElBSkY7QUFLZEMsRUFBQUEsY0FBYyxFQUFFLFVBQVVMLE9BQVYsRUFBbUI7QUFDakMsUUFBSUEsT0FBTyxDQUFDTSxLQUFSLElBQWlCTixPQUFPLENBQUNNLEtBQVIsQ0FBY0MsSUFBZCxLQUF1QixjQUE1QyxFQUE0RDtBQUMxRDtBQUNBO0FBQ0EsYUFBTyxJQUFJQyxLQUFKLENBQVUsbUNBQVYsQ0FBUDtBQUNEOztBQUNELFFBQUlSLE9BQU8sQ0FBQ1MsZ0JBQVIsR0FBMkIsT0FBTyxFQUFQLEdBQVksRUFBM0MsRUFBK0M7QUFDN0M7QUFDQTtBQUNBLGFBQU8sSUFBSUQsS0FBSixDQUFVLHNCQUFWLENBQVA7QUFDRDs7QUFDRCxRQUFJUixPQUFPLENBQUNVLE9BQVIsR0FBa0IsRUFBdEIsRUFBMEI7QUFDeEI7QUFDQSxhQUFPQyxTQUFQO0FBQ0QsS0FkZ0MsQ0FlakM7OztBQUNBLFdBQU9DLElBQUksQ0FBQ0MsR0FBTCxDQUFTYixPQUFPLENBQUNVLE9BQVIsR0FBa0IsR0FBM0IsRUFBZ0MsSUFBaEMsQ0FBUDtBQUNEO0FBdEJhLENBQWhCOztBQXlCQSxNQUFNSSxNQUFNLEdBQUdDLGVBQU1DLFlBQU4sQ0FBbUJoQixPQUFuQixDQUFmOzs7O0FBRUEsTUFBTWlCLFFBQVEsR0FBRyxDQUFDQyxHQUFELEVBQU1DLEtBQU4sRUFBYUMsSUFBYixLQUFzQjtBQUNyQyxNQUFJLE9BQU9ELEtBQVAsS0FBaUIsV0FBakIsSUFBZ0NBLEtBQUssSUFBSSxJQUF6QyxJQUFpREEsS0FBSyxLQUFLLEVBQS9ELEVBQW1FO0FBQ2pFO0FBQ0Q7O0FBQ0QsTUFBSSxPQUFPQSxLQUFQLEtBQWlCLFFBQXJCLEVBQStCO0FBQzdCLFFBQUksT0FBT0MsSUFBUCxLQUFnQixXQUFwQixFQUFpQztBQUMvQjtBQUNBTixNQUFBQSxNQUFNLENBQUNPLEdBQVAsQ0FBV0gsR0FBWCxFQUFnQkMsS0FBaEIsRUFBdUIsSUFBdkIsRUFBNkJDLElBQTdCO0FBQ0QsS0FIRCxNQUdPO0FBQ0xOLE1BQUFBLE1BQU0sQ0FBQ08sR0FBUCxDQUFXSCxHQUFYLEVBQWdCQyxLQUFoQjtBQUNEO0FBQ0YsR0FQRCxNQU9PLElBQUksT0FBT0EsS0FBUCxLQUFpQixRQUFyQixFQUErQjtBQUNwQ0csSUFBQUEsTUFBTSxDQUFDQyxJQUFQLENBQVlKLEtBQVosRUFBbUJLLE9BQW5CLENBQTJCQyxJQUFJLElBQUk7QUFDakNYLE1BQUFBLE1BQU0sQ0FBQ1ksSUFBUCxDQUFZUixHQUFaLEVBQWlCTyxJQUFqQixFQUF1Qk4sS0FBSyxDQUFDTSxJQUFELENBQTVCLEVBQW9DVixlQUFNWSxLQUExQztBQUNELEtBRkQ7QUFHRDtBQUNGLENBaEJEOzs7O0FBa0JBLE1BQU07QUFBRUMsRUFBQUE7QUFBRixJQUFnQkMsT0FBTyxDQUFDLE1BQUQsQ0FBN0I7O0FBQ0EsTUFBTUMsUUFBUSxHQUFHRixTQUFTLENBQUNkLE1BQU0sQ0FBQ2lCLEdBQVIsQ0FBVCxDQUFzQkMsSUFBdEIsQ0FBMkJsQixNQUEzQixDQUFqQjs7QUFFQSxNQUFNbUIsUUFBUSxHQUFJZixHQUFELElBQVM7QUFDeEIsU0FBT1ksUUFBUSxDQUFDWixHQUFELENBQWY7QUFDRCxDQUZEOzs7O0FBSUEsTUFBTWdCLFNBQVMsR0FBR2hCLEdBQUcsSUFBSTtBQUN2QixTQUFPVSxTQUFTLENBQUNkLE1BQU0sQ0FBQ3FCLE9BQVIsQ0FBVCxDQUEwQkgsSUFBMUIsQ0FBK0JsQixNQUEvQixFQUF1Q0ksR0FBdkMsQ0FBUDtBQUNELENBRkQiLCJzb3VyY2VSb290IjoiRDpcXEhUTUwrY3NzK2pzXFxub2RlX2tvYVxcc3JjXFxjb25maWdcXCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCByZWRpcyBmcm9tICdyZWRpcyc7XHJcbmltcG9ydCB7IGNsaSB9IGZyb20gJ3dlYnBhY2snO1xyXG5cclxuY29uc3Qgb3B0aW9ucyA9IHtcclxuICBob3N0OiAnMTE5LjkxLjE5Mi4yMzInLFxyXG4gIHBvcnQ6IDE1MDAxLFxyXG4gIHBhc3N3b3JkOiAnMTIzNDU2JyxcclxuICBkZXRlY3RfYnVmZmVyczogdHJ1ZSxcclxuICByZXRyeV9zdHJhdGVneTogZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zLmVycm9yICYmIG9wdGlvbnMuZXJyb3IuY29kZSA9PT0gXCJFQ09OTlJFRlVTRURcIikge1xyXG4gICAgICAvLyBFbmQgcmVjb25uZWN0aW5nIG9uIGEgc3BlY2lmaWMgZXJyb3IgYW5kIGZsdXNoIGFsbCBjb21tYW5kcyB3aXRoXHJcbiAgICAgIC8vIGEgaW5kaXZpZHVhbCBlcnJvclxyXG4gICAgICByZXR1cm4gbmV3IEVycm9yKFwiVGhlIHNlcnZlciByZWZ1c2VkIHRoZSBjb25uZWN0aW9uXCIpO1xyXG4gICAgfVxyXG4gICAgaWYgKG9wdGlvbnMudG90YWxfcmV0cnlfdGltZSA+IDEwMDAgKiA2MCAqIDYwKSB7XHJcbiAgICAgIC8vIEVuZCByZWNvbm5lY3RpbmcgYWZ0ZXIgYSBzcGVjaWZpYyB0aW1lb3V0IGFuZCBmbHVzaCBhbGwgY29tbWFuZHNcclxuICAgICAgLy8gd2l0aCBhIGluZGl2aWR1YWwgZXJyb3JcclxuICAgICAgcmV0dXJuIG5ldyBFcnJvcihcIlJldHJ5IHRpbWUgZXhoYXVzdGVkXCIpO1xyXG4gICAgfVxyXG4gICAgaWYgKG9wdGlvbnMuYXR0ZW1wdCA+IDEwKSB7XHJcbiAgICAgIC8vIEVuZCByZWNvbm5lY3Rpbmcgd2l0aCBidWlsdCBpbiBlcnJvclxyXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgLy8gcmVjb25uZWN0IGFmdGVyXHJcbiAgICByZXR1cm4gTWF0aC5taW4ob3B0aW9ucy5hdHRlbXB0ICogMTAwLCAzMDAwKTtcclxuICB9LFxyXG59XHJcblxyXG5jb25zdCBjbGllbnQgPSByZWRpcy5jcmVhdGVDbGllbnQob3B0aW9ucylcclxuXHJcbmNvbnN0IHNldFZhbHVlID0gKGtleSwgdmFsdWUsIHRpbWUpID0+IHtcclxuICBpZiAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyB8fCB2YWx1ZSA9PSBudWxsIHx8IHZhbHVlID09PSAnJykge1xyXG4gICAgcmV0dXJuXHJcbiAgfVxyXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICBpZiAodHlwZW9mIHRpbWUgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIC8vRVjmmK/orr7nva7nvJPlrZjlpLHmlYjml7bpl7RcclxuICAgICAgY2xpZW50LnNldChrZXksIHZhbHVlLCAnRVgnLCB0aW1lKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY2xpZW50LnNldChrZXksIHZhbHVlKVxyXG4gICAgfVxyXG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xyXG4gICAgT2JqZWN0LmtleXModmFsdWUpLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgIGNsaWVudC5oc2V0KGtleSwgaXRlbSwgdmFsdWVbaXRlbV0sIHJlZGlzLnByaW50KVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCB7IHByb21pc2lmeSB9ID0gcmVxdWlyZSgndXRpbCcpXHJcbmNvbnN0IGdldEFzeW5jID0gcHJvbWlzaWZ5KGNsaWVudC5nZXQpLmJpbmQoY2xpZW50KVxyXG5cclxuY29uc3QgZ2V0VmFsdWUgPSAoa2V5KSA9PiB7XHJcbiAgcmV0dXJuIGdldEFzeW5jKGtleSlcclxufVxyXG5cclxuY29uc3QgZ2V0SHZhbHVlID0ga2V5ID0+IHtcclxuICByZXR1cm4gcHJvbWlzaWZ5KGNsaWVudC5oZ2V0YWxsKS5iaW5kKGNsaWVudCkoa2V5KVxyXG59XHJcbmV4cG9ydCB7XHJcbiAgY2xpZW50LFxyXG4gIHNldFZhbHVlLFxyXG4gIGdldFZhbHVlLFxyXG4gIGdldEh2YWx1ZVxyXG59Il19",
    "map": {
      "version": 3,
      "sources": [
        "RedisConfig.js"
      ],
      "names": [
        "options",
        "host",
        "port",
        "password",
        "detect_buffers",
        "retry_strategy",
        "error",
        "code",
        "Error",
        "total_retry_time",
        "attempt",
        "undefined",
        "Math",
        "min",
        "client",
        "redis",
        "createClient",
        "setValue",
        "key",
        "value",
        "time",
        "set",
        "Object",
        "keys",
        "forEach",
        "item",
        "hset",
        "print",
        "promisify",
        "require",
        "getAsync",
        "get",
        "bind",
        "getValue",
        "getHvalue",
        "hgetall"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,OAAO,GAAG;AACdC,EAAAA,IAAI,EAAE,gBADQ;AAEdC,EAAAA,IAAI,EAAE,KAFQ;AAGdC,EAAAA,QAAQ,EAAE,QAHI;AAIdC,EAAAA,cAAc,EAAE,IAJF;AAKdC,EAAAA,cAAc,EAAE,UAAUL,OAAV,EAAmB;AACjC,QAAIA,OAAO,CAACM,KAAR,IAAiBN,OAAO,CAACM,KAAR,CAAcC,IAAd,KAAuB,cAA5C,EAA4D;AAC1D;AACA;AACA,aAAO,IAAIC,KAAJ,CAAU,mCAAV,CAAP;AACD;;AACD,QAAIR,OAAO,CAACS,gBAAR,GAA2B,OAAO,EAAP,GAAY,EAA3C,EAA+C;AAC7C;AACA;AACA,aAAO,IAAID,KAAJ,CAAU,sBAAV,CAAP;AACD;;AACD,QAAIR,OAAO,CAACU,OAAR,GAAkB,EAAtB,EAA0B;AACxB;AACA,aAAOC,SAAP;AACD,KAdgC,CAejC;;;AACA,WAAOC,IAAI,CAACC,GAAL,CAASb,OAAO,CAACU,OAAR,GAAkB,GAA3B,EAAgC,IAAhC,CAAP;AACD;AAtBa,CAAhB;;AAyBA,MAAMI,MAAM,GAAGC,eAAMC,YAAN,CAAmBhB,OAAnB,CAAf;;;;AAEA,MAAMiB,QAAQ,GAAG,CAACC,GAAD,EAAMC,KAAN,EAAaC,IAAb,KAAsB;AACrC,MAAI,OAAOD,KAAP,KAAiB,WAAjB,IAAgCA,KAAK,IAAI,IAAzC,IAAiDA,KAAK,KAAK,EAA/D,EAAmE;AACjE;AACD;;AACD,MAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC7B,QAAI,OAAOC,IAAP,KAAgB,WAApB,EAAiC;AAC/B;AACAN,MAAAA,MAAM,CAACO,GAAP,CAAWH,GAAX,EAAgBC,KAAhB,EAAuB,IAAvB,EAA6BC,IAA7B;AACD,KAHD,MAGO;AACLN,MAAAA,MAAM,CAACO,GAAP,CAAWH,GAAX,EAAgBC,KAAhB;AACD;AACF,GAPD,MAOO,IAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AACpCG,IAAAA,MAAM,CAACC,IAAP,CAAYJ,KAAZ,EAAmBK,OAAnB,CAA2BC,IAAI,IAAI;AACjCX,MAAAA,MAAM,CAACY,IAAP,CAAYR,GAAZ,EAAiBO,IAAjB,EAAuBN,KAAK,CAACM,IAAD,CAA5B,EAAoCV,eAAMY,KAA1C;AACD,KAFD;AAGD;AACF,CAhBD;;;;AAkBA,MAAM;AAAEC,EAAAA;AAAF,IAAgBC,OAAO,CAAC,MAAD,CAA7B;;AACA,MAAMC,QAAQ,GAAGF,SAAS,CAACd,MAAM,CAACiB,GAAR,CAAT,CAAsBC,IAAtB,CAA2BlB,MAA3B,CAAjB;;AAEA,MAAMmB,QAAQ,GAAIf,GAAD,IAAS;AACxB,SAAOY,QAAQ,CAACZ,GAAD,CAAf;AACD,CAFD;;;;AAIA,MAAMgB,SAAS,GAAGhB,GAAG,IAAI;AACvB,SAAOU,SAAS,CAACd,MAAM,CAACqB,OAAR,CAAT,CAA0BH,IAA1B,CAA+BlB,MAA/B,EAAuCI,GAAvC,CAAP;AACD,CAFD",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\config\\",
      "sourcesContent": [
        "import redis from 'redis';\r\nimport { cli } from 'webpack';\r\n\r\nconst options = {\r\n  host: '119.91.192.232',\r\n  port: 15001,\r\n  password: '123456',\r\n  detect_buffers: true,\r\n  retry_strategy: function (options) {\r\n    if (options.error && options.error.code === \"ECONNREFUSED\") {\r\n      // End reconnecting on a specific error and flush all commands with\r\n      // a individual error\r\n      return new Error(\"The server refused the connection\");\r\n    }\r\n    if (options.total_retry_time > 1000 * 60 * 60) {\r\n      // End reconnecting after a specific timeout and flush all commands\r\n      // with a individual error\r\n      return new Error(\"Retry time exhausted\");\r\n    }\r\n    if (options.attempt > 10) {\r\n      // End reconnecting with built in error\r\n      return undefined;\r\n    }\r\n    // reconnect after\r\n    return Math.min(options.attempt * 100, 3000);\r\n  },\r\n}\r\n\r\nconst client = redis.createClient(options)\r\n\r\nconst setValue = (key, value, time) => {\r\n  if (typeof value === 'undefined' || value == null || value === '') {\r\n    return\r\n  }\r\n  if (typeof value === 'string') {\r\n    if (typeof time !== 'undefined') {\r\n      //EX是设置缓存失效时间\r\n      client.set(key, value, 'EX', time)\r\n    } else {\r\n      client.set(key, value)\r\n    }\r\n  } else if (typeof value === 'object') {\r\n    Object.keys(value).forEach(item => {\r\n      client.hset(key, item, value[item], redis.print)\r\n    });\r\n  }\r\n}\r\n\r\nconst { promisify } = require('util')\r\nconst getAsync = promisify(client.get).bind(client)\r\n\r\nconst getValue = (key) => {\r\n  return getAsync(key)\r\n}\r\n\r\nconst getHvalue = key => {\r\n  return promisify(client.hgetall).bind(client)(key)\r\n}\r\nexport {\r\n  client,\r\n  setValue,\r\n  getValue,\r\n  getHvalue\r\n}"
      ]
    },
    "sourceType": "script",
    "mtime": 1637062998164
  },
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\model\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\model\\\\test.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\model\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\model\\test.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\model\\test.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\model\\test.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\model\\",
        "sourceFileName": "test.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _DBHelpler = _interopRequireDefault(require(\"../config/DBHelpler\"));\n\nvar _dayjs = _interopRequireDefault(require(\"dayjs\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Schema = _DBHelpler.default.Schema;\nconst TestSchema = new Schema({\n  'username': {\n    type: String\n  },\n  'name': {\n    type: String\n  },\n  'password': {\n    type: String\n  },\n  'isVip': {\n    type: Number,\n    default: 0\n  },\n  'count': {\n    type: Number\n  },\n  'created': {\n    type: Date\n  },\n  'status': {\n    type: String,\n    default: '0'\n  },\n  'favs': {\n    type: Number\n  },\n  'pic': {\n    type: String\n  },\n  'roles': {\n    type: Array,\n    default: []\n  },\n  'content': {\n    type: String\n  },\n  'status': {\n    type: String,\n    default: '0'\n  },\n  'unread_num': {\n    type: Number,\n    default: 0\n  } // 未读消息数\n\n});\nTestSchema.pre('save', function (next) {\n  this.created = (0, _dayjs.default)().format('YYYY-MM-DD HH:mm:ss');\n  next();\n});\n\nconst intoQuery = options => {\n  if (!options) return {}; // const options = JSON.parse(option)\n\n  const searchKey = options.searchKey;\n  const searchValue = options.searchValue;\n  let query = {};\n\n  if (searchValue) {\n    if (searchKey === 'created' && searchValue.length > 0) {\n      const start = searchValue[0] ? searchValue[0] : '';\n      const end = searchValue[1] ? searchValue[1] : '';\n\n      if (start && end) {\n        query = {\n          created: {\n            $gte: new Date(start),\n            $lt: new Date(end)\n          }\n        };\n      } else if (start) {\n        query = {\n          created: {\n            $gte: new Date(start)\n          }\n        };\n      } else if (end) {\n        query = {\n          created: {\n            $lt: new Date(end)\n          }\n        };\n      }\n    } else if (searchKey === 'roles') {\n      query = {\n        roles: {\n          $in: searchValue\n        }\n      };\n    } else if (['name', 'username'].includes(searchKey)) {\n      query[searchKey] = {\n        $regex: new RegExp(searchValue)\n      };\n    } else if (searchKey === 'status') {\n      query[searchKey] = searchValue;\n    } else if (searchKey === 'isVip') {\n      query[searchKey] = parseInt(searchValue);\n    } else if (searchKey === 'favs') {\n      const start = searchValue.start;\n      const end = searchValue.end;\n\n      if (start && end) {\n        query = {\n          favs: {\n            $gte: start,\n            $lt: end\n          }\n        };\n      } else if (start) {\n        query = {\n          favs: {\n            $gte: start\n          }\n        };\n      } else if (end) {\n        query = {\n          favs: {\n            $lt: end\n          }\n        };\n      }\n    }\n  }\n\n  return query;\n};\n\nTestSchema.statics = {\n  getList: function (option, page, limit) {\n    const query = intoQuery(option);\n    console.log('query: ', query);\n    return this.find(query, {\n      password: 0\n    }).skip(page * limit).limit(limit);\n  },\n  countlist: function (opitons) {\n    const query = intoQuery(opitons);\n    console.log('countlist->query: ', query);\n    return this.countDocuments(query);\n  }\n};\n\nconst TestModel = _DBHelpler.default.model('users', TestSchema);\n\nvar _default = TestModel;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QuanMiXSwibmFtZXMiOlsiU2NoZW1hIiwibW9uZ29vc2UiLCJUZXN0U2NoZW1hIiwidHlwZSIsIlN0cmluZyIsIk51bWJlciIsImRlZmF1bHQiLCJEYXRlIiwiQXJyYXkiLCJwcmUiLCJuZXh0IiwiY3JlYXRlZCIsImZvcm1hdCIsImludG9RdWVyeSIsIm9wdGlvbnMiLCJzZWFyY2hLZXkiLCJzZWFyY2hWYWx1ZSIsInF1ZXJ5IiwibGVuZ3RoIiwic3RhcnQiLCJlbmQiLCIkZ3RlIiwiJGx0Iiwicm9sZXMiLCIkaW4iLCJpbmNsdWRlcyIsIiRyZWdleCIsIlJlZ0V4cCIsInBhcnNlSW50IiwiZmF2cyIsInN0YXRpY3MiLCJnZXRMaXN0Iiwib3B0aW9uIiwicGFnZSIsImxpbWl0IiwiY29uc29sZSIsImxvZyIsImZpbmQiLCJwYXNzd29yZCIsInNraXAiLCJjb3VudGxpc3QiLCJvcGl0b25zIiwiY291bnREb2N1bWVudHMiLCJUZXN0TW9kZWwiLCJtb2RlbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUEsTUFBTUEsTUFBTSxHQUFHQyxtQkFBU0QsTUFBeEI7QUFFQSxNQUFNRSxVQUFVLEdBQUcsSUFBSUYsTUFBSixDQUFXO0FBQzVCLGNBQVk7QUFBRUcsSUFBQUEsSUFBSSxFQUFFQztBQUFSLEdBRGdCO0FBRTVCLFVBQVE7QUFBRUQsSUFBQUEsSUFBSSxFQUFFQztBQUFSLEdBRm9CO0FBRzVCLGNBQVk7QUFBRUQsSUFBQUEsSUFBSSxFQUFFQztBQUFSLEdBSGdCO0FBSTVCLFdBQVM7QUFBRUQsSUFBQUEsSUFBSSxFQUFFRSxNQUFSO0FBQWdCQyxJQUFBQSxPQUFPLEVBQUU7QUFBekIsR0FKbUI7QUFLNUIsV0FBUztBQUFFSCxJQUFBQSxJQUFJLEVBQUVFO0FBQVIsR0FMbUI7QUFNNUIsYUFBVztBQUFFRixJQUFBQSxJQUFJLEVBQUVJO0FBQVIsR0FOaUI7QUFPNUIsWUFBVTtBQUFFSixJQUFBQSxJQUFJLEVBQUVDLE1BQVI7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QUFMLENBQVVwQixLQUFWLEVBQWlCO0FBQUVxQixNQUFBQSxRQUFRLEVBQUU7QUFBWixLQUFqQixFQUFrQ0MsSUFBbEMsQ0FBdUNOLElBQUksR0FBR0MsS0FBOUMsRUFBcURBLEtBQXJELENBQTJEQSxLQUEzRCxDQUFQO0FBQ0QsR0FMa0I7QUFNbkJNLEVBQUFBLFNBQVMsRUFBRSxVQUFVQyxPQUFWLEVBQW1CO0FBQzVCLFVBQU14QixLQUFLLEdBQUdKLFNBQVMsQ0FBQzRCLE9BQUQsQ0FBdkI7QUFDQU4sSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksb0JBQVosRUFBa0NuQixLQUFsQztBQUNBLFdBQU8sS0FBS3lCLGNBQUwsQ0FBb0J6QixLQUFwQixDQUFQO0FBQ0Q7QUFWa0IsQ0FBckI7O0FBYUEsTUFBTTBCLFNBQVMsR0FBRzFDLG1CQUFTMkMsS0FBVCxDQUFlLE9BQWYsRUFBd0IxQyxVQUF4QixDQUFsQjs7ZUFFZXlDLFMiLCJzb3VyY2VSb290IjoiRDpcXEhUTUwrY3NzK2pzXFxub2RlX2tvYVxcc3JjXFxtb2RlbFxcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJy4uL2NvbmZpZy9EQkhlbHBsZXInO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ2RheWpzJztcclxuXHJcbmNvbnN0IFNjaGVtYSA9IG1vbmdvb3NlLlNjaGVtYVxyXG5cclxuY29uc3QgVGVzdFNjaGVtYSA9IG5ldyBTY2hlbWEoe1xyXG4gICd1c2VybmFtZSc6IHsgdHlwZTogU3RyaW5nIH0sXHJcbiAgJ25hbWUnOiB7IHR5cGU6IFN0cmluZyB9LFxyXG4gICdwYXNzd29yZCc6IHsgdHlwZTogU3RyaW5nIH0sXHJcbiAgJ2lzVmlwJzogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcclxuICAnY291bnQnOiB7IHR5cGU6IE51bWJlciB9LFxyXG4gICdjcmVhdGVkJzogeyB0eXBlOiBEYXRlIH0sXHJcbiAgJ3N0YXR1cyc6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnMCcgfSxcclxuICAnZmF2cyc6IHsgdHlwZTogTnVtYmVyIH0sXHJcbiAgJ3BpYyc6IHsgdHlwZTogU3RyaW5nIH0sXHJcbiAgJ3JvbGVzJzogeyB0eXBlOiBBcnJheSwgZGVmYXVsdDogW10gfSxcclxuICAnY29udGVudCc6IHsgdHlwZTogU3RyaW5nIH0sXHJcbiAgJ3N0YXR1cyc6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnMCcgfSxcclxuICAndW5yZWFkX251bSc6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sIC8vIOacquivu+a2iOaBr+aVsFxyXG59KVxyXG5cclxuVGVzdFNjaGVtYS5wcmUoJ3NhdmUnLCBmdW5jdGlvbiAobmV4dCkge1xyXG4gIHRoaXMuY3JlYXRlZCA9IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpXHJcbiAgbmV4dCgpXHJcbn0pXHJcblxyXG5jb25zdCBpbnRvUXVlcnkgPSAob3B0aW9ucykgPT4ge1xyXG4gIGlmICghb3B0aW9ucykgcmV0dXJuIHt9XHJcbiAgLy8gY29uc3Qgb3B0aW9ucyA9IEpTT04ucGFyc2Uob3B0aW9uKVxyXG4gIGNvbnN0IHNlYXJjaEtleSA9IG9wdGlvbnMuc2VhcmNoS2V5XHJcbiAgY29uc3Qgc2VhcmNoVmFsdWUgPSBvcHRpb25zLnNlYXJjaFZhbHVlXHJcbiAgbGV0IHF1ZXJ5ID0ge31cclxuXHJcbiAgaWYgKHNlYXJjaFZhbHVlKSB7XHJcbiAgICBpZiAoc2VhcmNoS2V5ID09PSAnY3JlYXRlZCcgJiYgc2VhcmNoVmFsdWUubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zdCBzdGFydCA9IHNlYXJjaFZhbHVlWzBdID8gc2VhcmNoVmFsdWVbMF0gOiAnJ1xyXG4gICAgICBjb25zdCBlbmQgPSBzZWFyY2hWYWx1ZVsxXSA/IHNlYXJjaFZhbHVlWzFdIDogJydcclxuICAgICAgaWYgKHN0YXJ0ICYmIGVuZCkge1xyXG4gICAgICAgIHF1ZXJ5ID0geyBjcmVhdGVkOiB7ICRndGU6IG5ldyBEYXRlKHN0YXJ0KSwgJGx0OiBuZXcgRGF0ZShlbmQpIH0gfVxyXG4gICAgICB9IGVsc2UgaWYgKHN0YXJ0KSB7XHJcbiAgICAgICAgcXVlcnkgPSB7IGNyZWF0ZWQ6IHsgJGd0ZTogbmV3IERhdGUoc3RhcnQpIH0gfVxyXG4gICAgICB9IGVsc2UgaWYgKGVuZCkge1xyXG4gICAgICAgIHF1ZXJ5ID0geyBjcmVhdGVkOiB7ICRsdDogbmV3IERhdGUoZW5kKSB9IH1cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChzZWFyY2hLZXkgPT09ICdyb2xlcycpIHtcclxuXHJcbiAgICAgIHF1ZXJ5ID0geyByb2xlczogeyAkaW46IHNlYXJjaFZhbHVlIH0gfVxyXG5cclxuICAgIH0gZWxzZSBpZiAoWyduYW1lJywgJ3VzZXJuYW1lJ10uaW5jbHVkZXMoc2VhcmNoS2V5KSkge1xyXG4gICAgICBxdWVyeVtzZWFyY2hLZXldID0geyAkcmVnZXg6IG5ldyBSZWdFeHAoc2VhcmNoVmFsdWUpIH1cclxuICAgIH0gZWxzZSBpZiAoc2VhcmNoS2V5ID09PSAnc3RhdHVzJykge1xyXG4gICAgICBxdWVyeVtzZWFyY2hLZXldID0gc2VhcmNoVmFsdWVcclxuICAgIH0gZWxzZSBpZiAoc2VhcmNoS2V5ID09PSAnaXNWaXAnKSB7XHJcbiAgICAgIHF1ZXJ5W3NlYXJjaEtleV0gPSBwYXJzZUludChzZWFyY2hWYWx1ZSlcclxuICAgIH0gZWxzZSBpZiAoc2VhcmNoS2V5ID09PSAnZmF2cycpIHtcclxuXHJcbiAgICAgIGNvbnN0IHN0YXJ0ID0gc2VhcmNoVmFsdWUuc3RhcnRcclxuICAgICAgY29uc3QgZW5kID0gc2VhcmNoVmFsdWUuZW5kXHJcbiAgICAgIGlmIChzdGFydCAmJiBlbmQpIHtcclxuICAgICAgICBxdWVyeSA9IHsgZmF2czogeyAkZ3RlOiBzdGFydCwgJGx0OiBlbmQgfSB9XHJcblxyXG4gICAgICB9IGVsc2UgaWYgKHN0YXJ0KSB7XHJcbiAgICAgICAgcXVlcnkgPSB7IGZhdnM6IHsgJGd0ZTogc3RhcnQgfSB9XHJcbiAgICAgIH0gZWxzZSBpZiAoZW5kKSB7XHJcbiAgICAgICAgcXVlcnkgPSB7IGZhdnM6IHsgJGx0OiBlbmQgfSB9XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gcXVlcnlcclxufVxyXG5cclxuVGVzdFNjaGVtYS5zdGF0aWNzID0ge1xyXG4gIGdldExpc3Q6IGZ1bmN0aW9uIChvcHRpb24sIHBhZ2UsIGxpbWl0KSB7XHJcbiAgICBjb25zdCBxdWVyeSA9IGludG9RdWVyeShvcHRpb24pXHJcbiAgICBjb25zb2xlLmxvZygncXVlcnk6ICcsIHF1ZXJ5KTtcclxuICAgIHJldHVybiB0aGlzLmZpbmQocXVlcnksIHsgcGFzc3dvcmQ6IDAgfSkuc2tpcChwYWdlICogbGltaXQpLmxpbWl0KGxpbWl0KVxyXG4gIH0sXHJcbiAgY291bnRsaXN0OiBmdW5jdGlvbiAob3BpdG9ucykge1xyXG4gICAgY29uc3QgcXVlcnkgPSBpbnRvUXVlcnkob3BpdG9ucylcclxuICAgIGNvbnNvbGUubG9nKCdjb3VudGxpc3QtPnF1ZXJ5OiAnLCBxdWVyeSk7XHJcbiAgICByZXR1cm4gdGhpcy5jb3VudERvY3VtZW50cyhxdWVyeSlcclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IFRlc3RNb2RlbCA9IG1vbmdvb3NlLm1vZGVsKCd1c2VycycsIFRlc3RTY2hlbWEpXHJcblxyXG5leHBvcnQgZGVmYXVsdCBUZXN0TW9kZWwiXX0=",
    "map": {
      "version": 3,
      "sources": [
        "test.js"
      ],
      "names": [
        "Schema",
        "mongoose",
        "TestSchema",
        "type",
        "String",
        "Number",
        "default",
        "Date",
        "Array",
        "pre",
        "next",
        "created",
        "format",
        "intoQuery",
        "options",
        "searchKey",
        "searchValue",
        "query",
        "length",
        "start",
        "end",
        "$gte",
        "$lt",
        "roles",
        "$in",
        "includes",
        "$regex",
        "RegExp",
        "parseInt",
        "favs",
        "statics",
        "getList",
        "option",
        "page",
        "limit",
        "console",
        "log",
        "find",
        "password",
        "skip",
        "countlist",
        "opitons",
        "countDocuments",
        "TestModel",
        "model"
      ],
      "mappings": "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",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\model\\",
      "sourcesContent": [
        "import mongoose from '../config/DBHelpler';\r\nimport moment from 'dayjs';\r\n\r\nconst Schema = mongoose.Schema\r\n\r\nconst TestSchema = new Schema({\r\n  'username': { type: String },\r\n  'name': { type: String },\r\n  'password': { type: String },\r\n  'isVip': { type: Number, default: 0 },\r\n  'count': { type: Number },\r\n  'created': { type: Date },\r\n  'status': { type: String, default: '0' },\r\n  'favs': { type: Number },\r\n  'pic': { type: String },\r\n  'roles': { type: Array, default: [] },\r\n  'content': { type: String },\r\n  'status': { type: String, default: '0' },\r\n  'unread_num': { type: Number, default: 0 }, // 未读消息数\r\n})\r\n\r\nTestSchema.pre('save', function (next) {\r\n  this.created = moment().format('YYYY-MM-DD HH:mm:ss')\r\n  next()\r\n})\r\n\r\nconst intoQuery = (options) => {\r\n  if (!options) return {}\r\n  // const options = JSON.parse(option)\r\n  const searchKey = options.searchKey\r\n  const searchValue = options.searchValue\r\n  let query = {}\r\n\r\n  if (searchValue) {\r\n    if (searchKey === 'created' && searchValue.length > 0) {\r\n      const start = searchValue[0] ? searchValue[0] : ''\r\n      const end = searchValue[1] ? searchValue[1] : ''\r\n      if (start && end) {\r\n        query = { created: { $gte: new Date(start), $lt: new Date(end) } }\r\n      } else if (start) {\r\n        query = { created: { $gte: new Date(start) } }\r\n      } else if (end) {\r\n        query = { created: { $lt: new Date(end) } }\r\n      }\r\n    } else if (searchKey === 'roles') {\r\n\r\n      query = { roles: { $in: searchValue } }\r\n\r\n    } else if (['name', 'username'].includes(searchKey)) {\r\n      query[searchKey] = { $regex: new RegExp(searchValue) }\r\n    } else if (searchKey === 'status') {\r\n      query[searchKey] = searchValue\r\n    } else if (searchKey === 'isVip') {\r\n      query[searchKey] = parseInt(searchValue)\r\n    } else if (searchKey === 'favs') {\r\n\r\n      const start = searchValue.start\r\n      const end = searchValue.end\r\n      if (start && end) {\r\n        query = { favs: { $gte: start, $lt: end } }\r\n\r\n      } else if (start) {\r\n        query = { favs: { $gte: start } }\r\n      } else if (end) {\r\n        query = { favs: { $lt: end } }\r\n\r\n      }\r\n\r\n    }\r\n  }\r\n  return query\r\n}\r\n\r\nTestSchema.statics = {\r\n  getList: function (option, page, limit) {\r\n    const query = intoQuery(option)\r\n    console.log('query: ', query);\r\n    return this.find(query, { password: 0 }).skip(page * limit).limit(limit)\r\n  },\r\n  countlist: function (opitons) {\r\n    const query = intoQuery(opitons)\r\n    console.log('countlist->query: ', query);\r\n    return this.countDocuments(query)\r\n  }\r\n}\r\n\r\nconst TestModel = mongoose.model('users', TestSchema)\r\n\r\nexport default TestModel"
      ]
    },
    "sourceType": "script",
    "mtime": 1637050615003
  },
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\config\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\config\\\\DBHelpler.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\config\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\config\\DBHelpler.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\config\\DBHelpler.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\config\\DBHelpler.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\config\\",
        "sourceFileName": "DBHelpler.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nvar _index = _interopRequireDefault(require(\"./index\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//创建连接\n_mongoose.default.connect(_index.default.DB_URL, {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n}); //连接成功\n\n\n_mongoose.default.connection.on('connected', () => {\n  console.log('数据库连接成功' + _index.default.DB_URL);\n}); //连接异常\n\n\n_mongoose.default.connection.on('error', err => {\n  console.log('数据库连接失败' + err);\n}); //断开连接\n\n\n_mongoose.default.connection.on('disconnected', () => {\n  console.log('数据库断开连接');\n});\n\nvar _default = _mongoose.default;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkRCSGVscGxlci5qcyJdLCJuYW1lcyI6WyJtb25nb29zZSIsImNvbm5lY3QiLCJjb25maWciLCJEQl9VUkwiLCJ1c2VOZXdVcmxQYXJzZXIiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJjb25uZWN0aW9uIiwib24iLCJjb25zb2xlIiwibG9nIiwiZXJyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7Ozs7QUFFQTtBQUNBQSxrQkFBU0MsT0FBVCxDQUFpQkMsZUFBT0MsTUFBeEIsRUFBZ0M7QUFDOUJDLEVBQUFBLGVBQWUsRUFBRSxJQURhO0FBRTlCQyxFQUFBQSxrQkFBa0IsRUFBRTtBQUZVLENBQWhDLEUsQ0FLQTs7O0FBQ0FMLGtCQUFTTSxVQUFULENBQW9CQyxFQUFwQixDQUF1QixXQUF2QixFQUFvQyxNQUFNO0FBQ3hDQyxFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxZQUFZUCxlQUFPQyxNQUEvQjtBQUNELENBRkQsRSxDQUlBOzs7QUFDQUgsa0JBQVNNLFVBQVQsQ0FBb0JDLEVBQXBCLENBQXVCLE9BQXZCLEVBQWlDRyxHQUFELElBQVM7QUFDdkNGLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLFlBQVlDLEdBQXhCO0FBQ0QsQ0FGRCxFLENBSUE7OztBQUNBVixrQkFBU00sVUFBVCxDQUFvQkMsRUFBcEIsQ0FBdUIsY0FBdkIsRUFBdUMsTUFBSztBQUMxQ0MsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksU0FBWjtBQUNELENBRkQ7O2VBSWVULGlCIiwic291cmNlUm9vdCI6IkQ6XFxIVE1MK2Nzcytqc1xcbm9kZV9rb2FcXHNyY1xcY29uZmlnXFwiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnXHJcbmltcG9ydCBjb25maWcgZnJvbSAnLi9pbmRleCc7XHJcblxyXG4vL+WIm+W7uui/nuaOpVxyXG5tb25nb29zZS5jb25uZWN0KGNvbmZpZy5EQl9VUkwsIHtcclxuICB1c2VOZXdVcmxQYXJzZXI6IHRydWUsXHJcbiAgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlXHJcbn0pXHJcblxyXG4vL+i/nuaOpeaIkOWKn1xyXG5tb25nb29zZS5jb25uZWN0aW9uLm9uKCdjb25uZWN0ZWQnLCAoKSA9PiB7XHJcbiAgY29uc29sZS5sb2coJ+aVsOaNruW6k+i/nuaOpeaIkOWKnycgKyBjb25maWcuREJfVVJMKTtcclxufSlcclxuXHJcbi8v6L+e5o6l5byC5bi4XHJcbm1vbmdvb3NlLmNvbm5lY3Rpb24ub24oJ2Vycm9yJywgKGVycikgPT4ge1xyXG4gIGNvbnNvbGUubG9nKCfmlbDmja7lupPov57mjqXlpLHotKUnICsgZXJyKTtcclxufSlcclxuXHJcbi8v5pat5byA6L+e5o6lXHJcbm1vbmdvb3NlLmNvbm5lY3Rpb24ub24oJ2Rpc2Nvbm5lY3RlZCcsICgpID0+e1xyXG4gIGNvbnNvbGUubG9nKCfmlbDmja7lupPmlq3lvIDov57mjqUnKTtcclxufSlcclxuXHJcbmV4cG9ydCBkZWZhdWx0IG1vbmdvb3NlIl19",
    "map": {
      "version": 3,
      "sources": [
        "DBHelpler.js"
      ],
      "names": [
        "mongoose",
        "connect",
        "config",
        "DB_URL",
        "useNewUrlParser",
        "useUnifiedTopology",
        "connection",
        "on",
        "console",
        "log",
        "err"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA;AACAA,kBAASC,OAAT,CAAiBC,eAAOC,MAAxB,EAAgC;AAC9BC,EAAAA,eAAe,EAAE,IADa;AAE9BC,EAAAA,kBAAkB,EAAE;AAFU,CAAhC,E,CAKA;;;AACAL,kBAASM,UAAT,CAAoBC,EAApB,CAAuB,WAAvB,EAAoC,MAAM;AACxCC,EAAAA,OAAO,CAACC,GAAR,CAAY,YAAYP,eAAOC,MAA/B;AACD,CAFD,E,CAIA;;;AACAH,kBAASM,UAAT,CAAoBC,EAApB,CAAuB,OAAvB,EAAiCG,GAAD,IAAS;AACvCF,EAAAA,OAAO,CAACC,GAAR,CAAY,YAAYC,GAAxB;AACD,CAFD,E,CAIA;;;AACAV,kBAASM,UAAT,CAAoBC,EAApB,CAAuB,cAAvB,EAAuC,MAAK;AAC1CC,EAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACD,CAFD;;eAIeT,iB",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\config\\",
      "sourcesContent": [
        "import mongoose from 'mongoose'\r\nimport config from './index';\r\n\r\n//创建连接\r\nmongoose.connect(config.DB_URL, {\r\n  useNewUrlParser: true,\r\n  useUnifiedTopology: true\r\n})\r\n\r\n//连接成功\r\nmongoose.connection.on('connected', () => {\r\n  console.log('数据库连接成功' + config.DB_URL);\r\n})\r\n\r\n//连接异常\r\nmongoose.connection.on('error', (err) => {\r\n  console.log('数据库连接失败' + err);\r\n})\r\n\r\n//断开连接\r\nmongoose.connection.on('disconnected', () =>{\r\n  console.log('数据库断开连接');\r\n})\r\n\r\nexport default mongoose"
      ]
    },
    "sourceType": "script",
    "mtime": 1623767287001
  },
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\conmon\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\conmon\\\\Auth.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\conmon\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\conmon\\Auth.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\conmon\\Auth.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\conmon\\Auth.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\conmon\\",
        "sourceFileName": "Auth.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _Utils = require(\"./Utils\");\n\nvar _RedisConfig = require(\"../config/RedisConfig\");\n\nvar _default = async (ctx, next) => {\n  const token = ctx.header.authorization;\n\n  if (token) {\n    const obj = (0, _Utils.getJWTPayload)(token);\n    obj._id && (ctx._id = obj._id); // const adminIds = JSON.parse(await getValue('adminIds'))\n    // if (adminIds && adminIds.includes(obj._id)) {\n    //   ctx.isAdmin = true\n    // } else {\n    //   ctx.isAdmin = false\n    // }\n  }\n\n  await next();\n};\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkF1dGguanMiXSwibmFtZXMiOlsiY3R4IiwibmV4dCIsInRva2VuIiwiaGVhZGVyIiwiYXV0aG9yaXphdGlvbiIsIm9iaiIsIl9pZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztlQUllLE9BQU9BLEdBQVAsRUFBWUMsSUFBWixLQUFxQjtBQUNsQyxRQUFNQyxLQUFLLEdBQUdGLEdBQUcsQ0FBQ0csTUFBSixDQUFXQyxhQUF6Qjs7QUFFQSxNQUFJRixLQUFKLEVBQVc7QUFDVCxVQUFNRyxHQUFHLEdBQUcsMEJBQWNILEtBQWQsQ0FBWjtBQUVBRyxJQUFBQSxHQUFHLENBQUNDLEdBQUosS0FBWU4sR0FBRyxDQUFDTSxHQUFKLEdBQVVELEdBQUcsQ0FBQ0MsR0FBMUIsRUFIUyxDQUlUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNEOztBQUNELFFBQU1MLElBQUksRUFBVjtBQUNELEMiLCJzb3VyY2VSb290IjoiRDpcXEhUTUwrY3NzK2pzXFxub2RlX2tvYVxcc3JjXFxjb25tb25cXCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEpXVFBheWxvYWQgfSBmcm9tIFwiLi9VdGlsc1wiXHJcbmltcG9ydCB7IGdldFZhbHVlIH0gZnJvbSAnLi4vY29uZmlnL1JlZGlzQ29uZmlnJztcclxuXHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgKGN0eCwgbmV4dCkgPT4ge1xyXG4gIGNvbnN0IHRva2VuID0gY3R4LmhlYWRlci5hdXRob3JpemF0aW9uXHJcblxyXG4gIGlmICh0b2tlbikge1xyXG4gICAgY29uc3Qgb2JqID0gZ2V0SldUUGF5bG9hZCh0b2tlbilcclxuXHJcbiAgICBvYmouX2lkICYmIChjdHguX2lkID0gb2JqLl9pZClcclxuICAgIC8vIGNvbnN0IGFkbWluSWRzID0gSlNPTi5wYXJzZShhd2FpdCBnZXRWYWx1ZSgnYWRtaW5JZHMnKSlcclxuICAgIC8vIGlmIChhZG1pbklkcyAmJiBhZG1pbklkcy5pbmNsdWRlcyhvYmouX2lkKSkge1xyXG4gICAgLy8gICBjdHguaXNBZG1pbiA9IHRydWVcclxuICAgIC8vIH0gZWxzZSB7XHJcbiAgICAvLyAgIGN0eC5pc0FkbWluID0gZmFsc2VcclxuICAgIC8vIH1cclxuICB9XHJcbiAgYXdhaXQgbmV4dCgpXHJcbn0iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "Auth.js"
      ],
      "names": [
        "ctx",
        "next",
        "token",
        "header",
        "authorization",
        "obj",
        "_id"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;eAIe,OAAOA,GAAP,EAAYC,IAAZ,KAAqB;AAClC,QAAMC,KAAK,GAAGF,GAAG,CAACG,MAAJ,CAAWC,aAAzB;;AAEA,MAAIF,KAAJ,EAAW;AACT,UAAMG,GAAG,GAAG,0BAAcH,KAAd,CAAZ;AAEAG,IAAAA,GAAG,CAACC,GAAJ,KAAYN,GAAG,CAACM,GAAJ,GAAUD,GAAG,CAACC,GAA1B,EAHS,CAIT;AACA;AACA;AACA;AACA;AACA;AACD;;AACD,QAAML,IAAI,EAAV;AACD,C",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\conmon\\",
      "sourcesContent": [
        "import { getJWTPayload } from \"./Utils\"\r\nimport { getValue } from '../config/RedisConfig';\r\n\r\n\r\n\r\nexport default async (ctx, next) => {\r\n  const token = ctx.header.authorization\r\n\r\n  if (token) {\r\n    const obj = getJWTPayload(token)\r\n\r\n    obj._id && (ctx._id = obj._id)\r\n    // const adminIds = JSON.parse(await getValue('adminIds'))\r\n    // if (adminIds && adminIds.includes(obj._id)) {\r\n    //   ctx.isAdmin = true\r\n    // } else {\r\n    //   ctx.isAdmin = false\r\n    // }\r\n  }\r\n  await next()\r\n}"
      ]
    },
    "sourceType": "script",
    "mtime": 1637132666594
  },
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\conmon\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\conmon\\\\Init.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\conmon\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\conmon\\Init.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\conmon\\Init.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\conmon\\Init.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\conmon\\",
        "sourceFileName": "Init.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _index = _interopRequireDefault(require(\"../config/index\"));\n\nvar _test = _interopRequireDefault(require(\"../model/test\"));\n\nvar _RedisConfig = require(\"../config/RedisConfig\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _default = async () => {\n  const admins = _index.default.admins;\n  let adminIds = [];\n\n  for (let i = 0; i < admins.length; i++) {\n    const username = admins[i];\n    const user = await _test.default.findOne({\n      username\n    }, {\n      _id: 1\n    });\n    adminIds.push(user._id);\n  }\n\n  (0, _RedisConfig.setValue)('adminIds', JSON.stringify(adminIds));\n};\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkluaXQuanMiXSwibmFtZXMiOlsiYWRtaW5zIiwiY29uZmlnIiwiYWRtaW5JZHMiLCJpIiwibGVuZ3RoIiwidXNlcm5hbWUiLCJ1c2VyIiwiVXNlciIsImZpbmRPbmUiLCJfaWQiLCJwdXNoIiwiSlNPTiIsInN0cmluZ2lmeSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7O2VBRWUsWUFBWTtBQUN6QixRQUFNQSxNQUFNLEdBQUdDLGVBQU9ELE1BQXRCO0FBRUEsTUFBSUUsUUFBUSxHQUFHLEVBQWY7O0FBQ0EsT0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHSCxNQUFNLENBQUNJLE1BQTNCLEVBQW1DRCxDQUFDLEVBQXBDLEVBQXdDO0FBQ3RDLFVBQU1FLFFBQVEsR0FBR0wsTUFBTSxDQUFDRyxDQUFELENBQXZCO0FBRUEsVUFBTUcsSUFBSSxHQUFHLE1BQU1DLGNBQUtDLE9BQUwsQ0FBYTtBQUFFSCxNQUFBQTtBQUFGLEtBQWIsRUFBMkI7QUFBRUksTUFBQUEsR0FBRyxFQUFFO0FBQVAsS0FBM0IsQ0FBbkI7QUFFQVAsSUFBQUEsUUFBUSxDQUFDUSxJQUFULENBQWNKLElBQUksQ0FBQ0csR0FBbkI7QUFDRDs7QUFFRCw2QkFBUyxVQUFULEVBQXFCRSxJQUFJLENBQUNDLFNBQUwsQ0FBZVYsUUFBZixDQUFyQjtBQUVELEMiLCJzb3VyY2VSb290IjoiRDpcXEhUTUwrY3NzK2pzXFxub2RlX2tvYVxcc3JjXFxjb25tb25cXCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb25maWcgZnJvbSAnLi4vY29uZmlnL2luZGV4JztcclxuaW1wb3J0IFVzZXIgZnJvbSAnLi4vbW9kZWwvdGVzdCc7XHJcbmltcG9ydCB7IHNldFZhbHVlLCBnZXRWYWx1ZSB9IGZyb20gJy4uL2NvbmZpZy9SZWRpc0NvbmZpZyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyAoKSA9PiB7XHJcbiAgY29uc3QgYWRtaW5zID0gY29uZmlnLmFkbWluc1xyXG5cclxuICBsZXQgYWRtaW5JZHMgPSBbXVxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYWRtaW5zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBjb25zdCB1c2VybmFtZSA9IGFkbWluc1tpXTtcclxuXHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgdXNlcm5hbWUgfSwgeyBfaWQ6IDEgfSlcclxuXHJcbiAgICBhZG1pbklkcy5wdXNoKHVzZXIuX2lkKVxyXG4gIH1cclxuXHJcbiAgc2V0VmFsdWUoJ2FkbWluSWRzJywgSlNPTi5zdHJpbmdpZnkoYWRtaW5JZHMpKVxyXG5cclxufSJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "Init.js"
      ],
      "names": [
        "admins",
        "config",
        "adminIds",
        "i",
        "length",
        "username",
        "user",
        "User",
        "findOne",
        "_id",
        "push",
        "JSON",
        "stringify"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;;;eAEe,YAAY;AACzB,QAAMA,MAAM,GAAGC,eAAOD,MAAtB;AAEA,MAAIE,QAAQ,GAAG,EAAf;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,MAAM,CAACI,MAA3B,EAAmCD,CAAC,EAApC,EAAwC;AACtC,UAAME,QAAQ,GAAGL,MAAM,CAACG,CAAD,CAAvB;AAEA,UAAMG,IAAI,GAAG,MAAMC,cAAKC,OAAL,CAAa;AAAEH,MAAAA;AAAF,KAAb,EAA2B;AAAEI,MAAAA,GAAG,EAAE;AAAP,KAA3B,CAAnB;AAEAP,IAAAA,QAAQ,CAACQ,IAAT,CAAcJ,IAAI,CAACG,GAAnB;AACD;;AAED,6BAAS,UAAT,EAAqBE,IAAI,CAACC,SAAL,CAAeV,QAAf,CAArB;AAED,C",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\conmon\\",
      "sourcesContent": [
        "import config from '../config/index';\r\nimport User from '../model/test';\r\nimport { setValue, getValue } from '../config/RedisConfig';\r\n\r\nexport default async () => {\r\n  const admins = config.admins\r\n\r\n  let adminIds = []\r\n  for (let i = 0; i < admins.length; i++) {\r\n    const username = admins[i];\r\n\r\n    const user = await User.findOne({ username }, { _id: 1 })\r\n\r\n    adminIds.push(user._id)\r\n  }\r\n\r\n  setValue('adminIds', JSON.stringify(adminIds))\r\n\r\n}"
      ]
    },
    "sourceType": "script",
    "mtime": 1637063087459
  },
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\routes\\\\routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\routes\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\routes\\routes.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\routes\\routes.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\routes\\routes.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\routes\\",
        "sourceFileName": "routes.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _UserRoter = _interopRequireDefault(require(\"./UserRoter\"));\n\nvar _ContentRoter = _interopRequireDefault(require(\"./ContentRoter\"));\n\nvar _CommentsRouter = _interopRequireDefault(require(\"./CommentsRouter\"));\n\nvar _adminRouter = _interopRequireDefault(require(\"./adminRouter\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst combineRoutes = require('koa-combine-routers');\n\nconst aRouter = require('./routera');\n\nmodule.exports = combineRoutes(aRouter, _UserRoter.default, _ContentRoter.default, _CommentsRouter.default, _adminRouter.default);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvdXRlcy5qcyJdLCJuYW1lcyI6WyJjb21iaW5lUm91dGVzIiwicmVxdWlyZSIsImFSb3V0ZXIiLCJtb2R1bGUiLCJleHBvcnRzIiwidXNlclJvdXRlciIsImNvbnRlbnRSb3V0ZXIiLCJjb21tZW50c1JvdXRlciIsImFkbWluUm91dGVyIl0sIm1hcHBpbmdzIjoiOztBQUVBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBTEEsTUFBTUEsYUFBYSxHQUFHQyxPQUFPLENBQUMscUJBQUQsQ0FBN0I7O0FBQ0EsTUFBTUMsT0FBTyxHQUFHRCxPQUFPLENBQUMsV0FBRCxDQUF2Qjs7QUFPQUUsTUFBTSxDQUFDQyxPQUFQLEdBQWlCSixhQUFhLENBQzFCRSxPQUQwQixFQUUxQkcsa0JBRjBCLEVBRzFCQyxxQkFIMEIsRUFJMUJDLHVCQUowQixFQUsxQkMsb0JBTDBCLENBQTlCIiwic291cmNlUm9vdCI6IkQ6XFxIVE1MK2Nzcytqc1xcbm9kZV9rb2FcXHNyY1xccm91dGVzXFwiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjb21iaW5lUm91dGVzID0gcmVxdWlyZSgna29hLWNvbWJpbmUtcm91dGVycycpXHJcbmNvbnN0IGFSb3V0ZXIgPSByZXF1aXJlKCcuL3JvdXRlcmEnKVxyXG5pbXBvcnQgdXNlclJvdXRlciBmcm9tICcuL1VzZXJSb3Rlcic7XHJcbmltcG9ydCBjb250ZW50Um91dGVyIGZyb20gJy4vQ29udGVudFJvdGVyJztcclxuaW1wb3J0IGNvbW1lbnRzUm91dGVyIGZyb20gJy4vQ29tbWVudHNSb3V0ZXInO1xyXG5pbXBvcnQgYWRtaW5Sb3V0ZXIgZnJvbSAnLi9hZG1pblJvdXRlcic7XHJcblxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBjb21iaW5lUm91dGVzKFxyXG4gICAgYVJvdXRlcixcclxuICAgIHVzZXJSb3V0ZXIsXHJcbiAgICBjb250ZW50Um91dGVyLFxyXG4gICAgY29tbWVudHNSb3V0ZXIsXHJcbiAgICBhZG1pblJvdXRlclxyXG4pIl19",
    "map": {
      "version": 3,
      "sources": [
        "routes.js"
      ],
      "names": [
        "combineRoutes",
        "require",
        "aRouter",
        "module",
        "exports",
        "userRouter",
        "contentRouter",
        "commentsRouter",
        "adminRouter"
      ],
      "mappings": ";;AAEA;;AACA;;AACA;;AACA;;;;AALA,MAAMA,aAAa,GAAGC,OAAO,CAAC,qBAAD,CAA7B;;AACA,MAAMC,OAAO,GAAGD,OAAO,CAAC,WAAD,CAAvB;;AAOAE,MAAM,CAACC,OAAP,GAAiBJ,aAAa,CAC1BE,OAD0B,EAE1BG,kBAF0B,EAG1BC,qBAH0B,EAI1BC,uBAJ0B,EAK1BC,oBAL0B,CAA9B",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\routes\\",
      "sourcesContent": [
        "const combineRoutes = require('koa-combine-routers')\r\nconst aRouter = require('./routera')\r\nimport userRouter from './UserRoter';\r\nimport contentRouter from './ContentRoter';\r\nimport commentsRouter from './CommentsRouter';\r\nimport adminRouter from './adminRouter';\r\n\r\n\r\nmodule.exports = combineRoutes(\r\n    aRouter,\r\n    userRouter,\r\n    contentRouter,\r\n    commentsRouter,\r\n    adminRouter\r\n)"
      ]
    },
    "sourceType": "script",
    "mtime": 1633139249527
  },
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\routes\\\\UserRoter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\routes\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\routes\\UserRoter.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\routes\\UserRoter.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\routes\\UserRoter.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\routes\\",
        "sourceFileName": "UserRoter.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _koaRouter = _interopRequireDefault(require(\"koa-router\"));\n\nvar _UserController = _interopRequireDefault(require(\"../api/UserController\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// src\\api\\UserController.js\nconst router = new _koaRouter.default();\nrouter.prefix('/user');\nrouter.get('/fav', _UserController.default.userSign); // router.get('/fav', async (ctx) => {\n//   console.log('/fav')\n//   ctx.body = {\n//     code: 200\n//   }\n// })\n\nrouter.post('/upUserInfo', _UserController.default.upUserInfo); // 更新密码接口\n\nrouter.post('/upUserInfPwd', _UserController.default.upUserInfPwd); // 获取我的消息\n\nrouter.get('/getMyMsg', _UserController.default.getMyMsg);\nrouter.get('/user_list', _UserController.default.getUserList);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlVzZXJSb3Rlci5qcyJdLCJuYW1lcyI6WyJyb3V0ZXIiLCJSb3V0ZXIiLCJwcmVmaXgiLCJnZXQiLCJVc2VyQ29udHJvbGxlciIsInVzZXJTaWduIiwicG9zdCIsInVwVXNlckluZm8iLCJ1cFVzZXJJbmZQd2QiLCJnZXRNeU1zZyIsImdldFVzZXJMaXN0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7Ozs7QUFDQTtBQUVBLE1BQU1BLE1BQU0sR0FBRyxJQUFJQyxrQkFBSixFQUFmO0FBRUFELE1BQU0sQ0FBQ0UsTUFBUCxDQUFjLE9BQWQ7QUFFQUYsTUFBTSxDQUFDRyxHQUFQLENBQVcsTUFBWCxFQUFtQkMsd0JBQWVDLFFBQWxDLEUsQ0FDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0FMLE1BQU0sQ0FBQ00sSUFBUCxDQUFZLGFBQVosRUFBMkJGLHdCQUFlRyxVQUExQyxFLENBQ0E7O0FBQ0FQLE1BQU0sQ0FBQ00sSUFBUCxDQUFZLGVBQVosRUFBNkJGLHdCQUFlSSxZQUE1QyxFLENBQ0E7O0FBQ0FSLE1BQU0sQ0FBQ0csR0FBUCxDQUFXLFdBQVgsRUFBd0JDLHdCQUFlSyxRQUF2QztBQUVBVCxNQUFNLENBQUNHLEdBQVAsQ0FBVyxZQUFYLEVBQXlCQyx3QkFBZU0sV0FBeEM7ZUFJZVYsTSIsInNvdXJjZVJvb3QiOiJEOlxcSFRNTCtjc3MranNcXG5vZGVfa29hXFxzcmNcXHJvdXRlc1xcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJvdXRlciBmcm9tICdrb2Etcm91dGVyJztcclxuaW1wb3J0IFVzZXJDb250cm9sbGVyIGZyb20gJy4uL2FwaS9Vc2VyQ29udHJvbGxlcic7XHJcbi8vIHNyY1xcYXBpXFxVc2VyQ29udHJvbGxlci5qc1xyXG5cclxuY29uc3Qgcm91dGVyID0gbmV3IFJvdXRlcigpXHJcblxyXG5yb3V0ZXIucHJlZml4KCcvdXNlcicpXHJcblxyXG5yb3V0ZXIuZ2V0KCcvZmF2JywgVXNlckNvbnRyb2xsZXIudXNlclNpZ24pXHJcbi8vIHJvdXRlci5nZXQoJy9mYXYnLCBhc3luYyAoY3R4KSA9PiB7XHJcbi8vICAgY29uc29sZS5sb2coJy9mYXYnKVxyXG4vLyAgIGN0eC5ib2R5ID0ge1xyXG4vLyAgICAgY29kZTogMjAwXHJcbi8vICAgfVxyXG4vLyB9KVxyXG5yb3V0ZXIucG9zdCgnL3VwVXNlckluZm8nLCBVc2VyQ29udHJvbGxlci51cFVzZXJJbmZvKVxyXG4vLyDmm7TmlrDlr4bnoIHmjqXlj6Ncclxucm91dGVyLnBvc3QoJy91cFVzZXJJbmZQd2QnLCBVc2VyQ29udHJvbGxlci51cFVzZXJJbmZQd2QpXHJcbi8vIOiOt+WPluaIkeeahOa2iOaBr1xyXG5yb3V0ZXIuZ2V0KCcvZ2V0TXlNc2cnLCBVc2VyQ29udHJvbGxlci5nZXRNeU1zZylcclxuXHJcbnJvdXRlci5nZXQoJy91c2VyX2xpc3QnLCBVc2VyQ29udHJvbGxlci5nZXRVc2VyTGlzdClcclxuXHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgcm91dGVyXHJcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "UserRoter.js"
      ],
      "names": [
        "router",
        "Router",
        "prefix",
        "get",
        "UserController",
        "userSign",
        "post",
        "upUserInfo",
        "upUserInfPwd",
        "getMyMsg",
        "getUserList"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AACA;AAEA,MAAMA,MAAM,GAAG,IAAIC,kBAAJ,EAAf;AAEAD,MAAM,CAACE,MAAP,CAAc,OAAd;AAEAF,MAAM,CAACG,GAAP,CAAW,MAAX,EAAmBC,wBAAeC,QAAlC,E,CACA;AACA;AACA;AACA;AACA;AACA;;AACAL,MAAM,CAACM,IAAP,CAAY,aAAZ,EAA2BF,wBAAeG,UAA1C,E,CACA;;AACAP,MAAM,CAACM,IAAP,CAAY,eAAZ,EAA6BF,wBAAeI,YAA5C,E,CACA;;AACAR,MAAM,CAACG,GAAP,CAAW,WAAX,EAAwBC,wBAAeK,QAAvC;AAEAT,MAAM,CAACG,GAAP,CAAW,YAAX,EAAyBC,wBAAeM,WAAxC;eAIeV,M",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\routes\\",
      "sourcesContent": [
        "import Router from 'koa-router';\r\nimport UserController from '../api/UserController';\r\n// src\\api\\UserController.js\r\n\r\nconst router = new Router()\r\n\r\nrouter.prefix('/user')\r\n\r\nrouter.get('/fav', UserController.userSign)\r\n// router.get('/fav', async (ctx) => {\r\n//   console.log('/fav')\r\n//   ctx.body = {\r\n//     code: 200\r\n//   }\r\n// })\r\nrouter.post('/upUserInfo', UserController.upUserInfo)\r\n// 更新密码接口\r\nrouter.post('/upUserInfPwd', UserController.upUserInfPwd)\r\n// 获取我的消息\r\nrouter.get('/getMyMsg', UserController.getMyMsg)\r\n\r\nrouter.get('/user_list', UserController.getUserList)\r\n\r\n\r\n\r\nexport default router\r\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1632979265238
  },
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\api\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\api\\\\UserController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\api\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\api\\UserController.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\api\\UserController.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\api\\UserController.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\api\\",
        "sourceFileName": "UserController.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _SignRecord = _interopRequireDefault(require(\"../model/SignRecord\"));\n\nvar _Utils = require(\"../conmon/Utils\");\n\nvar _test = _interopRequireDefault(require(\"../model/test\"));\n\nvar _dayjs = _interopRequireDefault(require(\"dayjs\"));\n\nvar _mockjs = _interopRequireDefault(require(\"mockjs\"));\n\nvar _qs = _interopRequireDefault(require(\"qs\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass UserController {\n  constructor() {}\n\n  async cheshi(ctx) {\n    console.log('进入UserController.cheshi');\n    ctx.body = {\n      code: 200\n    };\n  } // 用户签到接口\n\n\n  async userSign(ctx) {\n    console.log('进入UserController.userSign'); // 取得用户id\n\n    const obj = await (0, _Utils.getJWTPayload)(ctx.header.authorization); // 查询用户上一次签到记录\n\n    console.log('取得用户id', obj);\n    const record = await _SignRecord.default.findByUid(obj._id);\n    console.log('取得用户签到记录', record);\n    const user = await _test.default.findById(obj._id);\n    console.log('取得用户信息', user);\n    let result;\n    let newRcord = {}; // 判断签到逻辑\n\n    if (record !== null) {\n      // 有历史签到数据\n      // 判断用户上一次签到记录的created时间是否和今天相同\n      // 如果相同,代表用户是在连续签到\n      // 如果当前时间和日期与用户上一次签到日期相同,说明用户已经签到\n      if ((0, _dayjs.default)(record.created).format('YYYY-MM-DD') === (0, _dayjs.default)().format('YYYY-MM-DD')) {\n        ctx.body = {\n          code: 500,\n          msg: '用户已经签到',\n          favs: user.favs,\n          count: user.count,\n          lastSign: record.created\n        };\n        return;\n      } else {\n        // 有上一次的签到记录,并且不与今天相同,进行连续签到的判断\n        // 如果相同,代表用户在连续签到\n        const count = user.count + 1;\n        let fav = 0; //判断签到时间\n\n        if ((0, _dayjs.default)(record.created).format('YYYY-MM-DD') === (0, _dayjs.default)().subtract(1, 'days').format('YYYY-MM-DD')) {\n          if (count < 5) {\n            fav = 5;\n          } else if (count >= 5 && count < 15) {\n            fav = 10;\n          } else if (count >= 15 && count < 30) {\n            fav = 15;\n          } else if (count >= 30 && count < 100) {\n            fav = 20;\n          } else if (count >= 100 && count < 365) {\n            fav = 30;\n          } else if (count >= 365) {\n            fav = 50;\n          }\n\n          await _test.default.updateOne({\n            _id: obj._id\n          }, {\n            // $inc方法相当于favs += fav\n            $inc: {\n              favs: fav,\n              count: 1\n            }\n          });\n          result = {\n            favs: user.favs + fav,\n            count: user.count + 1\n          };\n        } else {\n          fav = 5;\n          await _test.default.updateOne({\n            _id: obj._id\n          }, {\n            $set: {\n              count: 1\n            },\n            $inc: {\n              favs: fav\n            }\n          });\n          result = {\n            favs: user.favs + fav,\n            count: 1\n          };\n        } // 更新签到记录\n\n\n        newRcord = new _SignRecord.default({\n          uid: obj._id,\n          favs: fav,\n          lastSign: record.created\n        });\n        await newRcord.save();\n      }\n    } else {\n      // 无签到数据\n      // 保存用户的签到数据\n      await _test.default.updateOne({\n        _id: obj._id\n      }, {\n        $set: {\n          count: 1\n        },\n        $inc: {\n          favs: 5\n        }\n      });\n      newRcord = new _SignRecord.default({\n        uid: obj._id,\n        favs: 5,\n        lastSign: (0, _dayjs.default)().format('YYYY-MM-DD HH:mm:ss')\n      });\n      await newRcord.save(); // console.log(user.favs);\n\n      let favs;\n\n      if (user.favs == null || user.favs === 'undefined') {\n        favs = 5;\n      } else {\n        favs = user.favs + 5;\n      }\n\n      result = {\n        favs: favs,\n        // favs:  5,\n        count: 1\n      };\n    }\n\n    ctx.body = {\n      code: 200,\n      msg: '请求成功',\n      ...result,\n      lastSign: newRcord.created\n    };\n  } // async userSign (ctx) {\n  //   code: 200\n  //   msg: '请求成功'\n  // }\n\n\n  async upUserInfo(ctx) {\n    const obj = await (0, _Utils.getJWTPayload)(ctx.header.authorization);\n    console.log(obj);\n    const user = await _test.default.findById(obj._id);\n    console.log(user);\n    const pic = ctx.request.body.pic; // User.pic = pic\n\n    await _test.default.updateOne({\n      _id: obj._id\n    }, {\n      pic: pic\n    });\n    ctx.body = {\n      code: 200\n    };\n  } // 更新密码接口\n\n\n  async upUserInfPwd(ctx) {\n    const body = ctx.request.body;\n\n    if (body.oldPass !== body.pass && body.pass === body.checkPass) {\n      const obj = await (0, _Utils.getJWTPayload)(ctx.header.authorization);\n      const user = await _test.default.findById(obj._id);\n\n      if (user.password === body.oldPass) {\n        const result = await _test.default.updateOne({\n          _id: obj._id\n        }, {\n          $set: {\n            password: body.pass\n          }\n        });\n        ctx.body = {\n          code: 200,\n          msg: '修改成功'\n        };\n      } else {\n        ctx.body = {\n          code: 500,\n          msg: '密码不正确,请检查'\n        };\n      }\n    } else if (body.oldPass === body.pass) {\n      ctx.body = {\n        code: 500,\n        msg: '新旧密码相同,请检查'\n      };\n    } else if (body.pass !== body.checkPass) {\n      ctx.body = {\n        code: 500,\n        msg: '新密码和确认密码不同,请检查'\n      };\n    }\n  }\n\n  async getMyMsg(ctx) {\n    console.log('ctx: ', ctx);\n    const params = ctx.query;\n    console.log('params: ', params);\n    ctx.body = {\n      code: 200\n    };\n  }\n\n  async getUserList(ctx) {\n    let params = ctx.query;\n    params = _qs.default.parse(params);\n    const limit = parseInt(params.limit);\n    const page = parseInt(params.page) - 1;\n    const options = params.options;\n    console.log('options: ', options);\n    console.log('options: ', typeof options);\n    const result = await _test.default.getList(options, page, limit); // console.log('result: ', result);\n\n    const total = await _test.default.countlist(options); // const Random = Mock.Random\n    // console.log('params: ', params);\n    // let data = []\n    // for (let i = 0; i < limit; i++) {\n    //   const template = {\n    //     'name': Random.name(),\n    //     'created': Random.date(),\n    //     'username': Random.email(),\n    //     'pic': Random.image('200x100', '#50B347', '#FFF', 'Mock.js'),\n    //     'status': Random.boolean() ? '1' : '0',\n    //     'isVip': Random.integer(0, 8),\n    //     'favs': Random.integer(700, 1000),\n    //     'rules': Mock.mock({\n    //       \"array|1\": [\n    //         \"user\",\n    //         \"admin\",\n    //         \"super_admin\"\n    //       ]\n    //     })\n    //   }\n    //   data.push(template)\n    // }\n    // console.log('data: ', data);\n\n    ctx.body = {\n      code: 200,\n      data: result,\n      total: total\n    };\n  }\n\n  async addUser(ctx) {\n    const body = ctx.request.body;\n    console.log('body: ', body);\n    const result = await _test.default.findOne({\n      username: body.username\n    });\n\n    if (!result) {\n      if (body.pwd === body.password) {\n        const user = new _test.default(body);\n        const data = await user.save();\n        const dataObj = data.toJSON();\n        const arr = ['password'];\n        arr.map(item => {\n          delete dataObj[item];\n        });\n        ctx.body = {\n          code: 200,\n          data: dataObj,\n          msg: '新增成功'\n        };\n      } else {\n        ctx.body = {\n          code: 400,\n          msg: '密码校验不通过'\n        };\n      }\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: '用户名已存在'\n      };\n    }\n  }\n\n  async deleteUser(ctx) {\n    const body = ctx.request.body;\n    console.log('body: ', body);\n    const result = await _test.default.deleteMany({\n      _id: {\n        $in: body.idArr\n      }\n    });\n    ctx.body = {\n      code: 200\n    };\n  }\n\n} // export default new UserController()\n\n\nvar _default = new UserController();\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlVzZXJDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbIlVzZXJDb250cm9sbGVyIiwiY29uc3RydWN0b3IiLCJjaGVzaGkiLCJjdHgiLCJjb25zb2xlIiwibG9nIiwiYm9keSIsImNvZGUiLCJ1c2VyU2lnbiIsIm9iaiIsImhlYWRlciIsImF1dGhvcml6YXRpb24iLCJyZWNvcmQiLCJTaWduUmVjb3JkIiwiZmluZEJ5VWlkIiwiX2lkIiwidXNlciIsIlVzZXIiLCJmaW5kQnlJZCIsInJlc3VsdCIsIm5ld1Jjb3JkIiwiY3JlYXRlZCIsImZvcm1hdCIsIm1zZyIsImZhdnMiLCJjb3VudCIsImxhc3RTaWduIiwiZmF2Iiwic3VidHJhY3QiLCJ1cGRhdGVPbmUiLCIkaW5jIiwiJHNldCIsInVpZCIsInNhdmUiLCJ1cFVzZXJJbmZvIiwicGljIiwicmVxdWVzdCIsInVwVXNlckluZlB3ZCIsIm9sZFBhc3MiLCJwYXNzIiwiY2hlY2tQYXNzIiwicGFzc3dvcmQiLCJnZXRNeU1zZyIsInBhcmFtcyIsInF1ZXJ5IiwiZ2V0VXNlckxpc3QiLCJxcyIsInBhcnNlIiwibGltaXQiLCJwYXJzZUludCIsInBhZ2UiLCJvcHRpb25zIiwiZ2V0TGlzdCIsInRvdGFsIiwiY291bnRsaXN0IiwiZGF0YSIsImFkZFVzZXIiLCJmaW5kT25lIiwidXNlcm5hbWUiLCJwd2QiLCJkYXRhT2JqIiwidG9KU09OIiwiYXJyIiwibWFwIiwiaXRlbSIsImRlbGV0ZVVzZXIiLCJkZWxldGVNYW55IiwiJGluIiwiaWRBcnIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQUlBLE1BQU1BLGNBQU4sQ0FBcUI7QUFDbkJDLEVBQUFBLFdBQVcsR0FBRyxDQUNiOztBQUNXLFFBQU5DLE1BQU0sQ0FBRUMsR0FBRixFQUFPO0FBQ2pCQyxJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSx5QkFBWjtBQUNBRixJQUFBQSxHQUFHLENBQUNHLElBQUos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QUosQ0FBWTlCLElBQXpCO0FBQ0FGLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLFFBQVosRUFBc0JDLElBQXRCO0FBQ0EsVUFBTWEsTUFBTSxHQUFHLE1BQU1GLGNBQUtpRCxVQUFMLENBQWdCO0FBQ25DbkQsTUFBQUEsR0FBRyxFQUFFO0FBQ0hvRCxRQUFBQSxHQUFHLEVBQUU3RCxJQUFJLENBQUM4RDtBQURQO0FBRDhCLEtBQWhCLENBQXJCO0FBS0FqRSxJQUFBQSxHQUFHLENBQUNHLElBQUosR0FBVztBQUNUQyxNQUFBQSxJQUFJLEVBQUU7QUFERyxLQUFYO0FBR0Q7O0FBeFJrQixDLENBNFJyQjs7O2VBQ2UsSUFBSVAsY0FBSixFIiwic291cmNlUm9vdCI6IkQ6XFxIVE1MK2Nzcytqc1xcbm9kZV9rb2FcXHNyY1xcYXBpXFwiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU2lnblJlY29yZCBmcm9tICcuLi9tb2RlbC9TaWduUmVjb3JkJztcclxuaW1wb3J0IHsgZ2V0SldUUGF5bG9hZCB9IGZyb20gJy4uL2Nvbm1vbi9VdGlscyc7XHJcbmltcG9ydCBVc2VyIGZyb20gJy4uL21vZGVsL3Rlc3QnO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ2RheWpzJztcclxuaW1wb3J0IE1vY2sgZnJvbSAnbW9ja2pzJztcclxuaW1wb3J0IHFzIGZyb20gJ3FzJztcclxuXHJcblxyXG5cclxuY2xhc3MgVXNlckNvbnRyb2xsZXIge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gIH1cclxuICBhc3luYyBjaGVzaGkgKGN0eCkge1xyXG4gICAgY29uc29sZS5sb2coJ+i/m+WFpVVzZXJDb250cm9sbGVyLmNoZXNoaScpO1xyXG4gICAgY3R4LmJvZHkgPSB7XHJcbiAgICAgIGNvZGU6IDIwMFxyXG4gICAgfVxyXG4gIH1cclxuICAvLyDnlKjmiLfnrb7liLDmjqXlj6NcclxuICBhc3luYyB1c2VyU2lnbiAoY3R4KSB7XHJcbiAgICBjb25zb2xlLmxvZygn6L+b5YWlVXNlckNvbnRyb2xsZXIudXNlclNpZ24nKTtcclxuICAgIC8vIOWPluW+l+eUqOaIt2lkXHJcbiAgICBjb25zdCBvYmogPSBhd2FpdCBnZXRKV1RQYXlsb2FkKGN0eC5oZWFkZXIuYXV0aG9yaXphdGlvbilcclxuICAgIC8vIOafpeivoueUqOaIt+S4iuS4gOasoeetvuWIsOiusOW9lVxyXG4gICAgY29uc29sZS5sb2coJ+WPluW+l+eUqOaIt2lkJywgb2JqKTtcclxuICAgIGNvbnN0IHJlY29yZCA9IGF3YWl0IFNpZ25SZWNvcmQuZmluZEJ5VWlkKG9iai5faWQpXHJcbiAgICBjb25zb2xlLmxvZygn5Y+W5b6X55So5oi3562+5Yiw6K6w5b2VJywgcmVjb3JkKTtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKG9iai5faWQpXHJcbiAgICBjb25zb2xlLmxvZygn5Y+W5b6X55So5oi35L+h5oGvJywgdXNlcik7XHJcbiAgICBsZXQgcmVzdWx0XHJcbiAgICBsZXQgbmV3UmNvcmQgPSB7fVxyXG4gICAgLy8g5Yik5pat562+5Yiw6YC76L6RXHJcbiAgICBpZiAocmVjb3JkICE9PSBudWxsKSB7XHJcbiAgICAgIC8vIOacieWOhuWPsuetvuWIsOaVsOaNrlxyXG4gICAgICAvLyDliKTmlq3nlKjmiLfkuIrkuIDmrKHnrb7liLDorrDlvZXnmoRjcmVhdGVk5pe26Ze05piv5ZCm5ZKM5LuK5aSp55u45ZCMXHJcbiAgICAgIC8vIOWmguaenOebuOWQjCzku6PooajnlKjmiLfmmK/lnKjov57nu63nrb7liLBcclxuICAgICAgLy8g5aaC5p6c5b2T5YmN5pe26Ze05ZKM5pel5pyf5LiO55So5oi35LiK5LiA5qyh562+5Yiw5pel5pyf55u45ZCMLOivtOaYjueUqOaIt+W3sue7j+etvuWIsFxyXG4gICAgICBpZiAobW9tZW50KHJlY29yZC5jcmVhdGVkKS5mb3JtYXQoJ1lZWVktTU0tREQnKSA9PT0gbW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NLUREJykpIHtcclxuICAgICAgICBjdHguYm9keSA9IHtcclxuICAgICAgICAgIGNvZGU6IDUwMCxcclxuICAgICAgICAgIG1zZzogJ+eUqOaIt+W3sue7j+etvuWIsCcsXHJcbiAgICAgICAgICBmYXZzOiB1c2VyLmZhdnMsXHJcbiAgICAgICAgICBjb3VudDogdXNlci5jb3VudCxcclxuICAgICAgICAgIGxhc3RTaWduOiByZWNvcmQuY3JlYXRlZFxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm5cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyDmnInkuIrkuIDmrKHnmoTnrb7liLDorrDlvZUs5bm25LiU5LiN5LiO5LuK5aSp55u45ZCMLOi/m+ihjOi/nue7reetvuWIsOeahOWIpOaWrVxyXG4gICAgICAgIC8vIOWmguaenOebuOWQjCzku6PooajnlKjmiLflnKjov57nu63nrb7liLBcclxuICAgICAgICBjb25zdCBjb3VudCA9IHVzZXIuY291bnQgKyAxXHJcbiAgICAgICAgbGV0IGZhdiA9IDBcclxuICAgICAgICAvL+WIpOaWreetvuWIsOaXtumXtFxyXG4gICAgICAgIGlmIChtb21lbnQocmVjb3JkLmNyZWF0ZWQpLmZvcm1hdCgnWVlZWS1NTS1ERCcpID09PSBtb21lbnQoKS5zdWJ0cmFjdCgxLCAnZGF5cycpLmZvcm1hdCgnWVlZWS1NTS1ERCcpKSB7XHJcbiAgICAgICAgICBpZiAoY291bnQgPCA1KSB7XHJcbiAgICAgICAgICAgIGZhdiA9IDVcclxuICAgICAgICAgIH0gZWxzZSBpZiAoY291bnQgPj0gNSAmJiBjb3VudCA8IDE1KSB7XHJcbiAgICAgICAgICAgIGZhdiA9IDEwXHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvdW50ID49IDE1ICYmIGNvdW50IDwgMzApIHtcclxuICAgICAgICAgICAgZmF2ID0gMTVcclxuICAgICAgICAgIH0gZWxzZSBpZiAoY291bnQgPj0gMzAgJiYgY291bnQgPCAxMDApIHtcclxuICAgICAgICAgICAgZmF2ID0gMjBcclxuICAgICAgICAgIH0gZWxzZSBpZiAoY291bnQgPj0gMTAwICYmIGNvdW50IDwgMzY1KSB7XHJcbiAgICAgICAgICAgIGZhdiA9IDMwXHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvdW50ID49IDM2NSkge1xyXG4gICAgICAgICAgICBmYXYgPSA1MFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYXdhaXQgVXNlci51cGRhdGVPbmUoXHJcbiAgICAgICAgICAgIHsgX2lkOiBvYmouX2lkIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAvLyAkaW5j5pa55rOV55u45b2T5LqOZmF2cyArPSBmYXZcclxuICAgICAgICAgICAgICAkaW5jOiB7IGZhdnM6IGZhdiwgY291bnQ6IDEgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgIGZhdnM6IHVzZXIuZmF2cyArIGZhdixcclxuICAgICAgICAgICAgY291bnQ6IHVzZXIuY291bnQgKyAxXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGZhdiA9IDVcclxuICAgICAgICAgIGF3YWl0IFVzZXIudXBkYXRlT25lKFxyXG4gICAgICAgICAgICB7IF9pZDogb2JqLl9pZCB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgJHNldDogeyBjb3VudDogMSB9LFxyXG4gICAgICAgICAgICAgICRpbmM6IHsgZmF2czogZmF2IH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICBmYXZzOiB1c2VyLmZhdnMgKyBmYXYsXHJcbiAgICAgICAgICAgIGNvdW50OiAxXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOabtOaWsOetvuWIsOiusOW9lVxyXG4gICAgICAgIG5ld1Jjb3JkID0gbmV3IFNpZ25SZWNvcmQoe1xyXG4gICAgICAgICAgdWlkOiBvYmouX2lkLFxyXG4gICAgICAgICAgZmF2czogZmF2LFxyXG4gICAgICAgICAgbGFzdFNpZ246IHJlY29yZC5jcmVhdGVkXHJcbiAgICAgICAgfSlcclxuICAgICAgICBhd2FpdCBuZXdSY29yZC5zYXZlKClcclxuICAgICAgfVxyXG5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIOaXoOetvuWIsOaVsOaNrlxyXG4gICAgICAvLyDkv53lrZjnlKjmiLfnmoTnrb7liLDmlbDmja5cclxuICAgICAgYXdhaXQgVXNlci51cGRhdGVPbmUoe1xyXG4gICAgICAgIF9pZDogb2JqLl9pZFxyXG4gICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICRzZXQ6IHsgY291bnQ6IDEgfSxcclxuICAgICAgICAgICRpbmM6IHsgZmF2czogNSB9XHJcbiAgICAgICAgfSlcclxuICAgICAgbmV3UmNvcmQgPSBuZXcgU2lnblJlY29yZCh7XHJcbiAgICAgICAgdWlkOiBvYmouX2lkLFxyXG4gICAgICAgIGZhdnM6IDUsXHJcbiAgICAgICAgbGFzdFNpZ246IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpXHJcbiAgICAgIH0pXHJcbiAgICAgIGF3YWl0IG5ld1Jjb3JkLnNhdmUoKVxyXG4gICAgICAvLyBjb25zb2xlLmxvZyh1c2VyLmZhdnMpO1xyXG4gICAgICBsZXQgZmF2c1xyXG4gICAgICBpZiAodXNlci5mYXZzID09IG51bGwgfHwgdXNlci5mYXZzID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGZhdnMgPSA1XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZmF2cyA9IHVzZXIuZmF2cyArIDVcclxuICAgICAgfVxyXG4gICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgZmF2czogZmF2cyxcclxuICAgICAgICAvLyBmYXZzOiAgNSxcclxuICAgICAgICBjb3VudDogMVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjdHguYm9keSA9IHtcclxuICAgICAgY29kZTogMjAwLFxyXG4gICAgICBtc2c6ICfor7fmsYLmiJDlip8nLFxyXG4gICAgICAuLi5yZXN1bHQsXHJcbiAgICAgIGxhc3RTaWduOiBuZXdSY29yZC5jcmVhdGVkXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBhc3luYyB1c2VyU2lnbiAoY3R4KSB7XHJcbiAgLy8gICBjb2RlOiAyMDBcclxuICAvLyAgIG1zZzogJ+ivt+axguaIkOWKnydcclxuICAvLyB9XHJcbiAgYXN5bmMgdXBVc2VySW5mbyAoY3R4KSB7XHJcbiAgICBjb25zdCBvYmogPSBhd2FpdCBnZXRKV1RQYXlsb2FkKGN0eC5oZWFkZXIuYXV0aG9yaXphdGlvbilcclxuICAgIGNvbnNvbGUubG9nKG9iaik7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChvYmouX2lkKVxyXG4gICAgY29uc29sZS5sb2codXNlcik7XHJcbiAgICBjb25zdCBwaWMgPSBjdHgucmVxdWVzdC5ib2R5LnBpY1xyXG4gICAgLy8gVXNlci5waWMgPSBwaWNcclxuICAgIGF3YWl0IFVzZXIudXBkYXRlT25lKHtcclxuICAgICAgX2lkOiBvYmouX2lkXHJcbiAgICB9LCB7XHJcbiAgICAgIHBpYzogcGljXHJcbiAgICB9KVxyXG4gICAgY3R4LmJvZHkgPSB7XHJcbiAgICAgIGNvZGU6IDIwMFxyXG4gICAgfVxyXG4gIH1cclxuICAvLyDmm7TmlrDlr4bnoIHmjqXlj6NcclxuICBhc3luYyB1cFVzZXJJbmZQd2QgKGN0eCkge1xyXG4gICAgY29uc3QgYm9keSA9IGN0eC5yZXF1ZXN0LmJvZHlcclxuICAgIGlmIChib2R5Lm9sZFBhc3MgIT09IGJvZHkucGFzcyAmJiBib2R5LnBhc3MgPT09IGJvZHkuY2hlY2tQYXNzKSB7XHJcbiAgICAgIGNvbnN0IG9iaiA9IGF3YWl0IGdldEpXVFBheWxvYWQoY3R4LmhlYWRlci5hdXRob3JpemF0aW9uKVxyXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChvYmouX2lkKVxyXG4gICAgICBpZiAodXNlci5wYXNzd29yZCA9PT0gYm9keS5vbGRQYXNzKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgVXNlci51cGRhdGVPbmUoe1xyXG4gICAgICAgICAgX2lkOiBvYmouX2lkXHJcbiAgICAgICAgfSwge1xyXG4gICAgICAgICAgJHNldDogeyBwYXNzd29yZDogYm9keS5wYXNzIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIGN0eC5ib2R5ID0ge1xyXG4gICAgICAgICAgY29kZTogMjAwLFxyXG4gICAgICAgICAgbXNnOiAn5L+u5pS55oiQ5YqfJ1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjdHguYm9keSA9IHtcclxuICAgICAgICAgIGNvZGU6IDUwMCxcclxuICAgICAgICAgIG1zZzogJ+WvhueggeS4jeato+ehrizor7fmo4Dmn6UnXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKGJvZHkub2xkUGFzcyA9PT0gYm9keS5wYXNzKSB7XHJcbiAgICAgIGN0eC5ib2R5ID0ge1xyXG4gICAgICAgIGNvZGU6IDUwMCxcclxuICAgICAgICBtc2c6ICfmlrDml6flr4bnoIHnm7jlkIws6K+35qOA5p+lJ1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKGJvZHkucGFzcyAhPT0gYm9keS5jaGVja1Bhc3MpIHtcclxuICAgICAgY3R4LmJvZHkgPSB7XHJcbiAgICAgICAgY29kZTogNTAwLFxyXG4gICAgICAgIG1zZzogJ+aWsOWvhueggeWSjOehruiupOWvhueggeS4jeWQjCzor7fmo4Dmn6UnXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGdldE15TXNnIChjdHgpIHtcclxuICAgIGNvbnNvbGUubG9nKCdjdHg6ICcsIGN0eCk7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBjdHgucXVlcnlcclxuICAgIGNvbnNvbGUubG9nKCdwYXJhbXM6ICcsIHBhcmFtcyk7XHJcbiAgICBjdHguYm9keSA9IHtcclxuICAgICAgY29kZTogMjAwXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRVc2VyTGlzdCAoY3R4KSB7XHJcbiAgICBsZXQgcGFyYW1zID0gY3R4LnF1ZXJ5XHJcbiAgICBwYXJhbXMgPSBxcy5wYXJzZShwYXJhbXMpXHJcbiAgICBjb25zdCBsaW1pdCA9IHBhcnNlSW50KHBhcmFtcy5saW1pdClcclxuICAgIGNvbnN0IHBhZ2UgPSBwYXJzZUludChwYXJhbXMucGFnZSkgLSAxXHJcbiAgICBjb25zdCBvcHRpb25zID0gcGFyYW1zLm9wdGlvbnNcclxuICAgIGNvbnNvbGUubG9nKCdvcHRpb25zOiAnLCBvcHRpb25zKTtcclxuICAgIGNvbnNvbGUubG9nKCdvcHRpb25zOiAnLCB0eXBlb2Ygb3B0aW9ucyk7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBVc2VyLmdldExpc3Qob3B0aW9ucywgcGFnZSwgbGltaXQpXHJcbiAgICAvLyBjb25zb2xlLmxvZygncmVzdWx0OiAnLCByZXN1bHQpO1xyXG4gICAgY29uc3QgdG90YWwgPSBhd2FpdCBVc2VyLmNvdW50bGlzdChvcHRpb25zKVxyXG5cclxuICAgIC8vIGNvbnN0IFJhbmRvbSA9IE1vY2suUmFuZG9tXHJcbiAgICAvLyBjb25zb2xlLmxvZygncGFyYW1zOiAnLCBwYXJhbXMpO1xyXG4gICAgLy8gbGV0IGRhdGEgPSBbXVxyXG4gICAgLy8gZm9yIChsZXQgaSA9IDA7IGkgPCBsaW1pdDsgaSsrKSB7XHJcbiAgICAvLyAgIGNvbnN0IHRlbXBsYXRlID0ge1xyXG4gICAgLy8gICAgICduYW1lJzogUmFuZG9tLm5hbWUoKSxcclxuICAgIC8vICAgICAnY3JlYXRlZCc6IFJhbmRvbS5kYXRlKCksXHJcbiAgICAvLyAgICAgJ3VzZXJuYW1lJzogUmFuZG9tLmVtYWlsKCksXHJcbiAgICAvLyAgICAgJ3BpYyc6IFJhbmRvbS5pbWFnZSgnMjAweDEwMCcsICcjNTBCMzQ3JywgJyNGRkYnLCAnTW9jay5qcycpLFxyXG4gICAgLy8gICAgICdzdGF0dXMnOiBSYW5kb20uYm9vbGVhbigpID8gJzEnIDogJzAnLFxyXG4gICAgLy8gICAgICdpc1ZpcCc6IFJhbmRvbS5pbnRlZ2VyKDAsIDgpLFxyXG4gICAgLy8gICAgICdmYXZzJzogUmFuZG9tLmludGVnZXIoNzAwLCAxMDAwKSxcclxuICAgIC8vICAgICAncnVsZXMnOiBNb2NrLm1vY2soe1xyXG4gICAgLy8gICAgICAgXCJhcnJheXwxXCI6IFtcclxuICAgIC8vICAgICAgICAgXCJ1c2VyXCIsXHJcbiAgICAvLyAgICAgICAgIFwiYWRtaW5cIixcclxuICAgIC8vICAgICAgICAgXCJzdXBlcl9hZG1pblwiXHJcbiAgICAvLyAgICAgICBdXHJcbiAgICAvLyAgICAgfSlcclxuICAgIC8vICAgfVxyXG4gICAgLy8gICBkYXRhLnB1c2godGVtcGxhdGUpXHJcbiAgICAvLyB9XHJcbiAgICAvLyBjb25zb2xlLmxvZygnZGF0YTogJywgZGF0YSk7XHJcblxyXG5cclxuXHJcbiAgICBjdHguYm9keSA9IHtcclxuICAgICAgY29kZTogMjAwLFxyXG4gICAgICBkYXRhOiByZXN1bHQsXHJcbiAgICAgIHRvdGFsOiB0b3RhbFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgYWRkVXNlciAoY3R4KSB7XHJcbiAgICBjb25zdCBib2R5ID0gY3R4LnJlcXVlc3QuYm9keVxyXG4gICAgY29uc29sZS5sb2coJ2JvZHk6ICcsIGJvZHkpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgVXNlci5maW5kT25lKHsgdXNlcm5hbWU6IGJvZHkudXNlcm5hbWUgfSlcclxuICAgIGlmICghcmVzdWx0KSB7XHJcbiAgICAgIGlmIChib2R5LnB3ZCA9PT0gYm9keS5wYXNzd29yZCkge1xyXG4gICAgICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlcihib2R5KVxyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB1c2VyLnNhdmUoKVxyXG4gICAgICAgIGNvbnN0IGRhdGFPYmogPSBkYXRhLnRvSlNPTigpXHJcbiAgICAgICAgY29uc3QgYXJyID0gWydwYXNzd29yZCddXHJcbiAgICAgICAgYXJyLm1hcChpdGVtID0+IHtcclxuICAgICAgICAgIGRlbGV0ZSBkYXRhT2JqW2l0ZW1dXHJcbiAgICAgICAgfSlcclxuICAgICAgICBjdHguYm9keSA9IHtcclxuICAgICAgICAgIGNvZGU6IDIwMCxcclxuICAgICAgICAgIGRhdGE6IGRhdGFPYmosXHJcbiAgICAgICAgICBtc2c6ICfmlrDlop7miJDlip8nXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGN0eC5ib2R5ID0ge1xyXG4gICAgICAgICAgY29kZTogNDAwLFxyXG4gICAgICAgICAgbXNnOiAn5a+G56CB5qCh6aqM5LiN6YCa6L+HJ1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY3R4LmJvZHkgPSB7XHJcbiAgICAgICAgY29kZTogNTAwLFxyXG4gICAgICAgIG1zZzogJ+eUqOaIt+WQjeW3suWtmOWcqCdcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZGVsZXRlVXNlciAoY3R4KSB7XHJcbiAgICBjb25zdCBib2R5ID0gY3R4LnJlcXVlc3QuYm9keVxyXG4gICAgY29uc29sZS5sb2coJ2JvZHk6ICcsIGJvZHkpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgVXNlci5kZWxldGVNYW55KHtcclxuICAgICAgX2lkOiB7XHJcbiAgICAgICAgJGluOiBib2R5LmlkQXJyXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICBjdHguYm9keSA9IHtcclxuICAgICAgY29kZTogMjAwXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5cclxuLy8gZXhwb3J0IGRlZmF1bHQgbmV3IFVzZXJDb250cm9sbGVyKClcclxuZXhwb3J0IGRlZmF1bHQgbmV3IFVzZXJDb250cm9sbGVyKCkiXX0=",
    "map": {
      "version": 3,
      "sources": [
        "UserController.js"
      ],
      "names": [
        "UserController",
        "constructor",
        "cheshi",
        "ctx",
        "console",
        "log",
        "body",
        "code",
        "userSign",
        "obj",
        "header",
        "authorization",
        "record",
        "SignRecord",
        "findByUid",
        "_id",
        "user",
        "User",
        "findById",
        "result",
        "newRcord",
        "created",
        "format",
        "msg",
        "favs",
        "count",
        "lastSign",
        "fav",
        "subtract",
        "updateOne",
        "$inc",
        "$set",
        "uid",
        "save",
        "upUserInfo",
        "pic",
        "request",
        "upUserInfPwd",
        "oldPass",
        "pass",
        "checkPass",
        "password",
        "getMyMsg",
        "params",
        "query",
        "getUserList",
        "qs",
        "parse",
        "limit",
        "parseInt",
        "page",
        "options",
        "getList",
        "total",
        "countlist",
        "data",
        "addUser",
        "findOne",
        "username",
        "pwd",
        "dataObj",
        "toJSON",
        "arr",
        "map",
        "item",
        "deleteUser",
        "deleteMany",
        "$in",
        "idArr"
      ],
      "mappings": "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",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\api\\",
      "sourcesContent": [
        "import SignRecord from '../model/SignRecord';\r\nimport { getJWTPayload } from '../conmon/Utils';\r\nimport User from '../model/test';\r\nimport moment from 'dayjs';\r\nimport Mock from 'mockjs';\r\nimport qs from 'qs';\r\n\r\n\r\n\r\nclass UserController {\r\n  constructor() {\r\n  }\r\n  async cheshi (ctx) {\r\n    console.log('进入UserController.cheshi');\r\n    ctx.body = {\r\n      code: 200\r\n    }\r\n  }\r\n  // 用户签到接口\r\n  async userSign (ctx) {\r\n    console.log('进入UserController.userSign');\r\n    // 取得用户id\r\n    const obj = await getJWTPayload(ctx.header.authorization)\r\n    // 查询用户上一次签到记录\r\n    console.log('取得用户id', obj);\r\n    const record = await SignRecord.findByUid(obj._id)\r\n    console.log('取得用户签到记录', record);\r\n    const user = await User.findById(obj._id)\r\n    console.log('取得用户信息', user);\r\n    let result\r\n    let newRcord = {}\r\n    // 判断签到逻辑\r\n    if (record !== null) {\r\n      // 有历史签到数据\r\n      // 判断用户上一次签到记录的created时间是否和今天相同\r\n      // 如果相同,代表用户是在连续签到\r\n      // 如果当前时间和日期与用户上一次签到日期相同,说明用户已经签到\r\n      if (moment(record.created).format('YYYY-MM-DD') === moment().format('YYYY-MM-DD')) {\r\n        ctx.body = {\r\n          code: 500,\r\n          msg: '用户已经签到',\r\n          favs: user.favs,\r\n          count: user.count,\r\n          lastSign: record.created\r\n        }\r\n        return\r\n      } else {\r\n        // 有上一次的签到记录,并且不与今天相同,进行连续签到的判断\r\n        // 如果相同,代表用户在连续签到\r\n        const count = user.count + 1\r\n        let fav = 0\r\n        //判断签到时间\r\n        if (moment(record.created).format('YYYY-MM-DD') === moment().subtract(1, 'days').format('YYYY-MM-DD')) {\r\n          if (count < 5) {\r\n            fav = 5\r\n          } else if (count >= 5 && count < 15) {\r\n            fav = 10\r\n          } else if (count >= 15 && count < 30) {\r\n            fav = 15\r\n          } else if (count >= 30 && count < 100) {\r\n            fav = 20\r\n          } else if (count >= 100 && count < 365) {\r\n            fav = 30\r\n          } else if (count >= 365) {\r\n            fav = 50\r\n          }\r\n          await User.updateOne(\r\n            { _id: obj._id },\r\n            {\r\n              // $inc方法相当于favs += fav\r\n              $inc: { favs: fav, count: 1 }\r\n            }\r\n          )\r\n          result = {\r\n            favs: user.favs + fav,\r\n            count: user.count + 1\r\n          }\r\n        } else {\r\n          fav = 5\r\n          await User.updateOne(\r\n            { _id: obj._id },\r\n            {\r\n              $set: { count: 1 },\r\n              $inc: { favs: fav }\r\n            }\r\n          )\r\n          result = {\r\n            favs: user.favs + fav,\r\n            count: 1\r\n          }\r\n        }\r\n        // 更新签到记录\r\n        newRcord = new SignRecord({\r\n          uid: obj._id,\r\n          favs: fav,\r\n          lastSign: record.created\r\n        })\r\n        await newRcord.save()\r\n      }\r\n\r\n    } else {\r\n      // 无签到数据\r\n      // 保存用户的签到数据\r\n      await User.updateOne({\r\n        _id: obj._id\r\n      },\r\n        {\r\n          $set: { count: 1 },\r\n          $inc: { favs: 5 }\r\n        })\r\n      newRcord = new SignRecord({\r\n        uid: obj._id,\r\n        favs: 5,\r\n        lastSign: moment().format('YYYY-MM-DD HH:mm:ss')\r\n      })\r\n      await newRcord.save()\r\n      // console.log(user.favs);\r\n      let favs\r\n      if (user.favs == null || user.favs === 'undefined') {\r\n        favs = 5\r\n      } else {\r\n        favs = user.favs + 5\r\n      }\r\n      result = {\r\n        favs: favs,\r\n        // favs:  5,\r\n        count: 1\r\n      }\r\n    }\r\n    ctx.body = {\r\n      code: 200,\r\n      msg: '请求成功',\r\n      ...result,\r\n      lastSign: newRcord.created\r\n    }\r\n  }\r\n\r\n  // async userSign (ctx) {\r\n  //   code: 200\r\n  //   msg: '请求成功'\r\n  // }\r\n  async upUserInfo (ctx) {\r\n    const obj = await getJWTPayload(ctx.header.authorization)\r\n    console.log(obj);\r\n    const user = await User.findById(obj._id)\r\n    console.log(user);\r\n    const pic = ctx.request.body.pic\r\n    // User.pic = pic\r\n    await User.updateOne({\r\n      _id: obj._id\r\n    }, {\r\n      pic: pic\r\n    })\r\n    ctx.body = {\r\n      code: 200\r\n    }\r\n  }\r\n  // 更新密码接口\r\n  async upUserInfPwd (ctx) {\r\n    const body = ctx.request.body\r\n    if (body.oldPass !== body.pass && body.pass === body.checkPass) {\r\n      const obj = await getJWTPayload(ctx.header.authorization)\r\n      const user = await User.findById(obj._id)\r\n      if (user.password === body.oldPass) {\r\n        const result = await User.updateOne({\r\n          _id: obj._id\r\n        }, {\r\n          $set: { password: body.pass }\r\n        })\r\n        ctx.body = {\r\n          code: 200,\r\n          msg: '修改成功'\r\n        }\r\n      } else {\r\n        ctx.body = {\r\n          code: 500,\r\n          msg: '密码不正确,请检查'\r\n        }\r\n      }\r\n    } else if (body.oldPass === body.pass) {\r\n      ctx.body = {\r\n        code: 500,\r\n        msg: '新旧密码相同,请检查'\r\n      }\r\n    } else if (body.pass !== body.checkPass) {\r\n      ctx.body = {\r\n        code: 500,\r\n        msg: '新密码和确认密码不同,请检查'\r\n      }\r\n    }\r\n  }\r\n\r\n  async getMyMsg (ctx) {\r\n    console.log('ctx: ', ctx);\r\n    const params = ctx.query\r\n    console.log('params: ', params);\r\n    ctx.body = {\r\n      code: 200\r\n    }\r\n  }\r\n\r\n  async getUserList (ctx) {\r\n    let params = ctx.query\r\n    params = qs.parse(params)\r\n    const limit = parseInt(params.limit)\r\n    const page = parseInt(params.page) - 1\r\n    const options = params.options\r\n    console.log('options: ', options);\r\n    console.log('options: ', typeof options);\r\n    const result = await User.getList(options, page, limit)\r\n    // console.log('result: ', result);\r\n    const total = await User.countlist(options)\r\n\r\n    // const Random = Mock.Random\r\n    // console.log('params: ', params);\r\n    // let data = []\r\n    // for (let i = 0; i < limit; i++) {\r\n    //   const template = {\r\n    //     'name': Random.name(),\r\n    //     'created': Random.date(),\r\n    //     'username': Random.email(),\r\n    //     'pic': Random.image('200x100', '#50B347', '#FFF', 'Mock.js'),\r\n    //     'status': Random.boolean() ? '1' : '0',\r\n    //     'isVip': Random.integer(0, 8),\r\n    //     'favs': Random.integer(700, 1000),\r\n    //     'rules': Mock.mock({\r\n    //       \"array|1\": [\r\n    //         \"user\",\r\n    //         \"admin\",\r\n    //         \"super_admin\"\r\n    //       ]\r\n    //     })\r\n    //   }\r\n    //   data.push(template)\r\n    // }\r\n    // console.log('data: ', data);\r\n\r\n\r\n\r\n    ctx.body = {\r\n      code: 200,\r\n      data: result,\r\n      total: total\r\n    }\r\n  }\r\n\r\n  async addUser (ctx) {\r\n    const body = ctx.request.body\r\n    console.log('body: ', body);\r\n    const result = await User.findOne({ username: body.username })\r\n    if (!result) {\r\n      if (body.pwd === body.password) {\r\n        const user = new User(body)\r\n        const data = await user.save()\r\n        const dataObj = data.toJSON()\r\n        const arr = ['password']\r\n        arr.map(item => {\r\n          delete dataObj[item]\r\n        })\r\n        ctx.body = {\r\n          code: 200,\r\n          data: dataObj,\r\n          msg: '新增成功'\r\n        }\r\n      } else {\r\n        ctx.body = {\r\n          code: 400,\r\n          msg: '密码校验不通过'\r\n        }\r\n      }\r\n    } else {\r\n      ctx.body = {\r\n        code: 500,\r\n        msg: '用户名已存在'\r\n      }\r\n    }\r\n  }\r\n\r\n  async deleteUser (ctx) {\r\n    const body = ctx.request.body\r\n    console.log('body: ', body);\r\n    const result = await User.deleteMany({\r\n      _id: {\r\n        $in: body.idArr\r\n      }\r\n    })\r\n    ctx.body = {\r\n      code: 200\r\n    }\r\n  }\r\n}\r\n\r\n\r\n// export default new UserController()\r\nexport default new UserController()"
      ]
    },
    "sourceType": "script",
    "mtime": 1633961379917
  },
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\model\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\model\\\\SignRecord.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\model\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\model\\SignRecord.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\model\\SignRecord.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\model\\SignRecord.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\model\\",
        "sourceFileName": "SignRecord.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _DBHelpler = _interopRequireDefault(require(\"../config/DBHelpler\"));\n\nvar _dayjs = _interopRequireDefault(require(\"dayjs\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Schema = _DBHelpler.default.Schema;\nconst SignRecordSchema = new Schema({\n  uid: {\n    type: String,\n    ref: 'user'\n  },\n  created: {\n    type: Date\n  },\n  favs: {\n    type: Number\n  },\n  lastSign: {\n    type: Date\n  }\n});\nSignRecordSchema.pre('save', function (next) {\n  this.created = (0, _dayjs.default)().format('YYYY-MM-DD HH:mm:ss');\n  next();\n});\nSignRecordSchema.statics = {\n  findByUid: function (uid) {\n    return this.findOne({\n      uid: uid\n    }).sort({\n      created: -1\n    });\n  }\n};\n\nconst SignRecord = _DBHelpler.default.model('sign_record', SignRecordSchema);\n\nvar _default = SignRecord;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlNpZ25SZWNvcmQuanMiXSwibmFtZXMiOlsiU2NoZW1hIiwibW9uZ29vc2UiLCJTaWduUmVjb3JkU2NoZW1hIiwidWlkIiwidHlwZSIsIlN0cmluZyIsInJlZiIsImNyZWF0ZWQiLCJEYXRlIiwiZmF2cyIsIk51bWJlciIsImxhc3RTaWduIiwicHJlIiwibmV4dCIsImZvcm1hdCIsInN0YXRpY3MiLCJmaW5kQnlVaWQiLCJmaW5kT25lIiwic29ydCIsIlNpZ25SZWNvcmQiLCJtb2RlbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUEsTUFBTUEsTUFBTSxHQUFHQyxtQkFBU0QsTUFBeEI7QUFFQSxNQUFNRSxnQkFBZ0IsR0FBRyxJQUFJRixNQUFKLENBQVc7QUFDbENHLEVBQUFBLEdBQUcsRUFBRTtBQUFDQyxJQUFBQSxJQUFJLEVBQUNDLE1BQU47QUFBY0MsSUFBQUEsR0FBRyxFQUFFO0FBQW5CLEdBRDZCO0FBRWxDQyxFQUFBQSxPQUFPLEVBQUU7QUFBQ0gsSUFBQUEsSUFBSSxFQUFDSTtBQUFOLEdBRnlCO0FBR2xDQyxFQUFBQSxJQUFJLEVBQUU7QUFBQ0wsSUFBQUEsSUFBSSxFQUFFTTtBQUFQLEdBSDRCO0FBSWxDQyxFQUFBQSxRQUFRLEVBQUU7QUFBQ1AsSUFBQUEsSUFBSSxFQUFDSTtBQUFOO0FBSndCLENBQVgsQ0FBekI7QUFPQU4sZ0JBQWdCLENBQUNVLEdBQWpCLENBQXFCLE1BQXJCLEVBQTZCLFVBQVNDLElBQVQsRUFBZTtBQUMxQyxPQUFLTixPQUFMLEdBQWUsc0JBQVNPLE1BQVQsQ0FBZ0IscUJBQWhCLENBQWY7QUFDQUQsRUFBQUEsSUFBSTtBQUNMLENBSEQ7QUFLQVgsZ0JBQWdCLENBQUNhLE9BQWpCLEdBQTBCO0FBQ3hCQyxFQUFBQSxTQUFTLEVBQUUsVUFBU2IsR0FBVCxFQUFjO0FBQ3ZCLFdBQU8sS0FBS2MsT0FBTCxDQUFhO0FBQUVkLE1BQUFBLEdBQUcsRUFBRUE7QUFBUCxLQUFiLEVBQTBCZSxJQUExQixDQUErQjtBQUFFWCxNQUFBQSxPQUFPLEVBQUUsQ0FBQztBQUFaLEtBQS9CLENBQVA7QUFDRDtBQUh1QixDQUExQjs7QUFNQSxNQUFNWSxVQUFVLEdBQUdsQixtQkFBU21CLEtBQVQsQ0FBZSxhQUFmLEVBQThCbEIsZ0JBQTlCLENBQW5COztlQUVlaUIsVSIsInNvdXJjZVJvb3QiOiJEOlxcSFRNTCtjc3MranNcXG5vZGVfa29hXFxzcmNcXG1vZGVsXFwiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnLi4vY29uZmlnL0RCSGVscGxlcic7XHJcbmltcG9ydCBtb21lbnQgZnJvbSAnZGF5anMnO1xyXG5cclxuY29uc3QgU2NoZW1hID0gbW9uZ29vc2UuU2NoZW1hXHJcblxyXG5jb25zdCBTaWduUmVjb3JkU2NoZW1hID0gbmV3IFNjaGVtYSh7XHJcbiAgdWlkOiB7dHlwZTpTdHJpbmcsIHJlZjogJ3VzZXInfSxcclxuICBjcmVhdGVkOiB7dHlwZTpEYXRlfSxcclxuICBmYXZzOiB7dHlwZTogTnVtYmVyfSxcclxuICBsYXN0U2lnbjoge3R5cGU6RGF0ZX1cclxufSlcclxuXHJcblNpZ25SZWNvcmRTY2hlbWEucHJlKCdzYXZlJywgZnVuY3Rpb24obmV4dCkge1xyXG4gIHRoaXMuY3JlYXRlZCA9IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpXHJcbiAgbmV4dCgpXHJcbn0pXHJcblxyXG5TaWduUmVjb3JkU2NoZW1hLnN0YXRpY3M9IHtcclxuICBmaW5kQnlVaWQ6IGZ1bmN0aW9uKHVpZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZmluZE9uZSh7IHVpZDogdWlkfSkuc29ydCh7IGNyZWF0ZWQ6IC0xfSlcclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IFNpZ25SZWNvcmQgPSBtb25nb29zZS5tb2RlbCgnc2lnbl9yZWNvcmQnLCBTaWduUmVjb3JkU2NoZW1hKVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2lnblJlY29yZCJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "SignRecord.js"
      ],
      "names": [
        "Schema",
        "mongoose",
        "SignRecordSchema",
        "uid",
        "type",
        "String",
        "ref",
        "created",
        "Date",
        "favs",
        "Number",
        "lastSign",
        "pre",
        "next",
        "format",
        "statics",
        "findByUid",
        "findOne",
        "sort",
        "SignRecord",
        "model"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAGC,mBAASD,MAAxB;AAEA,MAAME,gBAAgB,GAAG,IAAIF,MAAJ,CAAW;AAClCG,EAAAA,GAAG,EAAE;AAACC,IAAAA,IAAI,EAACC,MAAN;AAAcC,IAAAA,GAAG,EAAE;AAAnB,GAD6B;AAElCC,EAAAA,OAAO,EAAE;AAACH,IAAAA,IAAI,EAACI;AAAN,GAFyB;AAGlCC,EAAAA,IAAI,EAAE;AAACL,IAAAA,IAAI,EAAEM;AAAP,GAH4B;AAIlCC,EAAAA,QAAQ,EAAE;AAACP,IAAAA,IAAI,EAACI;AAAN;AAJwB,CAAX,CAAzB;AAOAN,gBAAgB,CAACU,GAAjB,CAAqB,MAArB,EAA6B,UAASC,IAAT,EAAe;AAC1C,OAAKN,OAAL,GAAe,sBAASO,MAAT,CAAgB,qBAAhB,CAAf;AACAD,EAAAA,IAAI;AACL,CAHD;AAKAX,gBAAgB,CAACa,OAAjB,GAA0B;AACxBC,EAAAA,SAAS,EAAE,UAASb,GAAT,EAAc;AACvB,WAAO,KAAKc,OAAL,CAAa;AAAEd,MAAAA,GAAG,EAAEA;AAAP,KAAb,EAA0Be,IAA1B,CAA+B;AAAEX,MAAAA,OAAO,EAAE,CAAC;AAAZ,KAA/B,CAAP;AACD;AAHuB,CAA1B;;AAMA,MAAMY,UAAU,GAAGlB,mBAASmB,KAAT,CAAe,aAAf,EAA8BlB,gBAA9B,CAAnB;;eAEeiB,U",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\model\\",
      "sourcesContent": [
        "import mongoose from '../config/DBHelpler';\r\nimport moment from 'dayjs';\r\n\r\nconst Schema = mongoose.Schema\r\n\r\nconst SignRecordSchema = new Schema({\r\n  uid: {type:String, ref: 'user'},\r\n  created: {type:Date},\r\n  favs: {type: Number},\r\n  lastSign: {type:Date}\r\n})\r\n\r\nSignRecordSchema.pre('save', function(next) {\r\n  this.created = moment().format('YYYY-MM-DD HH:mm:ss')\r\n  next()\r\n})\r\n\r\nSignRecordSchema.statics= {\r\n  findByUid: function(uid) {\r\n    return this.findOne({ uid: uid}).sort({ created: -1})\r\n  }\r\n}\r\n\r\nconst SignRecord = mongoose.model('sign_record', SignRecordSchema)\r\n\r\nexport default SignRecord"
      ]
    },
    "sourceType": "script",
    "mtime": 1628261541850
  },
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\routes\\\\ContentRoter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\routes\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\routes\\ContentRoter.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\routes\\ContentRoter.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\routes\\ContentRoter.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\routes\\",
        "sourceFileName": "ContentRoter.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _koaRouter = _interopRequireDefault(require(\"koa-router\"));\n\nvar _ContentController = _interopRequireDefault(require(\"../api/ContentController\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = new _koaRouter.default();\nrouter.prefix('/content');\nrouter.post('/upload', _ContentController.default.uploadImg);\nrouter.post('/addPost', _ContentController.default.addPost);\nrouter.get('/detail', _ContentController.default.getPostDetail);\nrouter.get('/comments', _ContentController.default.getComments);\nrouter.get('/get_lists', _ContentController.default.getLists);\nrouter.get('/cheshi', _ContentController.default.cheshi);\nrouter.post('/updateBase64', _ContentController.default.updateBase64);\nrouter.post('/update_post', _ContentController.default.updatePost); // router.get('/addPost', async (ctx) => {\n//   console.log('/fav')\n//   ctx.body = {\n//     code: 200\n//   }\n// })\n\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvbnRlbnRSb3Rlci5qcyJdLCJuYW1lcyI6WyJyb3V0ZXIiLCJSb3V0ZXIiLCJwcmVmaXgiLCJwb3N0IiwiQ29udGVudENvbnRyb2xsZXIiLCJ1cGxvYWRJbWciLCJhZGRQb3N0IiwiZ2V0IiwiZ2V0UG9zdERldGFpbCIsImdldENvbW1lbnRzIiwiZ2V0TGlzdHMiLCJjaGVzaGkiLCJ1cGRhdGVCYXNlNjQiLCJ1cGRhdGVQb3N0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUcsSUFBSUMsa0JBQUosRUFBZjtBQUVBRCxNQUFNLENBQUNFLE1BQVAsQ0FBYyxVQUFkO0FBRUFGLE1BQU0sQ0FBQ0csSUFBUCxDQUFZLFNBQVosRUFBdUJDLDJCQUFrQkMsU0FBekM7QUFDQUwsTUFBTSxDQUFDRyxJQUFQLENBQVksVUFBWixFQUF3QkMsMkJBQWtCRSxPQUExQztBQUNBTixNQUFNLENBQUNPLEdBQVAsQ0FBVyxTQUFYLEVBQXNCSCwyQkFBa0JJLGFBQXhDO0FBQ0FSLE1BQU0sQ0FBQ08sR0FBUCxDQUFXLFdBQVgsRUFBd0JILDJCQUFrQkssV0FBMUM7QUFDQVQsTUFBTSxDQUFDTyxHQUFQLENBQVcsWUFBWCxFQUF5QkgsMkJBQWtCTSxRQUEzQztBQUNBVixNQUFNLENBQUNPLEdBQVAsQ0FBVyxTQUFYLEVBQXNCSCwyQkFBa0JPLE1BQXhDO0FBQ0FYLE1BQU0sQ0FBQ0csSUFBUCxDQUFZLGVBQVosRUFBNkJDLDJCQUFrQlEsWUFBL0M7QUFDQVosTUFBTSxDQUFDRyxJQUFQLENBQVksY0FBWixFQUE0QkMsMkJBQWtCUyxVQUE5QyxFLENBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztlQUVlYixNIiwic291cmNlUm9vdCI6IkQ6XFxIVE1MK2Nzcytqc1xcbm9kZV9rb2FcXHNyY1xccm91dGVzXFwiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUm91dGVyIGZyb20gJ2tvYS1yb3V0ZXInO1xyXG5pbXBvcnQgQ29udGVudENvbnRyb2xsZXIgZnJvbSAnLi4vYXBpL0NvbnRlbnRDb250cm9sbGVyJztcclxuXHJcbmNvbnN0IHJvdXRlciA9IG5ldyBSb3V0ZXIoKVxyXG5cclxucm91dGVyLnByZWZpeCgnL2NvbnRlbnQnKVxyXG5cclxucm91dGVyLnBvc3QoJy91cGxvYWQnLCBDb250ZW50Q29udHJvbGxlci51cGxvYWRJbWcpXHJcbnJvdXRlci5wb3N0KCcvYWRkUG9zdCcsIENvbnRlbnRDb250cm9sbGVyLmFkZFBvc3QpXHJcbnJvdXRlci5nZXQoJy9kZXRhaWwnLCBDb250ZW50Q29udHJvbGxlci5nZXRQb3N0RGV0YWlsKVxyXG5yb3V0ZXIuZ2V0KCcvY29tbWVudHMnLCBDb250ZW50Q29udHJvbGxlci5nZXRDb21tZW50cylcclxucm91dGVyLmdldCgnL2dldF9saXN0cycsIENvbnRlbnRDb250cm9sbGVyLmdldExpc3RzKVxyXG5yb3V0ZXIuZ2V0KCcvY2hlc2hpJywgQ29udGVudENvbnRyb2xsZXIuY2hlc2hpKVxyXG5yb3V0ZXIucG9zdCgnL3VwZGF0ZUJhc2U2NCcsIENvbnRlbnRDb250cm9sbGVyLnVwZGF0ZUJhc2U2NClcclxucm91dGVyLnBvc3QoJy91cGRhdGVfcG9zdCcsIENvbnRlbnRDb250cm9sbGVyLnVwZGF0ZVBvc3QpXHJcblxyXG5cclxuLy8gcm91dGVyLmdldCgnL2FkZFBvc3QnLCBhc3luYyAoY3R4KSA9PiB7XHJcbi8vICAgY29uc29sZS5sb2coJy9mYXYnKVxyXG4vLyAgIGN0eC5ib2R5ID0ge1xyXG4vLyAgICAgY29kZTogMjAwXHJcbi8vICAgfVxyXG4vLyB9KVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgcm91dGVyIl19",
    "map": {
      "version": 3,
      "sources": [
        "ContentRoter.js"
      ],
      "names": [
        "router",
        "Router",
        "prefix",
        "post",
        "ContentController",
        "uploadImg",
        "addPost",
        "get",
        "getPostDetail",
        "getComments",
        "getLists",
        "cheshi",
        "updateBase64",
        "updatePost"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,IAAIC,kBAAJ,EAAf;AAEAD,MAAM,CAACE,MAAP,CAAc,UAAd;AAEAF,MAAM,CAACG,IAAP,CAAY,SAAZ,EAAuBC,2BAAkBC,SAAzC;AACAL,MAAM,CAACG,IAAP,CAAY,UAAZ,EAAwBC,2BAAkBE,OAA1C;AACAN,MAAM,CAACO,GAAP,CAAW,SAAX,EAAsBH,2BAAkBI,aAAxC;AACAR,MAAM,CAACO,GAAP,CAAW,WAAX,EAAwBH,2BAAkBK,WAA1C;AACAT,MAAM,CAACO,GAAP,CAAW,YAAX,EAAyBH,2BAAkBM,QAA3C;AACAV,MAAM,CAACO,GAAP,CAAW,SAAX,EAAsBH,2BAAkBO,MAAxC;AACAX,MAAM,CAACG,IAAP,CAAY,eAAZ,EAA6BC,2BAAkBQ,YAA/C;AACAZ,MAAM,CAACG,IAAP,CAAY,cAAZ,EAA4BC,2BAAkBS,UAA9C,E,CAGA;AACA;AACA;AACA;AACA;AACA;;eAEeb,M",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\routes\\",
      "sourcesContent": [
        "import Router from 'koa-router';\r\nimport ContentController from '../api/ContentController';\r\n\r\nconst router = new Router()\r\n\r\nrouter.prefix('/content')\r\n\r\nrouter.post('/upload', ContentController.uploadImg)\r\nrouter.post('/addPost', ContentController.addPost)\r\nrouter.get('/detail', ContentController.getPostDetail)\r\nrouter.get('/comments', ContentController.getComments)\r\nrouter.get('/get_lists', ContentController.getLists)\r\nrouter.get('/cheshi', ContentController.cheshi)\r\nrouter.post('/updateBase64', ContentController.updateBase64)\r\nrouter.post('/update_post', ContentController.updatePost)\r\n\r\n\r\n// router.get('/addPost', async (ctx) => {\r\n//   console.log('/fav')\r\n//   ctx.body = {\r\n//     code: 200\r\n//   }\r\n// })\r\n\r\nexport default router"
      ]
    },
    "sourceType": "script",
    "mtime": 1632712486738
  },
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\api\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\api\\\\ContentController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\api\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\api\\ContentController.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\api\\ContentController.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\api\\ContentController.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\api\\",
        "sourceFileName": "ContentController.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _dayjs = _interopRequireDefault(require(\"dayjs\"));\n\nvar _index = _interopRequireDefault(require(\"../config/index\"));\n\nvar _Utils = require(\"../conmon/Utils\");\n\nvar _test = _interopRequireDefault(require(\"../model/test\"));\n\nvar _Post = _interopRequireDefault(require(\"../model/Post\"));\n\nvar _Comments = _interopRequireDefault(require(\"../model/Comments\"));\n\nvar _CommentHands = _interopRequireDefault(require(\"../model/CommentHands\"));\n\nvar _CommentChat = _interopRequireDefault(require(\"../model/CommentChat\"));\n\nvar _makeDir = _interopRequireDefault(require(\"make-dir\"));\n\nvar _uuid = require(\"uuid\");\n\nvar _fs = _interopRequireDefault(require(\"fs\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// 这是自己封装的路径检测路径创建方法\n// 这个是第三方封装好的\nclass ContentController {\n  async uploadImg(ctx) {\n    const file = ctx.request.files.file;\n    const ext = file.name.split('.').pop();\n    const dir = `${_index.default.uploadPath}/${(0, _dayjs.default)().format('YYYYMMDD')}`; // const dir2 = `public/path/${moment().format('YYYYMMDD')}`\n    // \n    // await dirExists(dir)\n\n    await (0, _makeDir.default)(dir);\n    const picname = (0, _uuid.v4)();\n    const destPath = `${dir}/${picname}.${ext}`;\n\n    const render = _fs.default.createReadStream(file.path);\n\n    const upStream = _fs.default.createWriteStream(destPath);\n\n    const filePath = `/${(0, _dayjs.default)().format('YYYYMMDD')}/${picname}.${ext}`;\n    render.pipe(upStream);\n    ctx.body = {\n      code: 200,\n      msg: '上传成功',\n      data: filePath\n    };\n  }\n\n  async addPost(ctx) {\n    const body = ctx.request.body;\n    const code = await (0, _Utils.checkCode)(body.sid, body.code);\n\n    switch (code) {\n      case 1:\n        const obj = await (0, _Utils.getJWTPayload)(ctx.header.authorization);\n        const user = await _test.default.findById(obj._id);\n\n        if (user.favs >= body.favs) {\n          const newPost = new _Post.default(body);\n          newPost.uid = obj._id;\n          const result = await newPost.save();\n          await _test.default.updateOne({\n            _id: obj._id\n          }, {\n            favs: user.favs - body.favs\n          });\n          ctx.body = {\n            code: 200,\n            msg: '发帖成功'\n          };\n        } else {\n          ctx.body = {\n            code: 501,\n            msg: '积分不足'\n          };\n        }\n\n        break;\n\n      case 0:\n        ctx.body = {\n          code: 500,\n          msg: '验证码错误'\n        };\n        break;\n\n      case 2:\n        ctx.body = {\n          code: 500,\n          msg: '验证码失效'\n        };\n        break;\n    } // if (code === 1) {\n    //   const obj = await getJWTPayload(ctx.header.authorization)\n    //   const user = await User.findById(obj._id)\n    //   const result = await User.updateOne({\n    //     _id: obj._id\n    //   }, {\n    //     $set: { content: body.content }\n    //   })\n    //   ctx.body = {\n    //     code: 200\n    //   }\n    // }else if (code === 0) {\n    //   ctx.body = {\n    //     code: 500,\n    //     msg: '验证码错误'\n    //   }  \n    // } else if (condition) {\n    // }\n\n  }\n\n  async updatePost(ctx) {\n    const {\n      body\n    } = ctx.request;\n    console.log('body: ', body);\n    const result = await _Post.default.updateOne({\n      _id: body._id\n    }, body);\n    ctx.body = {\n      code: 200\n    };\n  }\n\n  async getPostDetail(ctx) {\n    const params = ctx.query;\n\n    if (!params.tid) {\n      ctx.body = {\n        code: 500,\n        msg: '文章标题为空'\n      };\n      return;\n    }\n\n    const post = await _Post.default.findByTid(params.tid);\n    ctx.body = {\n      code: 200,\n      data: post\n    };\n  } // 获取评论\n\n\n  async getComments(ctx) {\n    console.log('开始时间 ', (0, _dayjs.default)().format('HH:mm:ss'));\n    const params = ctx.query;\n    const tid = params.tid;\n    const page = params.page ? params.page - 1 : 0;\n    const limit = params.limit ? parseInt(params.limit) : 10;\n\n    if (!tid) {\n      ctx.body = {\n        code: 500,\n        msg: '文章标题为空'\n      };\n      return;\n    }\n\n    let result = await _Comments.default.getCommentsList(tid, page, limit);\n    const total = await _Comments.default.queryCount(tid);\n    result = result.map(item => item.toJSON());\n\n    for (let i = 0; i < result.length; i++) {\n      let item = result[i];\n\n      const id = item._id.toJSON();\n\n      const chats = await _CommentChat.default.getCommentChatList(id);\n\n      if (chats.length > 0) {\n        result[i].chats = chats;\n      }\n    }\n\n    if (ctx.header.authorization) {\n      const obj = await (0, _Utils.getJWTPayload)(ctx.header.authorization);\n\n      if (typeof obj._id !== 'undefined') {\n        // result = result.map(item => item.toJSON())\n        for (let i = 0; i < result.length; i++) {\n          let item = result[i];\n          item.handed = '0';\n          const commentHands = await _CommentHands.default.findOne({\n            cid: item._id,\n            uid: obj._id\n          });\n\n          if (commentHands && commentHands.cid) {\n            if (commentHands.uid === obj._id) {\n              item.handed = '1';\n            }\n          }\n        }\n      }\n    }\n\n    await _Post.default.updateOne({\n      _id: tid\n    }, {\n      $inc: {\n        reads: 1\n      }\n    });\n    console.log('结束时间 ', (0, _dayjs.default)().format('HH:mm:ss'));\n    ctx.body = {\n      code: 200,\n      data: result,\n      total,\n      msg: '查詢成功'\n    };\n  }\n\n  async updateBase64(ctx) {\n    const body = ctx.request.body;\n    const base = body.base;\n    const imgPath = await (0, _Utils.base64ToImg)(base);\n    ctx.body = {\n      code: 200,\n      imgPath\n    };\n  }\n\n  async getLists(ctx) {\n    const body = ctx.query;\n    console.log('body: ', body);\n    const data = await _Post.default.getLists(body.page - 1, body.limit);\n    ctx.body = {\n      code: 200,\n      data\n    };\n  }\n\n  async cheshi(ctx) {\n    const body = ctx.request.body;\n    const data = await _Post.default.getLists(0, 10);\n    console.log('data: ', data);\n    ctx.body = {\n      code: 200,\n      data\n    };\n  }\n\n}\n\nvar _default = new ContentController();\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvbnRlbnRDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbIkNvbnRlbnRDb250cm9sbGVyIiwidXBsb2FkSW1nIiwiY3R4IiwiZmlsZSIsInJlcXVlc3QiLCJmaWxlcyIsImV4dCIsIm5hbWUiLCJzcGxpdCIsInBvcCIsImRpciIsImNvbmZpZyIsInVwbG9hZFBhdGgiLCJmb3JtYXQiLCJwaWNuYW1lIiwiZGVzdFBhdGgiLCJyZW5kZXIiLCJmcyIsImNyZWF0ZVJlYWRTdHJlYW0iLCJwYXRoIiwidXBTdHJlYW0iLCJjcmVhdGVXcml0ZVN0cmVhbSIsImZpbGVQYXRoIiwicGlwZSIsImJvZHkiLCJjb2RlIiwibXNnIiwiZGF0YSIsImFkZFBvc3QiLCJzaWQiLCJvYmoiLCJoZWFkZXIiLCJhdXRob3JpemF0aW9uIiwidXNlciIsIlVzZXIiLCJmaW5kQnlJZCIsIl9pZCIsImZhdnMiLCJuZXdQb3N0IiwiUG9zdCIsInVpZCIsInJlc3VsdCIsInNhdmUiLCJ1cGRhdGVPbmUiLCJ1cGRhdGVQb3N0IiwiY29uc29sZSIsImxvZyIsImdldFBvc3REZXRhaWwiLCJwYXJhbXMiLCJxdWVyeSIsInRpZCIsInBvc3QiLCJmaW5kQnlUaWQiLCJnZXRDb21tZW50cyIsInBhZ2UiLCJsaW1pdCIsInBhcnNlSW50IiwiQ29tbWVudHMiLCJnZXRDb21tZW50c0xpc3QiLCJ0b3RhbCIsInF1ZXJ5Q291bnQiLCJtYXAiLCJpdGVtIiwidG9KU09OIiwiaSIsImxlbmd0aCIsImlkIiwiY2hhdHMiLCJDaGF0cyIsImdldENvbW1lbnRDaGF0TGlzdCIsImhhbmRlZCIsImNvbW1lbnRIYW5kcyIsIkNvbW1lbnRIYW5kcyIsImZpbmRPbmUiLCJjaWQiLCIkaW5jIiwicmVhZHMiLCJ1cGRhdGVCYXNlNjQiLCJiYXNlIiwiaW1nUGF0aCIsImdldExpc3RzIiwiY2hlc2hpIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBUUE7O0FBQ0E7O0FBQ0E7Ozs7QUFMQTtBQUVBO0FBS0EsTUFBTUEsaUJBQU4sQ0FBd0I7QUFDUCxRQUFUQyxTQUFTLENBQUVDLEdBQUYsRUFBTztBQUNwQixVQUFNQyxJQUFJLEdBQUdELEdBQUcsQ0FBQ0UsT0FBSixDQUFZQyxLQUFaLENBQWtCRixJQUEvQjtBQUVBLFVBQU1HLEdBQUcsR0FBR0gsSUFBSSxDQUFDSSxJQUFMLENBQVVDLEtBQVYsQ0FBZ0IsR0FBaEIsRUFBcUJDLEdBQXJCLEVBQVo7QUFHQSxVQUFNQyxHQUFHLEdBQUksR0FBRUMsZUFBT0MsVUFBVyxJQUFHLHNCQUFTQyxNQUFULENBQWdCLFVBQWhCLENBQTRCLEVBQWhFLENBTm9CLENBT3BCO0FBRUE7QUFDQTs7QUFDQSxVQUFNLHNCQUFNSCxHQUFOLENBQU47QUFFQSxVQUFNSSxPQUFPLEdBQUcsZUFBaEI7QUFDQSxVQUFNQyxRQUFRLEdBQUksR0FBRUwsR0FBSSxJQUFHSSxPQUFRLElBQUdSLEdBQUksRUFBMUM7O0FBQ0EsVUFBTVUsTUFBTSxHQUFHQyxZQUFHQyxnQkFBSCxDQUFvQmYsSUFBSSxDQUFDZ0IsSUFBekIsQ0FBZjs7QUFDQSxVQUFNQyxRQUFRLEdBQUdILFlBQUdJLGlCQUFILENBQXFCTixRQUFyQixDQUFqQjs7QUFDQSxVQUFNTyxRQUFRLEdBQUksSUFBRyxzQkFBU1QsTUFBVCxDQUFnQixVQUFoQixDQUE0QixJQUFHQyxPQUFRLElBQUdSLEdBQUksRUFBbkU7QUFFQVUsSUFBQUEsTUFBTSxDQUFDTyxJQUFQLENBQVlILFFBQVo7QUFDQWxCLElBQUFBLEdBQUcsQ0FBQ3NCLElBQUosR0FBVztBQUNUQyxNQUFBQSxJQUFJLEVBQUUsR0FERztBQUVUQyxNQUFBQSxHQUFHLEVBQUUsTUFGSTtBQUdUQyxNQUFBQSxJQUFJLEVBQUVMO0FBSEcsS0FBWDtBQUtEOztBQUVZLFFBQVBNLE9BQU8sQ0FBRTFCLEdBQUYsRUFBTztBQUNsQixVQUFNc0IsSUFBSSxHQUFHdEIsR0FBRyxDQUFDRSxPQUFKLENBQVlvQixJQUF6QjtBQUVBLFVBQU1DLElBQUksR0FBRyxNQUFNLHNCQUFVRCxJQUFJLENBQUNLLEdBQWYsRUFBb0JMLElBQUksQ0FBQ0MsSUFBekIsQ0FBbkI7O0FBRUEsWUFBUUEsSUFBUjtBQUNFLFdBQUssQ0FBTDtBQUNFLGNBQU1LLEdBQUcsR0FBRyxNQUFNLDBCQUFjNUIsR0FBRyxDQUFDNkIsTUFBSixDQUFXQyxhQUF6QixDQUFsQjtBQUNBLGNBQU1DLElBQUksR0FBRyxNQUFNQyxjQUFLQyxRQUFMLENBQWNMLEdBQUcsQ0FBQ00sR0FBbEIsQ0FBbkI7O0FBQ0EsWUFBSUgsSUFBSSxDQUFDSSxJQUFMLElBQWFiLElBQUksQ0FBQ2EsSUFBdEIsRUFBNEI7QUFDMUIsZ0JBQU1DLE9BQU8sR0FBRyxJQUFJQyxhQUFKLENBQVNmLElBQVQsQ0FBaEI7QUFDQWMsVUFBQUEsT0FBTyxDQUFDRSxHQUFSLEdBQWNWLEdBQUcsQ0FBQ00sR0FBbEI7QUFDQSxnQkFBTUssTUFBTSxHQUFHLE1BQU1ILE9BQU8sQ0FBQ0ksSUFBUixFQUFyQjtBQUNBLGdCQUFNUixjQUFLUyxTQUFMLENBQWU7QUFBRVAsWUFBQUEsR0FBRyxFQUFFTixHQUFHLENBQUNNO0FBQVgsV0FBZixFQUFpQztBQUNyQ0MsWUFBQUEsSUFBSSxFQUFFSixJQUFJLENBQUNJLElBQUwsR0FBWWIsSUFBSSxDQUFDYTtBQURjLFdBQWpDLENBQU47QUFHQW5DLFVBQUFBLEdBQUcsQ0FBQ3NCLElBQUosR0FBVztBQUNUQyxZQUFBQSxJQUFJLEVBQUUsR0FERztBQUVUQyxZQUFBQSxHQUFHLEVBQUU7QUFGSSxXQUFYO0FBSUQsU0FYRCxNQVdPO0FBQ0x4QixVQUFBQSxHQUFHLENBQUNzQixJQUFKLEdBQVc7QUFDVEMsWUFBQUEsSUFBSSxFQUFFLEdBREc7QUFFVEMsWUFBQUEsR0FBRyxFQUFFO0FBRkksV0FBWDtBQUlEOztBQUdEOztBQUVGLFdBQUssQ0FBTDtBQUNFeEIsUUFBQUEsR0FBRyxDQUFDc0IsSUFBSixHQUFXO0FBQ1RDLFVBQUFBLElBQUksRUFBRSxHQURHO0FBRVRDLFVBQUFBLEdBQUcsRUFBRTtBQUZJLFNBQVg7QUFJQTs7QUFFRixXQUFLLENBQUw7QUFDRXhCLFFBQUFBLEdBQUcsQ0FBQ3NCLElBQUosR0FBVztBQUNUQyxVQUFBQSxJQUFJLEVBQUUsR0FERztBQUVUQyxVQUFBQSxHQUFHLEVBQUU7QUFGSSxTQUFYO0FBSUE7QUFyQ0osS0FMa0IsQ0E4Q2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFDRDs7QUFFZSxRQUFWa0IsVUFBVSxDQUFFMUMsR0FBRixFQUFPO0FBQ3JCLFVBQU07QUFBRXNCLE1BQUFBO0FBQUYsUUFBV3RCLEdBQUcsQ0FBQ0UsT0FBckI7QUFDQXlDLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLFFBQVosRUFBc0J0QixJQUF0QjtBQUNBLFVBQU1pQixNQUFNLEdBQUcsTUFBTUYsY0FBS0ksU0FBTCxDQUFlO0FBQUVQLE1BQUFBLEdBQUcsRUFBRVosSUFBSSxDQUFDWTtBQUFaLEtBQWYsRUFBa0NaLElBQWxDLENBQXJCO0FBQ0F0QixJQUFBQSxHQUFHLENBQUNzQixJQUFKLEdBQVc7QUFDVEMsTUFBQUEsSUFBSSxFQUFFO0FBREcsS0FBWDtBQUdEOztBQUNrQixRQUFic0IsYUFBYSxDQUFFN0MsR0FBRixFQUFPO0FBRXhCLFVBQU04QyxNQUFNLEdBQUc5QyxHQUFHLENBQUMrQyxLQUFuQjs7QUFDQSxRQUFJLENBQUNELE1BQU0sQ0FBQ0UsR0FBWixFQUFpQjtBQUNmaEQsTUFBQUEsR0FBRyxDQUFDc0IsSUFBSixHQUFXO0FBQ1RDLFFBQUFBLElBQUksRUFBRSxHQURHO0FBRVRDLFFBQUFBLEdBQUcsRUFBRTtBQUZJLE9BQVg7QUFJQTtBQUNEOztBQUNELFVBQU15QixJQUFJLEdBQUcsTUFBTVosY0FBS2EsU0FBTCxDQUFlSixNQUFNLENBQUNFLEdBQXRCLENBQW5CO0FBQ0FoRCxJQUFBQSxHQUFHLENBQUNzQixJQUFKLEdBQVc7QUFDVEMsTUFBQUEsSUFBSSxFQUFFLEdBREc7QUFFVEUsTUFBQUEsSUFBSSxFQUFFd0I7QUFGRyxLQUFYO0FBSUQsR0F0SHFCLENBdUh0Qjs7O0FBQ2lCLFFBQVhFLFdBQVcsQ0FBRW5ELEdBQUYsRUFBTztBQUV0QjJDLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLE9BQVosRUFBcUIsc0JBQVNqQyxNQUFULENBQWdCLFVBQWhCLENBQXJCO0FBQ0EsVUFBTW1DLE1BQU0sR0FBRzlDLEdBQUcsQ0FBQytDLEtBQW5CO0FBRUEsVUFBTUMsR0FBRyxHQUFHRixNQUFNLENBQUNFLEdBQW5CO0FBQ0EsVUFBTUksSUFBSSxHQUFHTixNQUFNLENBQUNNLElBQVAsR0FBY04sTUFBTSxDQUFDTSxJQUFQLEdBQWMsQ0FBNUIsR0FBZ0MsQ0FBN0M7QUFDQSxVQUFNQyxLQUFLLEdBQUdQLE1BQU0sQ0FBQ08sS0FBUCxHQUFlQyxRQUFRLENBQUNSLE1BQU0sQ0FBQ08sS0FBUixDQUF2QixHQUF3QyxFQUF0RDs7QUFDQSxRQUFJLENBQUNMLEdBQUwsRUFBVTtBQUNSaEQsTUFBQUEsR0FBRyxDQUFDc0IsSUFBSixHQUFXO0FBQ1RDLFFBQUFBLElBQUksRUFBRSxHQURHO0FBRVRDLFFBQUFBLEdBQUcsRUFBRTtBQUZJLE9BQVg7QUFJQTtBQUNEOztBQUNELFFBQUllLE1BQU0sR0FBRyxNQUFNZ0Isa0JBQVNDLGVBQVQsQ0FBeUJSLEdBQXpCLEVBQThCSSxJQUE5QixFQUFvQ0MsS0FBcEMsQ0FBbkI7QUFDQSxVQUFNSSxLQUFLLEdBQUcsTUFBTUYsa0JBQVNHLFVBQVQsQ0FBb0JWLEdBQXBCLENBQXBCO0FBRUFULElBQUFBLE1BQU0sR0FBR0EsTUFBTSxDQUFDb0IsR0FBUCxDQUFXQyxJQUFJLElBQUlBLElBQUksQ0FBQ0MsTUFBTCxFQUFuQixDQUFUOztBQUNBLFNBQUssSUFBSUMsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR3ZCLE1BQU0sQ0FBQ3dCLE1BQTNCLEVBQW1DRCxDQUFDLEVBQXBDLEVBQXdDO0FBQ3RDLFVBQUlGLElBQUksR0FBR3JCLE1BQU0sQ0FBQ3VCLENBQUQsQ0FBakI7O0FBRUEsWUFBTUUsRUFBRSxHQUFHSixJQUFJLENBQUMxQixHQUFMLENBQVMyQixNQUFULEVBQVg7O0FBQ0EsWUFBTUksS0FBSyxHQUFHLE1BQU1DLHFCQUFNQyxrQkFBTixDQUF5QkgsRUFBekIsQ0FBcEI7O0FBQ0EsVUFBSUMsS0FBSyxDQUFDRixNQUFOLEdBQWUsQ0FBbkIsRUFBc0I7QUFDcEJ4QixRQUFBQSxNQUFNLENBQUN1QixDQUFELENBQU4sQ0FBVUcsS0FBVixHQUFrQkEsS0FBbEI7QUFFRDtBQUNGOztBQUVELFFBQUlqRSxHQUFHLENBQUM2QixNQUFKLENBQVdDLGFBQWYsRUFBOEI7QUFDNUIsWUFBTUYsR0FBRyxHQUFHLE1BQU0sMEJBQWM1QixHQUFHLENBQUM2QixNQUFKLENBQVdDLGFBQXpCLENBQWxCOztBQUNBLFVBQUksT0FBT0YsR0FBRyxDQUFDTSxHQUFYLEtBQW1CLFdBQXZCLEVBQW9DO0FBQ2xDO0FBQ0EsYUFBSyxJQUFJNEIsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR3ZCLE1BQU0sQ0FBQ3dCLE1BQTNCLEVBQW1DRCxDQUFDLEVBQXBDLEVBQXdDO0FBQ3RDLGNBQUlGLElBQUksR0FBR3JCLE1BQU0sQ0FBQ3VCLENBQUQsQ0FBakI7QUFDQUYsVUFBQUEsSUFBSSxDQUFDUSxNQUFMLEdBQWMsR0FBZDtBQUNBLGdCQUFNQyxZQUFZLEdBQUcsTUFBTUMsc0JBQWFDLE9BQWIsQ0FBcUI7QUFBRUMsWUFBQUEsR0FBRyxFQUFFWixJQUFJLENBQUMxQixHQUFaO0FBQWlCSSxZQUFBQSxHQUFHLEVBQUVWLEdBQUcsQ0FBQ007QUFBMUIsV0FBckIsQ0FBM0I7O0FBQ0EsY0FBSW1DLFlBQVksSUFBSUEsWUFBWSxDQUFDRyxHQUFqQyxFQUFzQztBQUNwQyxnQkFBSUgsWUFBWSxDQUFDL0IsR0FBYixLQUFxQlYsR0FBRyxDQUFDTSxHQUE3QixFQUFrQztBQUNoQzBCLGNBQUFBLElBQUksQ0FBQ1EsTUFBTCxHQUFjLEdBQWQ7QUFDRDtBQUNGO0FBQ0Y7QUFDRjtBQUNGOztBQUdELFVBQU0vQixjQUFLSSxTQUFMLENBQWU7QUFBRVAsTUFBQUEsR0FBRyxFQUFFYztBQUFQLEtBQWYsRUFBNkI7QUFDakN5QixNQUFBQSxJQUFJLEVBQUU7QUFDSkMsUUFBQUEsS0FBSyxFQUFFO0FBREg7QUFEMkIsS0FBN0IsQ0FBTjtBQUtBL0IsSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksT0FBWixFQUFxQixzQkFBU2pDLE1BQVQsQ0FBZ0IsVUFBaEIsQ0FBckI7QUFFQVgsSUFBQUEsR0FBRyxDQUFDc0IsSUFBSixHQUFXO0FBQ1RDLE1BQUFBLElBQUksRUFBRSxHQURHO0FBRVRFLE1BQUFBLElBQUksRUFBRWMsTUFGRztBQUdUa0IsTUFBQUEsS0FIUztBQUlUakMsTUFBQUEsR0FBRyxFQUFFO0FBSkksS0FBWDtBQU1EOztBQUNpQixRQUFabUQsWUFBWSxDQUFFM0UsR0FBRixFQUFPO0FBQ3ZCLFVBQU1zQixJQUFJLEdBQUd0QixHQUFHLENBQUNFLE9BQUosQ0FBWW9CLElBQXpCO0FBQ0EsVUFBTXNELElBQUksR0FBR3RELElBQUksQ0FBQ3NELElBQWxCO0FBQ0EsVUFBTUMsT0FBTyxHQUFHLE1BQU0sd0JBQVlELElBQVosQ0FBdEI7QUFDQTVFLElBQUFBLEdBQUcsQ0FBQ3NCLElBQUosR0FBVztBQUNUQyxNQUFBQSxJQUFJLEVBQUUsR0FERztBQUVUc0QsTUFBQUE7QUFGUyxLQUFYO0FBSUQ7O0FBRWEsUUFBUkMsUUFBUSxDQUFFOUUsR0FBRixFQUFPO0FBQ25CLFVBQU1zQixJQUFJLEdBQUd0QixHQUFHLENBQUMrQyxLQUFqQjtBQUNBSixJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxRQUFaLEVBQXNCdEIsSUFBdEI7QUFDQSxVQUFNRyxJQUFJLEdBQUcsTUFBTVksY0FBS3lDLFFBQUwsQ0FBY3hELElBQUksQ0FBQzhCLElBQUwsR0FBWSxDQUExQixFQUE2QjlCLElBQUksQ0FBQytCLEtBQWxDLENBQW5CO0FBQ0FyRCxJQUFBQSxHQUFHLENBQUNzQixJQUFKLEdBQVc7QUFDVEMsTUFBQUEsSUFBSSxFQUFFLEdBREc7QUFFVEUsTUFBQUE7QUFGUyxLQUFYO0FBSUQ7O0FBRVcsUUFBTnNELE1BQU0sQ0FBRS9FLEdBQUYsRUFBTztBQUNqQixVQUFNc0IsSUFBSSxHQUFHdEIsR0FBRyxDQUFDRSxPQUFKLENBQVlvQixJQUF6QjtBQUNBLFVBQU1HLElBQUksR0FBRyxNQUFNWSxjQUFLeUMsUUFBTCxDQUFjLENBQWQsRUFBaUIsRUFBakIsQ0FBbkI7QUFDQW5DLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLFFBQVosRUFBc0JuQixJQUF0QjtBQUNBekIsSUFBQUEsR0FBRyxDQUFDc0IsSUFBSixHQUFXO0FBQ1RDLE1BQUFBLElBQUksRUFBRSxHQURHO0FBRVRFLE1BQUFBO0FBRlMsS0FBWDtBQUlEOztBQWxOcUI7O2VBc05ULElBQUkzQixpQkFBSixFIiwic291cmNlUm9vdCI6IkQ6XFxIVE1MK2Nzcytqc1xcbm9kZV9rb2FcXHNyY1xcYXBpXFwiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9tZW50IGZyb20gJ2RheWpzJztcclxuaW1wb3J0IGNvbmZpZyBmcm9tICcuLi9jb25maWcvaW5kZXgnO1xyXG5pbXBvcnQgeyBnZXRKV1RQYXlsb2FkLCBiYXNlNjRUb0ltZywgY2hlY2tDb2RlIH0gZnJvbSAnLi4vY29ubW9uL1V0aWxzJztcclxuXHJcbmltcG9ydCBVc2VyIGZyb20gJy4uL21vZGVsL3Rlc3QnO1xyXG5pbXBvcnQgUG9zdCBmcm9tICcuLi9tb2RlbC9Qb3N0JztcclxuaW1wb3J0IENvbW1lbnRzIGZyb20gJy4uL21vZGVsL0NvbW1lbnRzJztcclxuaW1wb3J0IENvbW1lbnRIYW5kcyBmcm9tICcuLi9tb2RlbC9Db21tZW50SGFuZHMnO1xyXG5pbXBvcnQgQ2hhdHMgZnJvbSAnLi4vbW9kZWwvQ29tbWVudENoYXQnO1xyXG5cclxuXHJcblxyXG5cclxuLy8g6L+Z5piv6Ieq5bex5bCB6KOF55qE6Lev5b6E5qOA5rWL6Lev5b6E5Yib5bu65pa55rOVXHJcbmltcG9ydCB7IGRpckV4aXN0cyB9IGZyb20gJy4uL2Nvbm1vbi9VdGlscyc7XHJcbi8vIOi/meS4quaYr+esrOS4ieaWueWwgeijheWlveeahFxyXG5pbXBvcnQgbWtkaXIgZnJvbSAnbWFrZS1kaXInO1xyXG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJztcclxuaW1wb3J0IGZzIGZyb20gJ2ZzJztcclxuXHJcbmNsYXNzIENvbnRlbnRDb250cm9sbGVyIHtcclxuICBhc3luYyB1cGxvYWRJbWcgKGN0eCkge1xyXG4gICAgY29uc3QgZmlsZSA9IGN0eC5yZXF1ZXN0LmZpbGVzLmZpbGVcclxuXHJcbiAgICBjb25zdCBleHQgPSBmaWxlLm5hbWUuc3BsaXQoJy4nKS5wb3AoKVxyXG5cclxuXHJcbiAgICBjb25zdCBkaXIgPSBgJHtjb25maWcudXBsb2FkUGF0aH0vJHttb21lbnQoKS5mb3JtYXQoJ1lZWVlNTUREJyl9YFxyXG4gICAgLy8gY29uc3QgZGlyMiA9IGBwdWJsaWMvcGF0aC8ke21vbWVudCgpLmZvcm1hdCgnWVlZWU1NREQnKX1gXHJcblxyXG4gICAgLy8gXHJcbiAgICAvLyBhd2FpdCBkaXJFeGlzdHMoZGlyKVxyXG4gICAgYXdhaXQgbWtkaXIoZGlyKVxyXG5cclxuICAgIGNvbnN0IHBpY25hbWUgPSB1dWlkdjQoKVxyXG4gICAgY29uc3QgZGVzdFBhdGggPSBgJHtkaXJ9LyR7cGljbmFtZX0uJHtleHR9YFxyXG4gICAgY29uc3QgcmVuZGVyID0gZnMuY3JlYXRlUmVhZFN0cmVhbShmaWxlLnBhdGgpXHJcbiAgICBjb25zdCB1cFN0cmVhbSA9IGZzLmNyZWF0ZVdyaXRlU3RyZWFtKGRlc3RQYXRoKVxyXG4gICAgY29uc3QgZmlsZVBhdGggPSBgLyR7bW9tZW50KCkuZm9ybWF0KCdZWVlZTU1ERCcpfS8ke3BpY25hbWV9LiR7ZXh0fWBcclxuXHJcbiAgICByZW5kZXIucGlwZSh1cFN0cmVhbSlcclxuICAgIGN0eC5ib2R5ID0ge1xyXG4gICAgICBjb2RlOiAyMDAsXHJcbiAgICAgIG1zZzogJ+S4iuS8oOaIkOWKnycsXHJcbiAgICAgIGRhdGE6IGZpbGVQYXRoXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBhZGRQb3N0IChjdHgpIHtcclxuICAgIGNvbnN0IGJvZHkgPSBjdHgucmVxdWVzdC5ib2R5XHJcblxyXG4gICAgY29uc3QgY29kZSA9IGF3YWl0IGNoZWNrQ29kZShib2R5LnNpZCwgYm9keS5jb2RlKVxyXG5cclxuICAgIHN3aXRjaCAoY29kZSkge1xyXG4gICAgICBjYXNlIDE6XHJcbiAgICAgICAgY29uc3Qgb2JqID0gYXdhaXQgZ2V0SldUUGF5bG9hZChjdHguaGVhZGVyLmF1dGhvcml6YXRpb24pXHJcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQob2JqLl9pZClcclxuICAgICAgICBpZiAodXNlci5mYXZzID49IGJvZHkuZmF2cykge1xyXG4gICAgICAgICAgY29uc3QgbmV3UG9zdCA9IG5ldyBQb3N0KGJvZHkpXHJcbiAgICAgICAgICBuZXdQb3N0LnVpZCA9IG9iai5faWRcclxuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG5ld1Bvc3Quc2F2ZSgpXHJcbiAgICAgICAgICBhd2FpdCBVc2VyLnVwZGF0ZU9uZSh7IF9pZDogb2JqLl9pZCB9LCB7XHJcbiAgICAgICAgICAgIGZhdnM6IHVzZXIuZmF2cyAtIGJvZHkuZmF2c1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIGN0eC5ib2R5ID0ge1xyXG4gICAgICAgICAgICBjb2RlOiAyMDAsXHJcbiAgICAgICAgICAgIG1zZzogJ+WPkeW4luaIkOWKnydcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY3R4LmJvZHkgPSB7XHJcbiAgICAgICAgICAgIGNvZGU6IDUwMSxcclxuICAgICAgICAgICAgbXNnOiAn56ev5YiG5LiN6LazJ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgY2FzZSAwOlxyXG4gICAgICAgIGN0eC5ib2R5ID0ge1xyXG4gICAgICAgICAgY29kZTogNTAwLFxyXG4gICAgICAgICAgbXNnOiAn6aqM6K+B56CB6ZSZ6K+vJ1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIGNhc2UgMjpcclxuICAgICAgICBjdHguYm9keSA9IHtcclxuICAgICAgICAgIGNvZGU6IDUwMCxcclxuICAgICAgICAgIG1zZzogJ+mqjOivgeeggeWkseaViCdcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcblxyXG5cclxuICAgIH1cclxuICAgIC8vIGlmIChjb2RlID09PSAxKSB7XHJcbiAgICAvLyAgIGNvbnN0IG9iaiA9IGF3YWl0IGdldEpXVFBheWxvYWQoY3R4LmhlYWRlci5hdXRob3JpemF0aW9uKVxyXG4gICAgLy8gICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChvYmouX2lkKVxyXG4gICAgLy8gICBjb25zdCByZXN1bHQgPSBhd2FpdCBVc2VyLnVwZGF0ZU9uZSh7XHJcbiAgICAvLyAgICAgX2lkOiBvYmouX2lkXHJcbiAgICAvLyAgIH0sIHtcclxuICAgIC8vICAgICAkc2V0OiB7IGNvbnRlbnQ6IGJvZHkuY29udGVudCB9XHJcbiAgICAvLyAgIH0pXHJcbiAgICAvLyAgIGN0eC5ib2R5ID0ge1xyXG4gICAgLy8gICAgIGNvZGU6IDIwMFxyXG4gICAgLy8gICB9XHJcbiAgICAvLyB9ZWxzZSBpZiAoY29kZSA9PT0gMCkge1xyXG4gICAgLy8gICBjdHguYm9keSA9IHtcclxuICAgIC8vICAgICBjb2RlOiA1MDAsXHJcbiAgICAvLyAgICAgbXNnOiAn6aqM6K+B56CB6ZSZ6K+vJ1xyXG4gICAgLy8gICB9ICBcclxuICAgIC8vIH0gZWxzZSBpZiAoY29uZGl0aW9uKSB7XHJcblxyXG4gICAgLy8gfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgdXBkYXRlUG9zdCAoY3R4KSB7XHJcbiAgICBjb25zdCB7IGJvZHkgfSA9IGN0eC5yZXF1ZXN0XHJcbiAgICBjb25zb2xlLmxvZygnYm9keTogJywgYm9keSk7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBQb3N0LnVwZGF0ZU9uZSh7IF9pZDogYm9keS5faWQgfSwgYm9keSlcclxuICAgIGN0eC5ib2R5ID0ge1xyXG4gICAgICBjb2RlOiAyMDBcclxuICAgIH1cclxuICB9XHJcbiAgYXN5bmMgZ2V0UG9zdERldGFpbCAoY3R4KSB7XHJcblxyXG4gICAgY29uc3QgcGFyYW1zID0gY3R4LnF1ZXJ5XHJcbiAgICBpZiAoIXBhcmFtcy50aWQpIHtcclxuICAgICAgY3R4LmJvZHkgPSB7XHJcbiAgICAgICAgY29kZTogNTAwLFxyXG4gICAgICAgIG1zZzogJ+aWh+eroOagh+mimOS4uuepuidcclxuICAgICAgfVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGNvbnN0IHBvc3QgPSBhd2FpdCBQb3N0LmZpbmRCeVRpZChwYXJhbXMudGlkKVxyXG4gICAgY3R4LmJvZHkgPSB7XHJcbiAgICAgIGNvZGU6IDIwMCxcclxuICAgICAgZGF0YTogcG9zdFxyXG4gICAgfVxyXG4gIH1cclxuICAvLyDojrflj5bor4TorrpcclxuICBhc3luYyBnZXRDb21tZW50cyAoY3R4KSB7XHJcblxyXG4gICAgY29uc29sZS5sb2coJ+W8gOWni+aXtumXtCAnLCBtb21lbnQoKS5mb3JtYXQoJ0hIOm1tOnNzJykpO1xyXG4gICAgY29uc3QgcGFyYW1zID0gY3R4LnF1ZXJ5XHJcblxyXG4gICAgY29uc3QgdGlkID0gcGFyYW1zLnRpZFxyXG4gICAgY29uc3QgcGFnZSA9IHBhcmFtcy5wYWdlID8gcGFyYW1zLnBhZ2UgLSAxIDogMFxyXG4gICAgY29uc3QgbGltaXQgPSBwYXJhbXMubGltaXQgPyBwYXJzZUludChwYXJhbXMubGltaXQpIDogMTBcclxuICAgIGlmICghdGlkKSB7XHJcbiAgICAgIGN0eC5ib2R5ID0ge1xyXG4gICAgICAgIGNvZGU6IDUwMCxcclxuICAgICAgICBtc2c6ICfmlofnq6DmoIfpopjkuLrnqbonXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBsZXQgcmVzdWx0ID0gYXdhaXQgQ29tbWVudHMuZ2V0Q29tbWVudHNMaXN0KHRpZCwgcGFnZSwgbGltaXQpXHJcbiAgICBjb25zdCB0b3RhbCA9IGF3YWl0IENvbW1lbnRzLnF1ZXJ5Q291bnQodGlkKVxyXG5cclxuICAgIHJlc3VsdCA9IHJlc3VsdC5tYXAoaXRlbSA9PiBpdGVtLnRvSlNPTigpKVxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgbGV0IGl0ZW0gPSByZXN1bHRbaV1cclxuXHJcbiAgICAgIGNvbnN0IGlkID0gaXRlbS5faWQudG9KU09OKClcclxuICAgICAgY29uc3QgY2hhdHMgPSBhd2FpdCBDaGF0cy5nZXRDb21tZW50Q2hhdExpc3QoaWQpXHJcbiAgICAgIGlmIChjaGF0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgcmVzdWx0W2ldLmNoYXRzID0gY2hhdHNcclxuXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoY3R4LmhlYWRlci5hdXRob3JpemF0aW9uKSB7XHJcbiAgICAgIGNvbnN0IG9iaiA9IGF3YWl0IGdldEpXVFBheWxvYWQoY3R4LmhlYWRlci5hdXRob3JpemF0aW9uKVxyXG4gICAgICBpZiAodHlwZW9mIG9iai5faWQgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgLy8gcmVzdWx0ID0gcmVzdWx0Lm1hcChpdGVtID0+IGl0ZW0udG9KU09OKCkpXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGxldCBpdGVtID0gcmVzdWx0W2ldXHJcbiAgICAgICAgICBpdGVtLmhhbmRlZCA9ICcwJ1xyXG4gICAgICAgICAgY29uc3QgY29tbWVudEhhbmRzID0gYXdhaXQgQ29tbWVudEhhbmRzLmZpbmRPbmUoeyBjaWQ6IGl0ZW0uX2lkLCB1aWQ6IG9iai5faWQgfSlcclxuICAgICAgICAgIGlmIChjb21tZW50SGFuZHMgJiYgY29tbWVudEhhbmRzLmNpZCkge1xyXG4gICAgICAgICAgICBpZiAoY29tbWVudEhhbmRzLnVpZCA9PT0gb2JqLl9pZCkge1xyXG4gICAgICAgICAgICAgIGl0ZW0uaGFuZGVkID0gJzEnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgYXdhaXQgUG9zdC51cGRhdGVPbmUoeyBfaWQ6IHRpZCB9LCB7XHJcbiAgICAgICRpbmM6IHtcclxuICAgICAgICByZWFkczogMVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgY29uc29sZS5sb2coJ+e7k+adn+aXtumXtCAnLCBtb21lbnQoKS5mb3JtYXQoJ0hIOm1tOnNzJykpO1xyXG5cclxuICAgIGN0eC5ib2R5ID0ge1xyXG4gICAgICBjb2RlOiAyMDAsXHJcbiAgICAgIGRhdGE6IHJlc3VsdCxcclxuICAgICAgdG90YWwsXHJcbiAgICAgIG1zZzogJ+afpeipouaIkOWKnydcclxuICAgIH1cclxuICB9XHJcbiAgYXN5bmMgdXBkYXRlQmFzZTY0IChjdHgpIHtcclxuICAgIGNvbnN0IGJvZHkgPSBjdHgucmVxdWVzdC5ib2R5XHJcbiAgICBjb25zdCBiYXNlID0gYm9keS5iYXNlXHJcbiAgICBjb25zdCBpbWdQYXRoID0gYXdhaXQgYmFzZTY0VG9JbWcoYmFzZSlcclxuICAgIGN0eC5ib2R5ID0ge1xyXG4gICAgICBjb2RlOiAyMDAsXHJcbiAgICAgIGltZ1BhdGhcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGdldExpc3RzIChjdHgpIHtcclxuICAgIGNvbnN0IGJvZHkgPSBjdHgucXVlcnlcclxuICAgIGNvbnNvbGUubG9nKCdib2R5OiAnLCBib2R5KTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBQb3N0LmdldExpc3RzKGJvZHkucGFnZSAtIDEsIGJvZHkubGltaXQpXHJcbiAgICBjdHguYm9keSA9IHtcclxuICAgICAgY29kZTogMjAwLFxyXG4gICAgICBkYXRhXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBjaGVzaGkgKGN0eCkge1xyXG4gICAgY29uc3QgYm9keSA9IGN0eC5yZXF1ZXN0LmJvZHlcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBQb3N0LmdldExpc3RzKDAsIDEwKVxyXG4gICAgY29uc29sZS5sb2coJ2RhdGE6ICcsIGRhdGEpO1xyXG4gICAgY3R4LmJvZHkgPSB7XHJcbiAgICAgIGNvZGU6IDIwMCxcclxuICAgICAgZGF0YVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IG5ldyBDb250ZW50Q29udHJvbGxlcigpIl19",
    "map": {
      "version": 3,
      "sources": [
        "ContentController.js"
      ],
      "names": [
        "ContentController",
        "uploadImg",
        "ctx",
        "file",
        "request",
        "files",
        "ext",
        "name",
        "split",
        "pop",
        "dir",
        "config",
        "uploadPath",
        "format",
        "picname",
        "destPath",
        "render",
        "fs",
        "createReadStream",
        "path",
        "upStream",
        "createWriteStream",
        "filePath",
        "pipe",
        "body",
        "code",
        "msg",
        "data",
        "addPost",
        "sid",
        "obj",
        "header",
        "authorization",
        "user",
        "User",
        "findById",
        "_id",
        "favs",
        "newPost",
        "Post",
        "uid",
        "result",
        "save",
        "updateOne",
        "updatePost",
        "console",
        "log",
        "getPostDetail",
        "params",
        "query",
        "tid",
        "post",
        "findByTid",
        "getComments",
        "page",
        "limit",
        "parseInt",
        "Comments",
        "getCommentsList",
        "total",
        "queryCount",
        "map",
        "item",
        "toJSON",
        "i",
        "length",
        "id",
        "chats",
        "Chats",
        "getCommentChatList",
        "handed",
        "commentHands",
        "CommentHands",
        "findOne",
        "cid",
        "$inc",
        "reads",
        "updateBase64",
        "base",
        "imgPath",
        "getLists",
        "cheshi"
      ],
      "mappings": "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",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\api\\",
      "sourcesContent": [
        "import moment from 'dayjs';\r\nimport config from '../config/index';\r\nimport { getJWTPayload, base64ToImg, checkCode } from '../conmon/Utils';\r\n\r\nimport User from '../model/test';\r\nimport Post from '../model/Post';\r\nimport Comments from '../model/Comments';\r\nimport CommentHands from '../model/CommentHands';\r\nimport Chats from '../model/CommentChat';\r\n\r\n\r\n\r\n\r\n// 这是自己封装的路径检测路径创建方法\r\nimport { dirExists } from '../conmon/Utils';\r\n// 这个是第三方封装好的\r\nimport mkdir from 'make-dir';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport fs from 'fs';\r\n\r\nclass ContentController {\r\n  async uploadImg (ctx) {\r\n    const file = ctx.request.files.file\r\n\r\n    const ext = file.name.split('.').pop()\r\n\r\n\r\n    const dir = `${config.uploadPath}/${moment().format('YYYYMMDD')}`\r\n    // const dir2 = `public/path/${moment().format('YYYYMMDD')}`\r\n\r\n    // \r\n    // await dirExists(dir)\r\n    await mkdir(dir)\r\n\r\n    const picname = uuidv4()\r\n    const destPath = `${dir}/${picname}.${ext}`\r\n    const render = fs.createReadStream(file.path)\r\n    const upStream = fs.createWriteStream(destPath)\r\n    const filePath = `/${moment().format('YYYYMMDD')}/${picname}.${ext}`\r\n\r\n    render.pipe(upStream)\r\n    ctx.body = {\r\n      code: 200,\r\n      msg: '上传成功',\r\n      data: filePath\r\n    }\r\n  }\r\n\r\n  async addPost (ctx) {\r\n    const body = ctx.request.body\r\n\r\n    const code = await checkCode(body.sid, body.code)\r\n\r\n    switch (code) {\r\n      case 1:\r\n        const obj = await getJWTPayload(ctx.header.authorization)\r\n        const user = await User.findById(obj._id)\r\n        if (user.favs >= body.favs) {\r\n          const newPost = new Post(body)\r\n          newPost.uid = obj._id\r\n          const result = await newPost.save()\r\n          await User.updateOne({ _id: obj._id }, {\r\n            favs: user.favs - body.favs\r\n          })\r\n          ctx.body = {\r\n            code: 200,\r\n            msg: '发帖成功'\r\n          }\r\n        } else {\r\n          ctx.body = {\r\n            code: 501,\r\n            msg: '积分不足'\r\n          }\r\n        }\r\n\r\n\r\n        break;\r\n\r\n      case 0:\r\n        ctx.body = {\r\n          code: 500,\r\n          msg: '验证码错误'\r\n        }\r\n        break;\r\n\r\n      case 2:\r\n        ctx.body = {\r\n          code: 500,\r\n          msg: '验证码失效'\r\n        }\r\n        break;\r\n\r\n\r\n    }\r\n    // if (code === 1) {\r\n    //   const obj = await getJWTPayload(ctx.header.authorization)\r\n    //   const user = await User.findById(obj._id)\r\n    //   const result = await User.updateOne({\r\n    //     _id: obj._id\r\n    //   }, {\r\n    //     $set: { content: body.content }\r\n    //   })\r\n    //   ctx.body = {\r\n    //     code: 200\r\n    //   }\r\n    // }else if (code === 0) {\r\n    //   ctx.body = {\r\n    //     code: 500,\r\n    //     msg: '验证码错误'\r\n    //   }  \r\n    // } else if (condition) {\r\n\r\n    // }\r\n  }\r\n\r\n  async updatePost (ctx) {\r\n    const { body } = ctx.request\r\n    console.log('body: ', body);\r\n    const result = await Post.updateOne({ _id: body._id }, body)\r\n    ctx.body = {\r\n      code: 200\r\n    }\r\n  }\r\n  async getPostDetail (ctx) {\r\n\r\n    const params = ctx.query\r\n    if (!params.tid) {\r\n      ctx.body = {\r\n        code: 500,\r\n        msg: '文章标题为空'\r\n      }\r\n      return\r\n    }\r\n    const post = await Post.findByTid(params.tid)\r\n    ctx.body = {\r\n      code: 200,\r\n      data: post\r\n    }\r\n  }\r\n  // 获取评论\r\n  async getComments (ctx) {\r\n\r\n    console.log('开始时间 ', moment().format('HH:mm:ss'));\r\n    const params = ctx.query\r\n\r\n    const tid = params.tid\r\n    const page = params.page ? params.page - 1 : 0\r\n    const limit = params.limit ? parseInt(params.limit) : 10\r\n    if (!tid) {\r\n      ctx.body = {\r\n        code: 500,\r\n        msg: '文章标题为空'\r\n      }\r\n      return\r\n    }\r\n    let result = await Comments.getCommentsList(tid, page, limit)\r\n    const total = await Comments.queryCount(tid)\r\n\r\n    result = result.map(item => item.toJSON())\r\n    for (let i = 0; i < result.length; i++) {\r\n      let item = result[i]\r\n\r\n      const id = item._id.toJSON()\r\n      const chats = await Chats.getCommentChatList(id)\r\n      if (chats.length > 0) {\r\n        result[i].chats = chats\r\n\r\n      }\r\n    }\r\n\r\n    if (ctx.header.authorization) {\r\n      const obj = await getJWTPayload(ctx.header.authorization)\r\n      if (typeof obj._id !== 'undefined') {\r\n        // result = result.map(item => item.toJSON())\r\n        for (let i = 0; i < result.length; i++) {\r\n          let item = result[i]\r\n          item.handed = '0'\r\n          const commentHands = await CommentHands.findOne({ cid: item._id, uid: obj._id })\r\n          if (commentHands && commentHands.cid) {\r\n            if (commentHands.uid === obj._id) {\r\n              item.handed = '1'\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n    await Post.updateOne({ _id: tid }, {\r\n      $inc: {\r\n        reads: 1\r\n      }\r\n    })\r\n    console.log('结束时间 ', moment().format('HH:mm:ss'));\r\n\r\n    ctx.body = {\r\n      code: 200,\r\n      data: result,\r\n      total,\r\n      msg: '查詢成功'\r\n    }\r\n  }\r\n  async updateBase64 (ctx) {\r\n    const body = ctx.request.body\r\n    const base = body.base\r\n    const imgPath = await base64ToImg(base)\r\n    ctx.body = {\r\n      code: 200,\r\n      imgPath\r\n    }\r\n  }\r\n\r\n  async getLists (ctx) {\r\n    const body = ctx.query\r\n    console.log('body: ', body);\r\n    const data = await Post.getLists(body.page - 1, body.limit)\r\n    ctx.body = {\r\n      code: 200,\r\n      data\r\n    }\r\n  }\r\n\r\n  async cheshi (ctx) {\r\n    const body = ctx.request.body\r\n    const data = await Post.getLists(0, 10)\r\n    console.log('data: ', data);\r\n    ctx.body = {\r\n      code: 200,\r\n      data\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport default new ContentController()"
      ]
    },
    "sourceType": "script",
    "mtime": 1632932349974
  },
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\model\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\model\\\\Post.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\model\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\model\\Post.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\model\\Post.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\model\\Post.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\model\\",
        "sourceFileName": "Post.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _DBHelpler = _interopRequireDefault(require(\"../config/DBHelpler\"));\n\nvar _dayjs = _interopRequireDefault(require(\"dayjs\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Schema = _DBHelpler.default.Schema;\nconst PostSchema = new Schema({\n  uid: {\n    type: String,\n    ref: 'users'\n  },\n  title: {\n    type: String\n  },\n  content: {\n    type: String\n  },\n  created: {\n    type: Date\n  },\n  catalog: {\n    type: String\n  },\n  favs: {\n    type: Number\n  },\n  isEnd: {\n    type: String,\n    default: '0'\n  },\n  reads: {\n    type: Number,\n    default: 0\n  },\n  answer: {\n    type: Number,\n    default: 0\n  },\n  status: {\n    type: String,\n    default: '0'\n  },\n  isTop: {\n    type: String,\n    default: '0'\n  },\n  sort: {\n    type: Number,\n    default: '0'\n  },\n  tags: {\n    type: Array,\n    default: [{\n      name: '',\n      class: ''\n    }]\n  }\n});\nPostSchema.pre('save', function (next) {\n  this.created = (0, _dayjs.default)().format('YYYY-MM-DD HH:mm:ss');\n  next();\n});\nPostSchema.statics = {\n  getList: function (options, sort, page, limit) {\n    return this.find(options).sort({\n      [sort]: -1\n    }).skip(page * limit).populate({\n      path: 'uid',\n      select: 'name isVip pic'\n    });\n  },\n  getLists: function (page, limit) {\n    return this.find({}).skip(page * limit).limit(parseInt(limit)).populate({\n      path: 'uid',\n      select: 'name pic isVip _id'\n    });\n  },\n  // getLists: function (page, limit) {\n  //   return this.find({})\n  //     .populate({ path: 'uid' }).exec(function (err, docs) {\n  //       console.log(docs);\n  //     })\n  // },\n  getTopWeek: function () {\n    return this.find({\n      created: {\n        $gte: (0, _dayjs.default)().subtract(7, 'days')\n      }\n    }, {\n      answer: 1,\n      title: 1\n    }).sort({\n      answer: -1\n    }).limit(15);\n  },\n  findByTid: function (id) {\n    return this.findOne({\n      _id: id\n    }).populate({\n      path: 'uid',\n      select: 'name pic isVip _id'\n    });\n  }\n};\n\nconst postModel = _DBHelpler.default.model('post', PostSchema);\n\nvar _default = postModel;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlBvc3QuanMiXSwibmFtZXMiOlsiU2NoZW1hIiwibW9uZ29vc2UiLCJQb3N0U2NoZW1hIiwidWlkIiwidHlwZSIsIlN0cmluZyIsInJlZiIsInRpdGxlIiwiY29udGVudCIsImNyZWF0ZWQiLCJEYXRlIiwiY2F0YWxvZyIsImZhdnMiLCJOdW1iZXIiLCJpc0VuZCIsImRlZmF1bHQiLCJyZWFkcyIsImFuc3dlciIsInN0YXR1cyIsImlzVG9wIiwic29ydCIsInRhZ3MiLCJBcnJheSIsIm5hbWUiLCJjbGFzcyIsInByZSIsIm5leHQiLCJmb3JtYXQiLCJzdGF0aWNzIiwiZ2V0TGlzdCIsIm9wdGlvbnMiLCJwYWdlIiwibGltaXQiLCJmaW5kIiwic2tpcCIsInBvcHVsYXRlIiwicGF0aCIsInNlbGVjdCIsImdldExpc3RzIiwicGFyc2VJbnQiLCJnZXRUb3BXZWVrIiwiJGd0ZSIsInN1YnRyYWN0IiwiZmluZEJ5VGlkIiwiaWQiLCJmaW5kT25lIiwiX2lkIiwicG9zdE1vZGVsIiwibW9kZWwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUVBLE1BQU1BLE1BQU0sR0FBR0MsbUJBQVNELE1BQXhCO0FBRUEsTUFBTUUsVUFBVSxHQUFHLElBQUlGLE1BQUosQ0FBVztBQUM1QkcsRUFBQUEsR0FBRyxFQUFFO0FBQUVDLElBQUFBLElBQUksRUFBRUMsTUFBUjtBQUFnQkMsSUFBQUEsR0FBRyxFQUFFO0FBQXJCLEdBRHVCO0FBRTVCQyxFQUFBQSxLQUFLLEVBQUU7QUFBRUgsSUFBQUEsSUFBSSxFQUFFQztBQUFSLEdBRnFCO0FBRzVCRyxFQUFBQSxPQUFPLEVBQUU7QUFBRUosSUFBQUEsSUFBSSxFQUFFQztBQUFSLEdBSG1CO0FBSTVCSSxFQUFBQSxPQUFPLEVBQUU7QUFBRUwsSUFBQUEsSUFBSSxFQUFFTTtBQUFSLEdBSm1CO0FBSzVCQyxFQUFBQSxPQUFPLEVBQUU7QUFBRVAsSUFBQUEsSUFBSSxFQUFFQztBQUFSLEdBTG1CO0FBTTVCTyxFQUFB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QVVDLEVBQVYsRUFBYztBQUN2QixXQUFPLEtBQUtDLE9BQUwsQ0FBYTtBQUFFQyxNQUFBQSxHQUFHLEVBQUVGO0FBQVAsS0FBYixFQUEwQlQsUUFBMUIsQ0FBbUM7QUFDeENDLE1BQUFBLElBQUksRUFBRSxLQURrQztBQUV4Q0MsTUFBQUEsTUFBTSxFQUFFO0FBRmdDLEtBQW5DLENBQVA7QUFJRDtBQTVDa0IsQ0FBckI7O0FBK0NBLE1BQU1VLFNBQVMsR0FBRzlDLG1CQUFTK0MsS0FBVCxDQUFlLE1BQWYsRUFBdUI5QyxVQUF2QixDQUFsQjs7ZUFFZTZDLFMiLCJzb3VyY2VSb290IjoiRDpcXEhUTUwrY3NzK2pzXFxub2RlX2tvYVxcc3JjXFxtb2RlbFxcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJy4uL2NvbmZpZy9EQkhlbHBsZXInO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ2RheWpzJztcclxuXHJcbmNvbnN0IFNjaGVtYSA9IG1vbmdvb3NlLlNjaGVtYVxyXG5cclxuY29uc3QgUG9zdFNjaGVtYSA9IG5ldyBTY2hlbWEoe1xyXG4gIHVpZDogeyB0eXBlOiBTdHJpbmcsIHJlZjogJ3VzZXJzJyB9LFxyXG4gIHRpdGxlOiB7IHR5cGU6IFN0cmluZyB9LFxyXG4gIGNvbnRlbnQ6IHsgdHlwZTogU3RyaW5nIH0sXHJcbiAgY3JlYXRlZDogeyB0eXBlOiBEYXRlIH0sXHJcbiAgY2F0YWxvZzogeyB0eXBlOiBTdHJpbmcgfSxcclxuICBmYXZzOiB7IHR5cGU6IE51bWJlciB9LFxyXG4gIGlzRW5kOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJzAnIH0sXHJcbiAgcmVhZHM6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXHJcbiAgYW5zd2VyOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxyXG4gIHN0YXR1czogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcwJyB9LFxyXG4gIGlzVG9wOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJzAnIH0sXHJcbiAgc29ydDogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6ICcwJyB9LFxyXG4gIHRhZ3M6IHtcclxuICAgIHR5cGU6IEFycmF5LFxyXG4gICAgZGVmYXVsdDogW1xyXG4gICAgICB7XHJcbiAgICAgICAgbmFtZTogJycsXHJcbiAgICAgICAgY2xhc3M6ICcnXHJcbiAgICAgIH1cclxuICAgIF1cclxuICB9XHJcbn0pXHJcblxyXG5cclxuXHJcblBvc3RTY2hlbWEucHJlKCdzYXZlJywgZnVuY3Rpb24gKG5leHQpIHtcclxuICB0aGlzLmNyZWF0ZWQgPSBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW06c3MnKVxyXG4gIG5leHQoKVxyXG59KVxyXG5cclxuUG9zdFNjaGVtYS5zdGF0aWNzID0ge1xyXG4gIGdldExpc3Q6IGZ1bmN0aW9uIChvcHRpb25zLCBzb3J0LCBwYWdlLCBsaW1pdCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZmluZChvcHRpb25zKVxyXG4gICAgICAuc29ydCh7IFtzb3J0XTogLSAxIH0pXHJcbiAgICAgIC5za2lwKHBhZ2UgKiBsaW1pdClcclxuICAgICAgLnBvcHVsYXRlKHtcclxuICAgICAgICBwYXRoOiAndWlkJyxcclxuICAgICAgICBzZWxlY3Q6ICduYW1lIGlzVmlwIHBpYydcclxuICAgICAgfSlcclxuICB9LFxyXG5cclxuICBnZXRMaXN0czogZnVuY3Rpb24gKHBhZ2UsIGxpbWl0KSB7XHJcbiAgICByZXR1cm4gdGhpcy5maW5kKHt9KVxyXG4gICAgICAuc2tpcChwYWdlICogbGltaXQpLmxpbWl0KHBhcnNlSW50KGxpbWl0KSlcclxuICAgICAgLnBvcHVsYXRlKHtcclxuICAgICAgICBwYXRoOiAndWlkJyxcclxuICAgICAgICBzZWxlY3Q6ICduYW1lIHBpYyBpc1ZpcCBfaWQnXHJcbiAgICAgIH0pXHJcbiAgfSxcclxuICAvLyBnZXRMaXN0czogZnVuY3Rpb24gKHBhZ2UsIGxpbWl0KSB7XHJcbiAgLy8gICByZXR1cm4gdGhpcy5maW5kKHt9KVxyXG4gIC8vICAgICAucG9wdWxhdGUoeyBwYXRoOiAndWlkJyB9KS5leGVjKGZ1bmN0aW9uIChlcnIsIGRvY3MpIHtcclxuICAvLyAgICAgICBjb25zb2xlLmxvZyhkb2NzKTtcclxuICAvLyAgICAgfSlcclxuXHJcbiAgLy8gfSxcclxuXHJcblxyXG4gIGdldFRvcFdlZWs6IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiB0aGlzLmZpbmQoe1xyXG4gICAgICBjcmVhdGVkOiB7XHJcbiAgICAgICAgJGd0ZTogbW9tZW50KCkuc3VidHJhY3QoNywgJ2RheXMnKVxyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGFuc3dlcjogMSxcclxuICAgICAgdGl0bGU6IDFcclxuICAgIH0pLnNvcnQoeyBhbnN3ZXI6IC0xIH0pLmxpbWl0KDE1KVxyXG4gIH0sXHJcblxyXG4gIGZpbmRCeVRpZDogZnVuY3Rpb24gKGlkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5maW5kT25lKHsgX2lkOiBpZCB9KS5wb3B1bGF0ZSh7XHJcbiAgICAgIHBhdGg6ICd1aWQnLFxyXG4gICAgICBzZWxlY3Q6ICduYW1lIHBpYyBpc1ZpcCBfaWQnXHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG5cclxuY29uc3QgcG9zdE1vZGVsID0gbW9uZ29vc2UubW9kZWwoJ3Bvc3QnLCBQb3N0U2NoZW1hKVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgcG9zdE1vZGVsIl19",
    "map": {
      "version": 3,
      "sources": [
        "Post.js"
      ],
      "names": [
        "Schema",
        "mongoose",
        "PostSchema",
        "uid",
        "type",
        "String",
        "ref",
        "title",
        "content",
        "created",
        "Date",
        "catalog",
        "favs",
        "Number",
        "isEnd",
        "default",
        "reads",
        "answer",
        "status",
        "isTop",
        "sort",
        "tags",
        "Array",
        "name",
        "class",
        "pre",
        "next",
        "format",
        "statics",
        "getList",
        "options",
        "page",
        "limit",
        "find",
        "skip",
        "populate",
        "path",
        "select",
        "getLists",
        "parseInt",
        "getTopWeek",
        "$gte",
        "subtract",
        "findByTid",
        "id",
        "findOne",
        "_id",
        "postModel",
        "model"
      ],
      "mappings": "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",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\model\\",
      "sourcesContent": [
        "import mongoose from '../config/DBHelpler';\r\nimport moment from 'dayjs';\r\n\r\nconst Schema = mongoose.Schema\r\n\r\nconst PostSchema = new Schema({\r\n  uid: { type: String, ref: 'users' },\r\n  title: { type: String },\r\n  content: { type: String },\r\n  created: { type: Date },\r\n  catalog: { type: String },\r\n  favs: { type: Number },\r\n  isEnd: { type: String, default: '0' },\r\n  reads: { type: Number, default: 0 },\r\n  answer: { type: Number, default: 0 },\r\n  status: { type: String, default: '0' },\r\n  isTop: { type: String, default: '0' },\r\n  sort: { type: Number, default: '0' },\r\n  tags: {\r\n    type: Array,\r\n    default: [\r\n      {\r\n        name: '',\r\n        class: ''\r\n      }\r\n    ]\r\n  }\r\n})\r\n\r\n\r\n\r\nPostSchema.pre('save', function (next) {\r\n  this.created = moment().format('YYYY-MM-DD HH:mm:ss')\r\n  next()\r\n})\r\n\r\nPostSchema.statics = {\r\n  getList: function (options, sort, page, limit) {\r\n    return this.find(options)\r\n      .sort({ [sort]: - 1 })\r\n      .skip(page * limit)\r\n      .populate({\r\n        path: 'uid',\r\n        select: 'name isVip pic'\r\n      })\r\n  },\r\n\r\n  getLists: function (page, limit) {\r\n    return this.find({})\r\n      .skip(page * limit).limit(parseInt(limit))\r\n      .populate({\r\n        path: 'uid',\r\n        select: 'name pic isVip _id'\r\n      })\r\n  },\r\n  // getLists: function (page, limit) {\r\n  //   return this.find({})\r\n  //     .populate({ path: 'uid' }).exec(function (err, docs) {\r\n  //       console.log(docs);\r\n  //     })\r\n\r\n  // },\r\n\r\n\r\n  getTopWeek: function () {\r\n    return this.find({\r\n      created: {\r\n        $gte: moment().subtract(7, 'days')\r\n      }\r\n    }, {\r\n      answer: 1,\r\n      title: 1\r\n    }).sort({ answer: -1 }).limit(15)\r\n  },\r\n\r\n  findByTid: function (id) {\r\n    return this.findOne({ _id: id }).populate({\r\n      path: 'uid',\r\n      select: 'name pic isVip _id'\r\n    })\r\n  }\r\n}\r\n\r\nconst postModel = mongoose.model('post', PostSchema)\r\n\r\nexport default postModel"
      ]
    },
    "sourceType": "script",
    "mtime": 1632487291668
  },
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\model\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\model\\\\Comments.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\model\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\model\\Comments.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\model\\Comments.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\model\\Comments.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\model\\",
        "sourceFileName": "Comments.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _DBHelpler = _interopRequireDefault(require(\"../config/DBHelpler\"));\n\nvar _dayjs = _interopRequireDefault(require(\"dayjs\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Schema = _DBHelpler.default.Schema;\nconst CommentsSchema = new Schema({\n  tid: {\n    type: String,\n    ref: 'post'\n  },\n  cuid: {\n    type: String,\n    ref: 'users'\n  },\n  content: {\n    type: String,\n    default: '默认content'\n  },\n  commentImg: {\n    type: String\n  },\n  created: {\n    type: Date\n  },\n  hands: {\n    type: Number,\n    default: 0\n  },\n  status: {\n    type: String,\n    default: '0'\n  },\n  isRead: {\n    type: String,\n    default: '0'\n  },\n  isBest: {\n    type: String,\n    default: '0'\n  },\n  reply_count: {\n    type: Number,\n    default: 0\n  }\n});\nCommentsSchema.pre('save', function (next) {\n  this.created = (0, _dayjs.default)().format('YYYY-MM-DD HH:mm:ss');\n  next();\n});\nCommentsSchema.post('save', function (error, doc, next) {\n  if (error.name === 'MongoError' && error.code === 11000) {\n    next(new Error('There was a duplicate key error'));\n  } else {\n    next(error());\n  }\n});\nCommentsSchema.statics = {\n  findByTid: function (id) {\n    return this.find({\n      tid: id\n    });\n  },\n  getCommentsList: function (id, page, limit) {\n    return this.find({\n      tid: id\n    }).populate({\n      path: 'cuid',\n      select: '_id name pic isVip',\n      match: {\n        status: {\n          $eq: '0'\n        }\n      }\n    }).populate({\n      path: 'tid',\n      select: '_id title status'\n    }).skip(page * limit).limit(limit);\n  },\n  queryCount: function (id) {\n    return this.find({\n      tid: id\n    }).countDocuments();\n  }\n};\n\nconst Comments = _DBHelpler.default.model('comments', CommentsSchema);\n\nvar _default = Comments;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvbW1lbnRzLmpzIl0sIm5hbWVzIjpbIlNjaGVtYSIsIm1vbmdvb3NlIiwiQ29tbWVudHNTY2hlbWEiLCJ0aWQiLCJ0eXBlIiwiU3RyaW5nIiwicmVmIiwiY3VpZCIsImNvbnRlbnQiLCJkZWZhdWx0IiwiY29tbWVudEltZyIsImNyZWF0ZWQiLCJEYXRlIiwiaGFuZHMiLCJOdW1iZXIiLCJzdGF0dXMiLCJpc1JlYWQiLCJpc0Jlc3QiLCJyZXBseV9jb3VudCIsInByZSIsIm5leHQiLCJmb3JtYXQiLCJwb3N0IiwiZXJyb3IiLCJkb2MiLCJuYW1lIiwiY29kZSIsIkVycm9yIiwic3RhdGljcyIsImZpbmRCeVRpZCIsImlkIiwiZmluZCIsImdldENvbW1lbnRzTGlzdCIsInBhZ2UiLCJsaW1pdCIsInBvcHVsYXRlIiwicGF0aCIsInNlbGVjdCIsIm1hdGNoIiwiJGVxIiwic2tpcCIsInF1ZXJ5Q291bnQiLCJjb3VudERvY3VtZW50cyIsIkNvbW1lbnRzIiwibW9kZWwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUVBLE1BQU1BLE1BQU0sR0FBR0MsbUJBQVNELE1BQXhCO0FBRUEsTUFBTUUsY0FBYyxHQUFHLElBQUlGLE1BQUosQ0FBVztBQUNoQ0csRUFBQUEsR0FBRyxFQUFFO0FBQUVDLElBQUFBLElBQUksRUFBRUMsTUFBUjtBQUFnQkMsSUFBQUEsR0FBRyxFQUFFO0FBQXJCLEdBRDJCO0FBRWhDQyxFQUFBQSxJQUFJLEVBQUU7QUFBRUgsSUFBQUEsSUFBSSxFQUFFQyxNQUFSO0FBQWdCQyxJQUFBQSxHQUFHLEVBQUU7QUFBckIsR0FGMEI7QUFHaENFLEVBQUFBLE9BQU8sRUFBRTtBQUFFSixJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JJLElBQUFBLE9BQU8sRUFBRTtBQUF6QixHQUh1QjtBQUloQ0MsRUFBQUEsVUFBVSxFQUFFO0FBQUVOLElBQUFBLElBQUksRUFBRUM7QUFBUixHQUpvQjtBQUtoQ00sRUFBQUEsT0FBTyxFQUFFO0FBQUVQLElBQUFBLElBQUksRUFBRVE7QUFBUixHQUx1QjtBQU1oQ0MsRUFBQUEsS0FBSyxFQUFFO0FBQUVULElBQUFBLElBQUksRUFBRVUsTUFBUjtBQUFnQkwsSUFBQUEsT0FBTyxFQUFFO0FBQXpCLEdBTnlCO0FBT2hDTSxFQUFBQSxNQUFNLEVBQUU7QUFBRVgsSUFBQUEsSUFBSSxFQUFFQyxNQUFSO0FBQWdCSSxJQUFBQSxPQUFPLEVBQUU7QUFBekIsR0FQd0I7QUFRaENPLEVBQUFBLE1BQU0sRUFBRTtBQUFFWixJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JJLElBQUFBLE9BQU8sRUFBRTtBQUF6QixHQVJ3QjtBQVNoQ1EsRUFBQUEsTUFBTSxFQUFFO0FBQUViLElBQUFBLElBQUksRUFBRUMsTUFBUjtBQUFnQkksSUFBQUEsT0FBTyxFQUFFO0FBQXpCLEdBVHdCO0FBVWhDUyxFQUFBQSxXQUFXLEVBQUU7QUFBRWQsSUFBQUEsSUFBSSxFQUFFVSxNQUFSO0FBQWdCTCxJQUFBQSxPQUFPLEVBQUU7QUFBekI7QUFWbUIsQ0FBWCxDQUF2QjtBQWFBUCxjQUFjLENBQUNpQixHQUFmLENBQW1CLE1BQW5CLEVBQTJCLFVBQVVDLElBQVYsRUFBZ0I7QUFDekMsT0FBS1QsT0FBTCxHQUFlLHNCQUFTVSxNQUFULENBQWdCLHFCQUFoQixDQUFmO0FBQ0FELEVBQUFBLElBQUk7QUFDTCxDQUhEO0FBS0FsQixjQUFjLENBQUNvQixJQUFmLENBQW9CLE1BQXBCLEVBQTRCLFVBQVVDLEtBQVYsRUFBaUJDLEdBQWpCLEVBQXNCSixJQUF0QixFQUE0QjtBQUN0RCxNQUFJRyxLQUFLLENBQUNFLElBQU4sS0FBZSxZQUFmLElBQStCRixLQUFLLENBQUNHLElBQU4sS0FBZSxLQUFsRCxFQUF5RDtBQUN2RE4sSUFBQUEsSUFBSSxDQUFDLElBQUlPLEtBQUosQ0FBVSxpQ0FBVixDQUFELENBQUo7QUFDRCxHQUZELE1BRU87QUFDTFAsSUFBQUEsSUFBSSxDQUFDRyxLQUFLLEVBQU4sQ0FBSjtBQUNEO0FBQ0YsQ0FORDtBQVFBckIsY0FBYyxDQUFDMEIsT0FBZixHQUF5QjtBQUN2QkMsRUFBQUEsU0FBUyxFQUFFLFVBQVVDLEVBQVYsRUFBYztBQUN2QixXQUFPLEtBQUtDLElBQUwsQ0FBVTtBQUFFNUIsTUFBQUEsR0FBRyxFQUFFMkI7QUFBUCxLQUFWLENBQVA7QUFDRCxHQUhzQjtBQUl2QkUsRUFBQUEsZUFBZSxFQUFFLFVBQVVGLEVBQVYsRUFBY0csSUFBZCxFQUFvQkMsS0FBcEIsRUFBMkI7QUFDMUMsV0FBTyxLQUFLSCxJQUFMLENBQVU7QUFBRTVCLE1BQUFBLEdBQUcsRUFBRTJCO0FBQVAsS0FBVixFQUF1QkssUUFBdkIsQ0FBZ0M7QUFDckNDLE1BQUFBLElBQUksRUFBRSxNQUQrQjtBQUVyQ0MsTUFBQUEsTUFBTSxFQUFFLG9CQUY2QjtBQUdyQ0MsTUFBQUEsS0FBSyxFQUFFO0FBQUV2QixRQUFBQSxNQUFNLEVBQUU7QUFBRXdCLFVBQUFBLEdBQUcsRUFBRTtBQUFQO0FBQVY7QUFIOEIsS0FBaEMsRUFJSkosUUFKSSxDQUlLO0FBQ1ZDLE1BQUFBLElBQUksRUFBRSxLQURJO0FBRVZDLE1BQUFBLE1BQU0sRUFBRTtBQUZFLEtBSkwsRUFPSkcsSUFQSSxDQU9DUCxJQUFJLEdBQUdDLEtBUFIsRUFPZUEsS0FQZixDQU9xQkEsS0FQckIsQ0FBUDtBQVFELEdBYnNCO0FBY3ZCTyxFQUFBQSxVQUFVLEVBQUUsVUFBVVgsRUFBVixFQUFjO0FBQ3hCLFdBQU8sS0FBS0MsSUFBTCxDQUFVO0FBQUU1QixNQUFBQSxHQUFHLEVBQUUyQjtBQUFQLEtBQVYsRUFBdUJZLGNBQXZCLEVBQVA7QUFDRDtBQWhCc0IsQ0FBekI7O0FBbUJBLE1BQU1DLFFBQVEsR0FBRzFDLG1CQUFTMkMsS0FBVCxDQUFlLFVBQWYsRUFBMkIxQyxjQUEzQixDQUFqQjs7ZUFFZXlDLFEiLCJzb3VyY2VSb290IjoiRDpcXEhUTUwrY3NzK2pzXFxub2RlX2tvYVxcc3JjXFxtb2RlbFxcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJy4uL2NvbmZpZy9EQkhlbHBsZXInO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ2RheWpzJztcclxuXHJcbmNvbnN0IFNjaGVtYSA9IG1vbmdvb3NlLlNjaGVtYVxyXG5cclxuY29uc3QgQ29tbWVudHNTY2hlbWEgPSBuZXcgU2NoZW1hKHtcclxuICB0aWQ6IHsgdHlwZTogU3RyaW5nLCByZWY6ICdwb3N0JyB9LFxyXG4gIGN1aWQ6IHsgdHlwZTogU3RyaW5nLCByZWY6ICd1c2VycycgfSxcclxuICBjb250ZW50OiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJ+m7mOiupGNvbnRlbnQnIH0sXHJcbiAgY29tbWVudEltZzogeyB0eXBlOiBTdHJpbmcgfSxcclxuICBjcmVhdGVkOiB7IHR5cGU6IERhdGUgfSxcclxuICBoYW5kczogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcclxuICBzdGF0dXM6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnMCcgfSxcclxuICBpc1JlYWQ6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnMCcgfSxcclxuICBpc0Jlc3Q6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnMCcgfSxcclxuICByZXBseV9jb3VudDogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfVxyXG59KVxyXG5cclxuQ29tbWVudHNTY2hlbWEucHJlKCdzYXZlJywgZnVuY3Rpb24gKG5leHQpIHtcclxuICB0aGlzLmNyZWF0ZWQgPSBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW06c3MnKVxyXG4gIG5leHQoKVxyXG59KVxyXG5cclxuQ29tbWVudHNTY2hlbWEucG9zdCgnc2F2ZScsIGZ1bmN0aW9uIChlcnJvciwgZG9jLCBuZXh0KSB7XHJcbiAgaWYgKGVycm9yLm5hbWUgPT09ICdNb25nb0Vycm9yJyAmJiBlcnJvci5jb2RlID09PSAxMTAwMCkge1xyXG4gICAgbmV4dChuZXcgRXJyb3IoJ1RoZXJlIHdhcyBhIGR1cGxpY2F0ZSBrZXkgZXJyb3InKSlcclxuICB9IGVsc2Uge1xyXG4gICAgbmV4dChlcnJvcigpKVxyXG4gIH1cclxufSlcclxuXHJcbkNvbW1lbnRzU2NoZW1hLnN0YXRpY3MgPSB7XHJcbiAgZmluZEJ5VGlkOiBmdW5jdGlvbiAoaWQpIHtcclxuICAgIHJldHVybiB0aGlzLmZpbmQoeyB0aWQ6IGlkIH0pXHJcbiAgfSxcclxuICBnZXRDb21tZW50c0xpc3Q6IGZ1bmN0aW9uIChpZCwgcGFnZSwgbGltaXQpIHtcclxuICAgIHJldHVybiB0aGlzLmZpbmQoeyB0aWQ6IGlkIH0pLnBvcHVsYXRlKHtcclxuICAgICAgcGF0aDogJ2N1aWQnLFxyXG4gICAgICBzZWxlY3Q6ICdfaWQgbmFtZSBwaWMgaXNWaXAnLFxyXG4gICAgICBtYXRjaDogeyBzdGF0dXM6IHsgJGVxOiAnMCcgfSB9XHJcbiAgICB9KS5wb3B1bGF0ZSh7XHJcbiAgICAgIHBhdGg6ICd0aWQnLFxyXG4gICAgICBzZWxlY3Q6ICdfaWQgdGl0bGUgc3RhdHVzJ1xyXG4gICAgfSkuc2tpcChwYWdlICogbGltaXQpLmxpbWl0KGxpbWl0KVxyXG4gIH0sXHJcbiAgcXVlcnlDb3VudDogZnVuY3Rpb24gKGlkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5maW5kKHsgdGlkOiBpZCB9KS5jb3VudERvY3VtZW50cygpXHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCBDb21tZW50cyA9IG1vbmdvb3NlLm1vZGVsKCdjb21tZW50cycsIENvbW1lbnRzU2NoZW1hKVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ29tbWVudHNcclxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "Comments.js"
      ],
      "names": [
        "Schema",
        "mongoose",
        "CommentsSchema",
        "tid",
        "type",
        "String",
        "ref",
        "cuid",
        "content",
        "default",
        "commentImg",
        "created",
        "Date",
        "hands",
        "Number",
        "status",
        "isRead",
        "isBest",
        "reply_count",
        "pre",
        "next",
        "format",
        "post",
        "error",
        "doc",
        "name",
        "code",
        "Error",
        "statics",
        "findByTid",
        "id",
        "find",
        "getCommentsList",
        "page",
        "limit",
        "populate",
        "path",
        "select",
        "match",
        "$eq",
        "skip",
        "queryCount",
        "countDocuments",
        "Comments",
        "model"
      ],
      "mappings": "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",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\model\\",
      "sourcesContent": [
        "import mongoose from '../config/DBHelpler';\r\nimport moment from 'dayjs';\r\n\r\nconst Schema = mongoose.Schema\r\n\r\nconst CommentsSchema = new Schema({\r\n  tid: { type: String, ref: 'post' },\r\n  cuid: { type: String, ref: 'users' },\r\n  content: { type: String, default: '默认content' },\r\n  commentImg: { type: String },\r\n  created: { type: Date },\r\n  hands: { type: Number, default: 0 },\r\n  status: { type: String, default: '0' },\r\n  isRead: { type: String, default: '0' },\r\n  isBest: { type: String, default: '0' },\r\n  reply_count: { type: Number, default: 0 }\r\n})\r\n\r\nCommentsSchema.pre('save', function (next) {\r\n  this.created = moment().format('YYYY-MM-DD HH:mm:ss')\r\n  next()\r\n})\r\n\r\nCommentsSchema.post('save', function (error, doc, next) {\r\n  if (error.name === 'MongoError' && error.code === 11000) {\r\n    next(new Error('There was a duplicate key error'))\r\n  } else {\r\n    next(error())\r\n  }\r\n})\r\n\r\nCommentsSchema.statics = {\r\n  findByTid: function (id) {\r\n    return this.find({ tid: id })\r\n  },\r\n  getCommentsList: function (id, page, limit) {\r\n    return this.find({ tid: id }).populate({\r\n      path: 'cuid',\r\n      select: '_id name pic isVip',\r\n      match: { status: { $eq: '0' } }\r\n    }).populate({\r\n      path: 'tid',\r\n      select: '_id title status'\r\n    }).skip(page * limit).limit(limit)\r\n  },\r\n  queryCount: function (id) {\r\n    return this.find({ tid: id }).countDocuments()\r\n  }\r\n}\r\n\r\nconst Comments = mongoose.model('comments', CommentsSchema)\r\n\r\nexport default Comments\r\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1631977325273
  },
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\model\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\model\\\\CommentHands.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\model\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\model\\CommentHands.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\model\\CommentHands.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\model\\CommentHands.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\model\\",
        "sourceFileName": "CommentHands.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _DBHelpler = _interopRequireDefault(require(\"../config/DBHelpler\"));\n\nvar _dayjs = _interopRequireDefault(require(\"dayjs\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Schema = _DBHelpler.default.Schema;\nconst CommentHandsSchema = new Schema({\n  cid: {\n    type: String\n  },\n  uid: {\n    type: String\n  },\n  created: {\n    type: Date\n  }\n});\nCommentHandsSchema.pre('save', function (next) {\n  this.created = (0, _dayjs.default)().format('YYYY-MM-DD HH:mm:ss');\n  next();\n});\nCommentHandsSchema.post('save', function (error, doc, next) {\n  if (error.name === 'MongoError' && error.code === 11000) {\n    next(new Error('There was a duplicate key error'));\n  } else {\n    next(error());\n  }\n});\n\nconst CommentHands = _DBHelpler.default.model('comment_hands', CommentHandsSchema);\n\nvar _default = CommentHands;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvbW1lbnRIYW5kcy5qcyJdLCJuYW1lcyI6WyJTY2hlbWEiLCJtb25nb29zZSIsIkNvbW1lbnRIYW5kc1NjaGVtYSIsImNpZCIsInR5cGUiLCJTdHJpbmciLCJ1aWQiLCJjcmVhdGVkIiwiRGF0ZSIsInByZSIsIm5leHQiLCJmb3JtYXQiLCJwb3N0IiwiZXJyb3IiLCJkb2MiLCJuYW1lIiwiY29kZSIsIkVycm9yIiwiQ29tbWVudEhhbmRzIiwibW9kZWwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUVBLE1BQU1BLE1BQU0sR0FBR0MsbUJBQVNELE1BQXhCO0FBRUEsTUFBTUUsa0JBQWtCLEdBQUcsSUFBSUYsTUFBSixDQUFXO0FBQ3BDRyxFQUFBQSxHQUFHLEVBQUU7QUFBRUMsSUFBQUEsSUFBSSxFQUFFQztBQUFSLEdBRCtCO0FBRXBDQyxFQUFBQSxHQUFHLEVBQUU7QUFBRUYsSUFBQUEsSUFBSSxFQUFFQztBQUFSLEdBRitCO0FBR3BDRSxFQUFBQSxPQUFPLEVBQUU7QUFBRUgsSUFBQUEsSUFBSSxFQUFFSTtBQUFSO0FBSDJCLENBQVgsQ0FBM0I7QUFNQU4sa0JBQWtCLENBQUNPLEdBQW5CLENBQXVCLE1BQXZCLEVBQStCLFVBQVVDLElBQVYsRUFBZ0I7QUFDN0MsT0FBS0gsT0FBTCxHQUFlLHNCQUFTSSxNQUFULENBQWdCLHFCQUFoQixDQUFmO0FBQ0FELEVBQUFBLElBQUk7QUFDTCxDQUhEO0FBTUFSLGtCQUFrQixDQUFDVSxJQUFuQixDQUF3QixNQUF4QixFQUFnQyxVQUFVQyxLQUFWLEVBQWlCQyxHQUFqQixFQUFzQkosSUFBdEIsRUFBNEI7QUFDMUQsTUFBSUcsS0FBSyxDQUFDRSxJQUFOLEtBQWUsWUFBZixJQUErQkYsS0FBSyxDQUFDRyxJQUFOLEtBQWUsS0FBbEQsRUFBeUQ7QUFDdkROLElBQUFBLElBQUksQ0FBQyxJQUFJTyxLQUFKLENBQVUsaUNBQVYsQ0FBRCxDQUFKO0FBQ0QsR0FGRCxNQUVPO0FBQ0xQLElBQUFBLElBQUksQ0FBQ0csS0FBSyxFQUFOLENBQUo7QUFDRDtBQUNGLENBTkQ7O0FBUUEsTUFBTUssWUFBWSxHQUFHakIsbUJBQVNrQixLQUFULENBQWUsZUFBZixFQUFnQ2pCLGtCQUFoQyxDQUFyQjs7ZUFFZWdCLFkiLCJzb3VyY2VSb290IjoiRDpcXEhUTUwrY3NzK2pzXFxub2RlX2tvYVxcc3JjXFxtb2RlbFxcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJy4uL2NvbmZpZy9EQkhlbHBsZXInO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ2RheWpzJztcclxuXHJcbmNvbnN0IFNjaGVtYSA9IG1vbmdvb3NlLlNjaGVtYVxyXG5cclxuY29uc3QgQ29tbWVudEhhbmRzU2NoZW1hID0gbmV3IFNjaGVtYSh7XHJcbiAgY2lkOiB7IHR5cGU6IFN0cmluZyB9LFxyXG4gIHVpZDogeyB0eXBlOiBTdHJpbmcgfSxcclxuICBjcmVhdGVkOiB7IHR5cGU6IERhdGUgfVxyXG59KVxyXG5cclxuQ29tbWVudEhhbmRzU2NoZW1hLnByZSgnc2F2ZScsIGZ1bmN0aW9uIChuZXh0KSB7XHJcbiAgdGhpcy5jcmVhdGVkID0gbW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJylcclxuICBuZXh0KClcclxufSlcclxuXHJcblxyXG5Db21tZW50SGFuZHNTY2hlbWEucG9zdCgnc2F2ZScsIGZ1bmN0aW9uIChlcnJvciwgZG9jLCBuZXh0KSB7XHJcbiAgaWYgKGVycm9yLm5hbWUgPT09ICdNb25nb0Vycm9yJyAmJiBlcnJvci5jb2RlID09PSAxMTAwMCkge1xyXG4gICAgbmV4dChuZXcgRXJyb3IoJ1RoZXJlIHdhcyBhIGR1cGxpY2F0ZSBrZXkgZXJyb3InKSlcclxuICB9IGVsc2Uge1xyXG4gICAgbmV4dChlcnJvcigpKVxyXG4gIH1cclxufSlcclxuXHJcbmNvbnN0IENvbW1lbnRIYW5kcyA9IG1vbmdvb3NlLm1vZGVsKCdjb21tZW50X2hhbmRzJywgQ29tbWVudEhhbmRzU2NoZW1hKVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ29tbWVudEhhbmRzIl19",
    "map": {
      "version": 3,
      "sources": [
        "CommentHands.js"
      ],
      "names": [
        "Schema",
        "mongoose",
        "CommentHandsSchema",
        "cid",
        "type",
        "String",
        "uid",
        "created",
        "Date",
        "pre",
        "next",
        "format",
        "post",
        "error",
        "doc",
        "name",
        "code",
        "Error",
        "CommentHands",
        "model"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAGC,mBAASD,MAAxB;AAEA,MAAME,kBAAkB,GAAG,IAAIF,MAAJ,CAAW;AACpCG,EAAAA,GAAG,EAAE;AAAEC,IAAAA,IAAI,EAAEC;AAAR,GAD+B;AAEpCC,EAAAA,GAAG,EAAE;AAAEF,IAAAA,IAAI,EAAEC;AAAR,GAF+B;AAGpCE,EAAAA,OAAO,EAAE;AAAEH,IAAAA,IAAI,EAAEI;AAAR;AAH2B,CAAX,CAA3B;AAMAN,kBAAkB,CAACO,GAAnB,CAAuB,MAAvB,EAA+B,UAAUC,IAAV,EAAgB;AAC7C,OAAKH,OAAL,GAAe,sBAASI,MAAT,CAAgB,qBAAhB,CAAf;AACAD,EAAAA,IAAI;AACL,CAHD;AAMAR,kBAAkB,CAACU,IAAnB,CAAwB,MAAxB,EAAgC,UAAUC,KAAV,EAAiBC,GAAjB,EAAsBJ,IAAtB,EAA4B;AAC1D,MAAIG,KAAK,CAACE,IAAN,KAAe,YAAf,IAA+BF,KAAK,CAACG,IAAN,KAAe,KAAlD,EAAyD;AACvDN,IAAAA,IAAI,CAAC,IAAIO,KAAJ,CAAU,iCAAV,CAAD,CAAJ;AACD,GAFD,MAEO;AACLP,IAAAA,IAAI,CAACG,KAAK,EAAN,CAAJ;AACD;AACF,CAND;;AAQA,MAAMK,YAAY,GAAGjB,mBAASkB,KAAT,CAAe,eAAf,EAAgCjB,kBAAhC,CAArB;;eAEegB,Y",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\model\\",
      "sourcesContent": [
        "import mongoose from '../config/DBHelpler';\r\nimport moment from 'dayjs';\r\n\r\nconst Schema = mongoose.Schema\r\n\r\nconst CommentHandsSchema = new Schema({\r\n  cid: { type: String },\r\n  uid: { type: String },\r\n  created: { type: Date }\r\n})\r\n\r\nCommentHandsSchema.pre('save', function (next) {\r\n  this.created = moment().format('YYYY-MM-DD HH:mm:ss')\r\n  next()\r\n})\r\n\r\n\r\nCommentHandsSchema.post('save', function (error, doc, next) {\r\n  if (error.name === 'MongoError' && error.code === 11000) {\r\n    next(new Error('There was a duplicate key error'))\r\n  } else {\r\n    next(error())\r\n  }\r\n})\r\n\r\nconst CommentHands = mongoose.model('comment_hands', CommentHandsSchema)\r\n\r\nexport default CommentHands"
      ]
    },
    "sourceType": "script",
    "mtime": 1631635403496
  },
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\model\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\model\\\\CommentChat.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\model\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\model\\CommentChat.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\model\\CommentChat.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\model\\CommentChat.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\model\\",
        "sourceFileName": "CommentChat.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _DBHelpler = _interopRequireDefault(require(\"../config/DBHelpler\"));\n\nvar _dayjs = _interopRequireDefault(require(\"dayjs\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Schema = _DBHelpler.default.Schema;\nconst CommentChatSchema = new Schema({\n  tid: {\n    type: String\n  },\n  //文章id\n  replied_id: {\n    type: String,\n    ref: 'comment_chat'\n  },\n  comment_id: {\n    type: String\n  },\n  //评论id\n  cuid: {\n    type: String,\n    ref: 'users'\n  },\n  // 被回复人id\n  // uid: { type: String, ref: 'users' }, \n  chat_id: {\n    type: String,\n    ref: 'users'\n  },\n  // 回复人id\n  content: {\n    type: String\n  },\n  commentImg: {\n    type: String\n  },\n  created: {\n    type: Date\n  }\n});\nCommentChatSchema.pre('save', function (next) {\n  this.created = (0, _dayjs.default)().format('YYYY-MM-DD HH:mm:ss');\n  next();\n});\nCommentChatSchema.post('save', function (error, doc, next) {\n  if (error.name === 'MongoError' && error.code === 11000) {\n    next(new Error('There was a duplicate key error'));\n  } else {\n    next(error());\n  }\n});\nCommentChatSchema.statics = {\n  getCommentChatList(comment_id) {\n    return this.find({\n      comment_id: comment_id\n    }).populate({\n      path: 'cuid',\n      select: '_id name pic isVip'\n    }).populate({\n      path: 'chat_id',\n      select: '_id name pic isVip'\n    }).populate({\n      path: 'replied_id',\n      select: '_id content'\n    });\n  },\n\n  getChatOne(id) {\n    return this.findOne({\n      _id: id\n    }).populate({\n      path: 'cuid',\n      select: '_id name pic isVip'\n    }).populate({\n      path: 'chat_id',\n      select: '_id name pic isVip'\n    }).populate({\n      path: 'replied_id',\n      select: '_id content'\n    });\n  }\n\n};\n\nconst CommentChats = _DBHelpler.default.model('comment_chat', CommentChatSchema);\n\nvar _default = CommentChats;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvbW1lbnRDaGF0LmpzIl0sIm5hbWVzIjpbIlNjaGVtYSIsIm1vbmdvb3NlIiwiQ29tbWVudENoYXRTY2hlbWEiLCJ0aWQiLCJ0eXBlIiwiU3RyaW5nIiwicmVwbGllZF9pZCIsInJlZiIsImNvbW1lbnRfaWQiLCJjdWlkIiwiY2hhdF9pZCIsImNvbnRlbnQiLCJjb21tZW50SW1nIiwiY3JlYXRlZCIsIkRhdGUiLCJwcmUiLCJuZXh0IiwiZm9ybWF0IiwicG9zdCIsImVycm9yIiwiZG9jIiwibmFtZSIsImNvZGUiLCJFcnJvciIsInN0YXRpY3MiLCJnZXRDb21tZW50Q2hhdExpc3QiLCJmaW5kIiwicG9wdWxhdGUiLCJwYXRoIiwic2VsZWN0IiwiZ2V0Q2hhdE9uZSIsImlkIiwiZmluZE9uZSIsIl9pZCIsIkNvbW1lbnRDaGF0cyIsIm1vZGVsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUdDLG1CQUFTRCxNQUF4QjtBQUVBLE1BQU1FLGlCQUFpQixHQUFHLElBQUlGLE1BQUosQ0FBVztBQUNuQ0csRUFBQUEsR0FBRyxFQUFFO0FBQUVDLElBQUFBLElBQUksRUFBRUM7QUFBUixHQUQ4QjtBQUNaO0FBQ3ZCQyxFQUFBQSxVQUFVLEVBQUU7QUFBRUYsSUFBQUEsSUFBSSxFQUFFQyxNQUFSO0FBQWdCRSxJQUFBQSxHQUFHLEVBQUU7QUFBckIsR0FGdUI7QUFHbkNDLEVBQUFBLFVBQVUsRUFBRTtBQUFFSixJQUFBQSxJQUFJLEVBQUVDO0FBQVIsR0FIdUI7QUFHTDtBQUM5QkksRUFBQUEsSUFBSSxFQUFFO0FBQUVMLElBQUFBLElBQUksRUFBRUMsTUFBUjtBQUFnQkUsSUFBQUEsR0FBRyxFQUFFO0FBQXJCLEdBSjZCO0FBSUc7QUFDdEM7QUFDQUcsRUFBQUEsT0FBTyxFQUFFO0FBQUVOLElBQUFBLElBQUksRUFBRUMsTUFBUjtBQUFnQkUsSUFBQUEsR0FBRyxFQUFFO0FBQXJCLEdBTjBCO0FBTU07QUFDekNJLEVBQUFBLE9BQU8sRUFBRTtBQUFFUCxJQUFBQSxJQUFJLEVBQUVDO0FBQVIsR0FQMEI7QUFRbkNPLEVBQUFBLFVBQVUsRUFBRTtBQUFFUixJQUFBQSxJQUFJLEVBQUVDO0FBQVIsR0FSdUI7QUFTbkNRLEVBQUFBLE9BQU8sRUFBRTtBQUFFVCxJQUFBQSxJQUFJLEVBQUVVO0FBQVI7QUFUMEIsQ0FBWCxDQUExQjtBQVlBWixpQkFBaUIsQ0FBQ2EsR0FBbEIsQ0FBc0IsTUFBdEIsRUFBOEIsVUFBVUMsSUFBVixFQUFnQjtBQUM1QyxPQUFLSCxPQUFMLEdBQWUsc0JBQVNJLE1BQVQsQ0FBZ0IscUJBQWhCLENBQWY7QUFDQUQsRUFBQUEsSUFBSTtBQUNMLENBSEQ7QUFLQWQsaUJBQWlCLENBQUNnQixJQUFsQixDQUF1QixNQUF2QixFQUErQixVQUFVQyxLQUFWLEVBQWlCQyxHQUFqQixFQUFzQkosSUFBdEIsRUFBNEI7QUFDekQsTUFBSUcsS0FBSyxDQUFDRSxJQUFOLEtBQWUsWUFBZixJQUErQkYsS0FBSyxDQUFDRyxJQUFOLEtBQWUsS0FBbEQsRUFBeUQ7QUFDdkROLElBQUFBLElBQUksQ0FBQyxJQUFJTyxLQUFKLENBQVUsaUNBQVYsQ0FBRCxDQUFKO0FBQ0QsR0FGRCxNQUVPO0FBQ0xQLElBQUFBLElBQUksQ0FBQ0csS0FBSyxFQUFOLENBQUo7QUFDRDtBQUNGLENBTkQ7QUFRQWpCLGlCQUFpQixDQUFDc0IsT0FBbEIsR0FBNEI7QUFDMUJDLEVBQUFBLGtCQUFrQixDQUFFakIsVUFBRixFQUFjO0FBQzlCLFdBQU8sS0FBS2tCLElBQUwsQ0FBVTtBQUFFbEIsTUFBQUEsVUFBVSxFQUFFQTtBQUFkLEtBQVYsRUFBc0NtQixRQUF0QyxDQUErQztBQUNwREMsTUFBQUEsSUFBSSxFQUFFLE1BRDhDO0FBRXBEQyxNQUFBQSxNQUFNLEVBQUU7QUFGNEMsS0FBL0MsRUFHSkYsUUFISSxDQUdLO0FBQ1ZDLE1BQUFBLElBQUksRUFBRSxTQURJO0FBRVZDLE1BQUFBLE1BQU0sRUFBRTtBQUZFLEtBSEwsRUFNSkYsUUFOSSxDQU1LO0FBQ1ZDLE1BQUFBLElBQUksRUFBRSxZQURJO0FBRVZDLE1BQUFBLE1BQU0sRUFBRTtBQUZFLEtBTkwsQ0FBUDtBQVVELEdBWnlCOztBQWExQkMsRUFBQUEsVUFBVSxDQUFFQyxFQUFGLEVBQU07QUFDZCxXQUFPLEtBQUtDLE9BQUwsQ0FBYTtBQUFFQyxNQUFBQSxHQUFHLEVBQUVGO0FBQVAsS0FBYixFQUEwQkosUUFBMUIsQ0FBbUM7QUFDeENDLE1BQUFBLElBQUksRUFBRSxNQURrQztBQUV4Q0MsTUFBQUEsTUFBTSxFQUFFO0FBRmdDLEtBQW5DLEVBR0pGLFFBSEksQ0FHSztBQUNWQyxNQUFBQSxJQUFJLEVBQUUsU0FESTtBQUVWQyxNQUFBQSxNQUFNLEVBQUU7QUFGRSxLQUhMLEVBTUpGLFFBTkksQ0FNSztBQUNWQyxNQUFBQSxJQUFJLEVBQUUsWUFESTtBQUVWQyxNQUFBQSxNQUFNLEVBQUU7QUFGRSxLQU5MLENBQVA7QUFVRDs7QUF4QnlCLENBQTVCOztBQTJCQSxNQUFNSyxZQUFZLEdBQUdqQyxtQkFBU2tDLEtBQVQsQ0FBZSxjQUFmLEVBQStCakMsaUJBQS9CLENBQXJCOztlQUVlZ0MsWSIsInNvdXJjZVJvb3QiOiJEOlxcSFRNTCtjc3MranNcXG5vZGVfa29hXFxzcmNcXG1vZGVsXFwiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnLi4vY29uZmlnL0RCSGVscGxlcic7XHJcbmltcG9ydCBtb21lbnQgZnJvbSAnZGF5anMnO1xyXG5cclxuY29uc3QgU2NoZW1hID0gbW9uZ29vc2UuU2NoZW1hXHJcblxyXG5jb25zdCBDb21tZW50Q2hhdFNjaGVtYSA9IG5ldyBTY2hlbWEoe1xyXG4gIHRpZDogeyB0eXBlOiBTdHJpbmcgfSwgLy/mlofnq6BpZFxyXG4gIHJlcGxpZWRfaWQ6IHsgdHlwZTogU3RyaW5nLCByZWY6ICdjb21tZW50X2NoYXQnIH0sXHJcbiAgY29tbWVudF9pZDogeyB0eXBlOiBTdHJpbmcgfSwgLy/or4TorrppZFxyXG4gIGN1aWQ6IHsgdHlwZTogU3RyaW5nLCByZWY6ICd1c2VycycgfSwgLy8g6KKr5Zue5aSN5Lq6aWRcclxuICAvLyB1aWQ6IHsgdHlwZTogU3RyaW5nLCByZWY6ICd1c2VycycgfSwgXHJcbiAgY2hhdF9pZDogeyB0eXBlOiBTdHJpbmcsIHJlZjogJ3VzZXJzJyB9LCAvLyDlm57lpI3kurppZFxyXG4gIGNvbnRlbnQ6IHsgdHlwZTogU3RyaW5nIH0sXHJcbiAgY29tbWVudEltZzogeyB0eXBlOiBTdHJpbmcgfSxcclxuICBjcmVhdGVkOiB7IHR5cGU6IERhdGUgfVxyXG59KVxyXG5cclxuQ29tbWVudENoYXRTY2hlbWEucHJlKCdzYXZlJywgZnVuY3Rpb24gKG5leHQpIHtcclxuICB0aGlzLmNyZWF0ZWQgPSBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW06c3MnKVxyXG4gIG5leHQoKVxyXG59KVxyXG5cclxuQ29tbWVudENoYXRTY2hlbWEucG9zdCgnc2F2ZScsIGZ1bmN0aW9uIChlcnJvciwgZG9jLCBuZXh0KSB7XHJcbiAgaWYgKGVycm9yLm5hbWUgPT09ICdNb25nb0Vycm9yJyAmJiBlcnJvci5jb2RlID09PSAxMTAwMCkge1xyXG4gICAgbmV4dChuZXcgRXJyb3IoJ1RoZXJlIHdhcyBhIGR1cGxpY2F0ZSBrZXkgZXJyb3InKSlcclxuICB9IGVsc2Uge1xyXG4gICAgbmV4dChlcnJvcigpKVxyXG4gIH1cclxufSlcclxuXHJcbkNvbW1lbnRDaGF0U2NoZW1hLnN0YXRpY3MgPSB7XHJcbiAgZ2V0Q29tbWVudENoYXRMaXN0IChjb21tZW50X2lkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5maW5kKHsgY29tbWVudF9pZDogY29tbWVudF9pZCB9KS5wb3B1bGF0ZSh7XHJcbiAgICAgIHBhdGg6ICdjdWlkJyxcclxuICAgICAgc2VsZWN0OiAnX2lkIG5hbWUgcGljIGlzVmlwJyxcclxuICAgIH0pLnBvcHVsYXRlKHtcclxuICAgICAgcGF0aDogJ2NoYXRfaWQnLFxyXG4gICAgICBzZWxlY3Q6ICdfaWQgbmFtZSBwaWMgaXNWaXAnLFxyXG4gICAgfSkucG9wdWxhdGUoe1xyXG4gICAgICBwYXRoOiAncmVwbGllZF9pZCcsXHJcbiAgICAgIHNlbGVjdDogJ19pZCBjb250ZW50JyxcclxuICAgIH0pXHJcbiAgfSxcclxuICBnZXRDaGF0T25lIChpZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZmluZE9uZSh7IF9pZDogaWQgfSkucG9wdWxhdGUoe1xyXG4gICAgICBwYXRoOiAnY3VpZCcsXHJcbiAgICAgIHNlbGVjdDogJ19pZCBuYW1lIHBpYyBpc1ZpcCcsXHJcbiAgICB9KS5wb3B1bGF0ZSh7XHJcbiAgICAgIHBhdGg6ICdjaGF0X2lkJyxcclxuICAgICAgc2VsZWN0OiAnX2lkIG5hbWUgcGljIGlzVmlwJyxcclxuICAgIH0pLnBvcHVsYXRlKHtcclxuICAgICAgcGF0aDogJ3JlcGxpZWRfaWQnLFxyXG4gICAgICBzZWxlY3Q6ICdfaWQgY29udGVudCcsXHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG5cclxuY29uc3QgQ29tbWVudENoYXRzID0gbW9uZ29vc2UubW9kZWwoJ2NvbW1lbnRfY2hhdCcsIENvbW1lbnRDaGF0U2NoZW1hKVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ29tbWVudENoYXRzIl19",
    "map": {
      "version": 3,
      "sources": [
        "CommentChat.js"
      ],
      "names": [
        "Schema",
        "mongoose",
        "CommentChatSchema",
        "tid",
        "type",
        "String",
        "replied_id",
        "ref",
        "comment_id",
        "cuid",
        "chat_id",
        "content",
        "commentImg",
        "created",
        "Date",
        "pre",
        "next",
        "format",
        "post",
        "error",
        "doc",
        "name",
        "code",
        "Error",
        "statics",
        "getCommentChatList",
        "find",
        "populate",
        "path",
        "select",
        "getChatOne",
        "id",
        "findOne",
        "_id",
        "CommentChats",
        "model"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAGC,mBAASD,MAAxB;AAEA,MAAME,iBAAiB,GAAG,IAAIF,MAAJ,CAAW;AACnCG,EAAAA,GAAG,EAAE;AAAEC,IAAAA,IAAI,EAAEC;AAAR,GAD8B;AACZ;AACvBC,EAAAA,UAAU,EAAE;AAAEF,IAAAA,IAAI,EAAEC,MAAR;AAAgBE,IAAAA,GAAG,EAAE;AAArB,GAFuB;AAGnCC,EAAAA,UAAU,EAAE;AAAEJ,IAAAA,IAAI,EAAEC;AAAR,GAHuB;AAGL;AAC9BI,EAAAA,IAAI,EAAE;AAAEL,IAAAA,IAAI,EAAEC,MAAR;AAAgBE,IAAAA,GAAG,EAAE;AAArB,GAJ6B;AAIG;AACtC;AACAG,EAAAA,OAAO,EAAE;AAAEN,IAAAA,IAAI,EAAEC,MAAR;AAAgBE,IAAAA,GAAG,EAAE;AAArB,GAN0B;AAMM;AACzCI,EAAAA,OAAO,EAAE;AAAEP,IAAAA,IAAI,EAAEC;AAAR,GAP0B;AAQnCO,EAAAA,UAAU,EAAE;AAAER,IAAAA,IAAI,EAAEC;AAAR,GARuB;AASnCQ,EAAAA,OAAO,EAAE;AAAET,IAAAA,IAAI,EAAEU;AAAR;AAT0B,CAAX,CAA1B;AAYAZ,iBAAiB,CAACa,GAAlB,CAAsB,MAAtB,EAA8B,UAAUC,IAAV,EAAgB;AAC5C,OAAKH,OAAL,GAAe,sBAASI,MAAT,CAAgB,qBAAhB,CAAf;AACAD,EAAAA,IAAI;AACL,CAHD;AAKAd,iBAAiB,CAACgB,IAAlB,CAAuB,MAAvB,EAA+B,UAAUC,KAAV,EAAiBC,GAAjB,EAAsBJ,IAAtB,EAA4B;AACzD,MAAIG,KAAK,CAACE,IAAN,KAAe,YAAf,IAA+BF,KAAK,CAACG,IAAN,KAAe,KAAlD,EAAyD;AACvDN,IAAAA,IAAI,CAAC,IAAIO,KAAJ,CAAU,iCAAV,CAAD,CAAJ;AACD,GAFD,MAEO;AACLP,IAAAA,IAAI,CAACG,KAAK,EAAN,CAAJ;AACD;AACF,CAND;AAQAjB,iBAAiB,CAACsB,OAAlB,GAA4B;AAC1BC,EAAAA,kBAAkB,CAAEjB,UAAF,EAAc;AAC9B,WAAO,KAAKkB,IAAL,CAAU;AAAElB,MAAAA,UAAU,EAAEA;AAAd,KAAV,EAAsCmB,QAAtC,CAA+C;AACpDC,MAAAA,IAAI,EAAE,MAD8C;AAEpDC,MAAAA,MAAM,EAAE;AAF4C,KAA/C,EAGJF,QAHI,CAGK;AACVC,MAAAA,IAAI,EAAE,SADI;AAEVC,MAAAA,MAAM,EAAE;AAFE,KAHL,EAMJF,QANI,CAMK;AACVC,MAAAA,IAAI,EAAE,YADI;AAEVC,MAAAA,MAAM,EAAE;AAFE,KANL,CAAP;AAUD,GAZyB;;AAa1BC,EAAAA,UAAU,CAAEC,EAAF,EAAM;AACd,WAAO,KAAKC,OAAL,CAAa;AAAEC,MAAAA,GAAG,EAAEF;AAAP,KAAb,EAA0BJ,QAA1B,CAAmC;AACxCC,MAAAA,IAAI,EAAE,MADkC;AAExCC,MAAAA,MAAM,EAAE;AAFgC,KAAnC,EAGJF,QAHI,CAGK;AACVC,MAAAA,IAAI,EAAE,SADI;AAEVC,MAAAA,MAAM,EAAE;AAFE,KAHL,EAMJF,QANI,CAMK;AACVC,MAAAA,IAAI,EAAE,YADI;AAEVC,MAAAA,MAAM,EAAE;AAFE,KANL,CAAP;AAUD;;AAxByB,CAA5B;;AA2BA,MAAMK,YAAY,GAAGjC,mBAASkC,KAAT,CAAe,cAAf,EAA+BjC,iBAA/B,CAArB;;eAEegC,Y",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\model\\",
      "sourcesContent": [
        "import mongoose from '../config/DBHelpler';\r\nimport moment from 'dayjs';\r\n\r\nconst Schema = mongoose.Schema\r\n\r\nconst CommentChatSchema = new Schema({\r\n  tid: { type: String }, //文章id\r\n  replied_id: { type: String, ref: 'comment_chat' },\r\n  comment_id: { type: String }, //评论id\r\n  cuid: { type: String, ref: 'users' }, // 被回复人id\r\n  // uid: { type: String, ref: 'users' }, \r\n  chat_id: { type: String, ref: 'users' }, // 回复人id\r\n  content: { type: String },\r\n  commentImg: { type: String },\r\n  created: { type: Date }\r\n})\r\n\r\nCommentChatSchema.pre('save', function (next) {\r\n  this.created = moment().format('YYYY-MM-DD HH:mm:ss')\r\n  next()\r\n})\r\n\r\nCommentChatSchema.post('save', function (error, doc, next) {\r\n  if (error.name === 'MongoError' && error.code === 11000) {\r\n    next(new Error('There was a duplicate key error'))\r\n  } else {\r\n    next(error())\r\n  }\r\n})\r\n\r\nCommentChatSchema.statics = {\r\n  getCommentChatList (comment_id) {\r\n    return this.find({ comment_id: comment_id }).populate({\r\n      path: 'cuid',\r\n      select: '_id name pic isVip',\r\n    }).populate({\r\n      path: 'chat_id',\r\n      select: '_id name pic isVip',\r\n    }).populate({\r\n      path: 'replied_id',\r\n      select: '_id content',\r\n    })\r\n  },\r\n  getChatOne (id) {\r\n    return this.findOne({ _id: id }).populate({\r\n      path: 'cuid',\r\n      select: '_id name pic isVip',\r\n    }).populate({\r\n      path: 'chat_id',\r\n      select: '_id name pic isVip',\r\n    }).populate({\r\n      path: 'replied_id',\r\n      select: '_id content',\r\n    })\r\n  }\r\n}\r\n\r\nconst CommentChats = mongoose.model('comment_chat', CommentChatSchema)\r\n\r\nexport default CommentChats"
      ]
    },
    "sourceType": "script",
    "mtime": 1632396881080
  },
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\routes\\\\CommentsRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\routes\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\routes\\CommentsRouter.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\routes\\CommentsRouter.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\routes\\CommentsRouter.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\routes\\",
        "sourceFileName": "CommentsRouter.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _koaRouter = _interopRequireDefault(require(\"koa-router\"));\n\nvar _CommentsController = _interopRequireDefault(require(\"../api/CommentsController\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = new _koaRouter.default();\nrouter.prefix('/comments');\nrouter.post('/reply', _CommentsController.default.addComment);\nrouter.post('/revise', _CommentsController.default.reviseComment);\nrouter.post('/accept', _CommentsController.default.acceptComment);\nrouter.post('/sethand', _CommentsController.default.setHand);\nrouter.post('/chatRayle', _CommentsController.default.chatRayle);\nrouter.post('/chatRayleChat', _CommentsController.default.chatRayleChat);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvbW1lbnRzUm91dGVyLmpzIl0sIm5hbWVzIjpbInJvdXRlciIsIlJvdXRlciIsInByZWZpeCIsInBvc3QiLCJDb21tZW50c0NvbnRyb2xsZXIiLCJhZGRDb21tZW50IiwicmV2aXNlQ29tbWVudCIsImFjY2VwdENvbW1lbnQiLCJzZXRIYW5kIiwiY2hhdFJheWxlIiwiY2hhdFJheWxlQ2hhdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUEsTUFBTUEsTUFBTSxHQUFHLElBQUlDLGtCQUFKLEVBQWY7QUFFQUQsTUFBTSxDQUFDRSxNQUFQLENBQWMsV0FBZDtBQUVBRixNQUFNLENBQUNHLElBQVAsQ0FBWSxRQUFaLEVBQXNCQyw0QkFBbUJDLFVBQXpDO0FBQ0FMLE1BQU0sQ0FBQ0csSUFBUCxDQUFZLFNBQVosRUFBdUJDLDRCQUFtQkUsYUFBMUM7QUFDQU4sTUFBTSxDQUFDRyxJQUFQLENBQVksU0FBWixFQUF1QkMsNEJBQW1CRyxhQUExQztBQUNBUCxNQUFNLENBQUNHLElBQVAsQ0FBWSxVQUFaLEVBQXdCQyw0QkFBbUJJLE9BQTNDO0FBQ0FSLE1BQU0sQ0FBQ0csSUFBUCxDQUFZLFlBQVosRUFBMEJDLDRCQUFtQkssU0FBN0M7QUFDQVQsTUFBTSxDQUFDRyxJQUFQLENBQVksZ0JBQVosRUFBOEJDLDRCQUFtQk0sYUFBakQ7ZUFFZVYsTSIsInNvdXJjZVJvb3QiOiJEOlxcSFRNTCtjc3MranNcXG5vZGVfa29hXFxzcmNcXHJvdXRlc1xcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJvdXRlciBmcm9tICdrb2Etcm91dGVyJztcclxuaW1wb3J0IENvbW1lbnRzQ29udHJvbGxlciBmcm9tICcuLi9hcGkvQ29tbWVudHNDb250cm9sbGVyJztcclxuXHJcbmNvbnN0IHJvdXRlciA9IG5ldyBSb3V0ZXIoKVxyXG5cclxucm91dGVyLnByZWZpeCgnL2NvbW1lbnRzJylcclxuXHJcbnJvdXRlci5wb3N0KCcvcmVwbHknLCBDb21tZW50c0NvbnRyb2xsZXIuYWRkQ29tbWVudClcclxucm91dGVyLnBvc3QoJy9yZXZpc2UnLCBDb21tZW50c0NvbnRyb2xsZXIucmV2aXNlQ29tbWVudClcclxucm91dGVyLnBvc3QoJy9hY2NlcHQnLCBDb21tZW50c0NvbnRyb2xsZXIuYWNjZXB0Q29tbWVudClcclxucm91dGVyLnBvc3QoJy9zZXRoYW5kJywgQ29tbWVudHNDb250cm9sbGVyLnNldEhhbmQpXHJcbnJvdXRlci5wb3N0KCcvY2hhdFJheWxlJywgQ29tbWVudHNDb250cm9sbGVyLmNoYXRSYXlsZSlcclxucm91dGVyLnBvc3QoJy9jaGF0UmF5bGVDaGF0JywgQ29tbWVudHNDb250cm9sbGVyLmNoYXRSYXlsZUNoYXQpXHJcblxyXG5leHBvcnQgZGVmYXVsdCByb3V0ZXJcclxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "CommentsRouter.js"
      ],
      "names": [
        "router",
        "Router",
        "prefix",
        "post",
        "CommentsController",
        "addComment",
        "reviseComment",
        "acceptComment",
        "setHand",
        "chatRayle",
        "chatRayleChat"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,IAAIC,kBAAJ,EAAf;AAEAD,MAAM,CAACE,MAAP,CAAc,WAAd;AAEAF,MAAM,CAACG,IAAP,CAAY,QAAZ,EAAsBC,4BAAmBC,UAAzC;AACAL,MAAM,CAACG,IAAP,CAAY,SAAZ,EAAuBC,4BAAmBE,aAA1C;AACAN,MAAM,CAACG,IAAP,CAAY,SAAZ,EAAuBC,4BAAmBG,aAA1C;AACAP,MAAM,CAACG,IAAP,CAAY,UAAZ,EAAwBC,4BAAmBI,OAA3C;AACAR,MAAM,CAACG,IAAP,CAAY,YAAZ,EAA0BC,4BAAmBK,SAA7C;AACAT,MAAM,CAACG,IAAP,CAAY,gBAAZ,EAA8BC,4BAAmBM,aAAjD;eAEeV,M",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\routes\\",
      "sourcesContent": [
        "import Router from 'koa-router';\r\nimport CommentsController from '../api/CommentsController';\r\n\r\nconst router = new Router()\r\n\r\nrouter.prefix('/comments')\r\n\r\nrouter.post('/reply', CommentsController.addComment)\r\nrouter.post('/revise', CommentsController.reviseComment)\r\nrouter.post('/accept', CommentsController.acceptComment)\r\nrouter.post('/sethand', CommentsController.setHand)\r\nrouter.post('/chatRayle', CommentsController.chatRayle)\r\nrouter.post('/chatRayleChat', CommentsController.chatRayleChat)\r\n\r\nexport default router\r\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1631976700127
  },
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\api\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\api\\\\CommentsController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\api\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\api\\CommentsController.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\api\\CommentsController.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\api\\CommentsController.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\api\\",
        "sourceFileName": "CommentsController.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _Utils = require(\"../conmon/Utils\");\n\nvar _dayjs = _interopRequireDefault(require(\"dayjs\"));\n\nvar _index = _interopRequireDefault(require(\"../config/index\"));\n\nvar _Comments = _interopRequireDefault(require(\"../model/Comments\"));\n\nvar _Post = _interopRequireDefault(require(\"../model/Post\"));\n\nvar _test = _interopRequireDefault(require(\"../model/test\"));\n\nvar _CommentHands = _interopRequireDefault(require(\"../model/CommentHands\"));\n\nvar _CommentChat = _interopRequireDefault(require(\"../model/CommentChat\"));\n\nvar _fs = _interopRequireDefault(require(\"fs\"));\n\nvar _makeDir = _interopRequireDefault(require(\"make-dir\"));\n\nvar _uuid = require(\"uuid\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import { getJWTPayload } from '../conmon/Utils';\nconst isStatus = async token => {\n  const obj = (0, _Utils.getJWTPayload)(token);\n  const user = await _test.default.findById(obj._id);\n  return user.status === '1';\n};\n\nclass CommentsController {\n  // 新增评论\n  async addComment(ctx) {\n    const file = ctx.request.files.file;\n    const body = ctx.request.body;\n    const commentObj = {};\n    commentObj.content = body.content;\n    commentObj.tid = body.tid;\n    let flg = await isStatus(ctx.header.authorization);\n    console.log('isStatus: ', isStatus);\n    const obj = await (0, _Utils.getJWTPayload)(ctx.header.authorization); // const commentObj = { tid, content, commentImg }\n\n    if (file) {\n      const ext = file.name.split('.').pop();\n      const dir = `${_index.default.uploadPath}/${(0, _dayjs.default)().format('YYYYMMDD')}`;\n      await (0, _makeDir.default)(dir);\n      const picname = (0, _uuid.v4)();\n      const destPath = `${dir}/${picname}.${ext}`;\n\n      const render = _fs.default.createReadStream(file.path);\n\n      const upStream = _fs.default.createWriteStream(destPath);\n\n      render.pipe(upStream);\n      commentObj.commentImg = `/${(0, _dayjs.default)().format('YYYYMMDD')}/${picname}.${ext}`;\n    }\n\n    const newComment = await new _Comments.default(commentObj);\n    console.log('obj: ', obj); // const newComment = new Comments({ content: body.content })\n    // newComment.content = body.content\n\n    newComment.cuid = obj._id;\n    const comment = await newComment.save();\n    await _Post.default.updateOne({\n      _id: body.tid\n    }, {\n      $inc: {\n        answer: +1\n      }\n    });\n    ctx.body = {\n      code: 200,\n      msg: '评论成功',\n      data: commentObj\n    };\n    const findPost = await _Post.default.findById({\n      _id: body.tid\n    });\n    await _test.default.updateOne({\n      _id: findPost.uid\n    }, {\n      $inc: {\n        unread_num: 1\n      }\n    });\n    const user = await _test.default.findById({\n      _id: obj._id\n    });\n    console.log('findPost: ', findPost);\n    const notfiy = {\n      title: '文章评论',\n      unread_num: user.unread_num,\n      message: `${user.name}评论了您的文章${findPost.title}`\n    };\n    global.ws.send(findPost.uid, notfiy);\n  }\n\n  async reviseComment(ctx) {\n    // const file = ctx.request.files.file\n    // console.log('file: ', file);\n    const body = ctx.request.body; // console.log('body: ', body);\n\n    const comment = await _Comments.default.findById(body.commentId);\n    let result = {};\n    const obj = await (0, _Utils.getJWTPayload)(ctx.header.authorization);\n\n    if (obj._id === comment.cuid) {\n      if (body.content !== comment.content) {\n        result = await _Comments.default.updateOne({\n          _id: body.commentId\n        }, {\n          content: body.content\n        });\n      }\n\n      if (body.commentImg && body.commentImg !== comment.commentImg) {\n        const imgPath = await (0, _Utils.base64ToImg)(body.commentImg);\n        result = await _Comments.default.updateOne({\n          _id: body.commentId\n        }, {\n          commentImg: imgPath\n        });\n      } else if (!body.commentImg && body.commentImg !== comment.commentImg) {\n        result = await _Comments.default.updateOne({\n          _id: body.commentId\n        }, {\n          commentImg: ''\n        });\n      }\n\n      console.log('result: ', result);\n      console.log('comment: ', comment);\n      const data = await _Comments.default.findById(body.commentId);\n      ctx.body = {\n        code: 200,\n        msg: '修改成功',\n        data\n      };\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: '修改人和创建人不符合'\n      };\n    }\n    /** \r\n    if (obj._id === comment.cuid) {\r\n      console.log('校验成功');\r\n      let commentImg\r\n      if (file) {\r\n        const ext = file.name.split('.').pop()\r\n        const dir = `${config.uploadPath}/${moment().format('YYYYMMDD')}`\r\n        await mkdir(dir)\r\n        const picname = uuidv4()\r\n        const destPath = `${dir}/${picname}.${ext}`\r\n        const render = fs.createReadStream(file.path)\r\n        const upStream = fs.createWriteStream(destPath)\r\n        render.pipe(upStream)\r\n        commentImg = `/${moment().format('YYYYMMDD')}/${picname}.${ext}`\r\n        await Comments.updateOne({ _id: body.commentId }, {\r\n          commentImg: commentImg\r\n        })\r\n      } else if (body.commentImg === '') {\r\n        await Comments.updateOne({ _id: body.commentId }, {\r\n          commentImg: ''\r\n        })\r\n      }\r\n        await Comments.updateOne({ _id: body.commentId }, {\r\n        content: body.content\r\n      })\r\n      \r\n      ctx.body = {\r\n        code: 200,\r\n        data: {\r\n          content: body.content,\r\n          commentImg\r\n        }\r\n      }\r\n    } else {\r\n      ctx.body = {\r\n        code: 500,\r\n        msg: '修改人和创建人不符合'\r\n      }\r\n    }\r\n    */\n\n  } // 采纳评论\n\n\n  async acceptComment(ctx) {\n    const body = ctx.request.body;\n    const bodyTid = body.tid._id;\n    console.log('bodyTid: ', bodyTid);\n    const obj = await (0, _Utils.getJWTPayload)(ctx.header.authorization);\n    const comment = await _Comments.default.findById(body.id);\n    const post = await _Post.default.findById(bodyTid);\n\n    if (post.uid === obj._id) {\n      const fav = post.favs ? post.favs : 0;\n\n      if (comment.tid === bodyTid && comment.isBest !== '1' && post.isEnd !== '1') {\n        await _Comments.default.updateOne({\n          _id: body.id\n        }, {\n          $set: {\n            isBest: '1'\n          }\n        });\n        await _Post.default.updateOne({\n          _id: bodyTid\n        }, {\n          $set: {\n            isEnd: '1'\n          }\n        });\n\n        if (comment.cuid !== post.uid) {\n          // await Users.updateOne({ _id: post.uid }, {\n          //   $inc: {\n          //     favs: - parseInt(fav)\n          //   }\n          // })\n          await _test.default.updateOne({\n            _id: comment.cuid\n          }, {\n            $inc: {\n              favs: parseInt(fav)\n            }\n          });\n        }\n\n        console.log('body: ', body);\n        ctx.body = {\n          code: 200\n        };\n      } else {\n        ctx.body = {\n          code: 501,\n          msg: '文章和对应评论不一致'\n        };\n      }\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: '只有文章作者才能采纳'\n      };\n    }\n  } //评论回复\n\n\n  async chatRayle(ctx) {\n    const body = ctx.request.body; // console.log('body: ', body);c\n\n    const commentImg = body.commentImg ? await (0, _Utils.base64ToImg)(body.commentImg) : '';\n    const obj = await (0, _Utils.getJWTPayload)(ctx.header.authorization);\n    body.commentImg = commentImg;\n    body.chat_id = obj._id;\n    const chat = await new _CommentChat.default(body);\n    const result = await chat.save();\n    await _Comments.default.updateOne({\n      _id: body.comment_id\n    }, {\n      $inc: {\n        reply_count: 1\n      }\n    });\n    console.log('result: ', result);\n    ctx.body = {\n      code: 200,\n      data: result\n    };\n  } // 评论回复 再回复\n\n\n  async chatRayleChat(ctx) {\n    const body = ctx.request.body;\n    const commentImg = body.commentImg ? await (0, _Utils.base64ToImg)(body.commentImg) : '';\n    body.commentImg = commentImg;\n    const obj = await (0, _Utils.getJWTPayload)(ctx.header.authorization);\n    body.chat_id = obj._id;\n    console.log('body: ', body);\n    const chat = await new _CommentChat.default(body);\n    const result = await chat.save();\n    await _Comments.default.updateOne({\n      _id: body.comment_id\n    }, {\n      $inc: {\n        reply_count: 1\n      }\n    });\n    const data = await _CommentChat.default.getChatOne(result.id);\n    console.log('data: ', data);\n    ctx.body = {\n      code: 200,\n      data: data\n    };\n  } // 点赞\n\n\n  async setHand(ctx) {\n    const body = ctx.request.body;\n    console.log('body: ', body);\n    const obj = await (0, _Utils.getJWTPayload)(ctx.header.authorization);\n    const findHands = await _CommentHands.default.findOne({\n      cid: body.cid\n    });\n\n    if (body.handed === '0' && !findHands) {\n      const hands = new _CommentHands.default(body);\n      const data = await hands.save();\n      const result = await _Comments.default.updateOne({\n        _id: body.cid\n      }, {\n        $inc: {\n          hands: 1\n        }\n      });\n\n      if (result.ok === 1) {\n        ctx.body = {\n          code: 200,\n          data: data,\n          msg: '点赞成功'\n        };\n      } else {\n        ctx.body = {\n          code: 500,\n          msg: 点赞失败\n        };\n      }\n    } else if (body.handed === '1' && findHands && obj._id === findHands.uid) {\n      await _CommentHands.default.deleteOne({\n        _id: findHands._id\n      });\n      const result = await _Comments.default.updateOne({\n        _id: body.cid\n      }, {\n        $inc: {\n          hands: -1\n        }\n      });\n\n      if (result.ok === 1) {\n        ctx.body = {\n          code: 200,\n          msg: '取消点赞成功'\n        };\n      }\n    }\n  }\n\n}\n\nvar _default = new CommentsController();\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvbW1lbnRzQ29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJpc1N0YXR1cyIsInRva2VuIiwib2JqIiwidXNlciIsIlVzZXJzIiwiZmluZEJ5SWQiLCJfaWQiLCJzdGF0dXMiLCJDb21tZW50c0NvbnRyb2xsZXIiLCJhZGRDb21tZW50IiwiY3R4IiwiZmlsZSIsInJlcXVlc3QiLCJmaWxlcyIsImJvZHkiLCJjb21tZW50T2JqIiwiY29udGVudCIsInRpZCIsImZsZyIsImhlYWRlciIsImF1dGhvcml6YXRpb24iLCJjb25zb2xlIiwibG9nIiwiZXh0IiwibmFtZSIsInNwbGl0IiwicG9wIiwiZGlyIiwiY29uZmlnIiwidXBsb2FkUGF0aCIsImZvcm1hdCIsInBpY25hbWUiLCJkZXN0UGF0aCIsInJlbmRlciIsImZzIiwiY3JlYXRlUmVhZFN0cmVhbSIsInBhdGgiLCJ1cFN0cmVhbSIsImNyZWF0ZVdyaXRlU3RyZWFtIiwicGlwZSIsImNvbW1lbnRJbWciLCJuZXdDb21tZW50IiwiQ29tbWVudHMiLCJjdWlkIiwiY29tbWVudCIsInNhdmUiLCJQb3N0IiwidXBkYXRlT25lIiwiJGluYyIsImFuc3dlciIsImNvZGUiLCJtc2ciLCJkYXRhIiwiZmluZFBvc3QiLCJ1aWQiLCJ1bnJlYWRfbnVtIiwibm90Zml5IiwidGl0bGUiLCJtZXNzYWdlIiwiZ2xvYmFsIiwid3MiLCJzZW5kIiwicmV2aXNlQ29tbWVudCIsImNvbW1lbnRJZCIsInJlc3VsdCIsImltZ1BhdGgiLCJhY2NlcHRDb21tZW50IiwiYm9keVRpZCIsImlkIiwicG9zdCIsImZhdiIsImZhdnMiLCJpc0Jlc3QiLCJpc0VuZCIsIiRzZXQiLCJwYXJzZUludCIsImNoYXRSYXlsZSIsImNoYXRfaWQiLCJjaGF0IiwiQ2hhdHMiLCJjb21tZW50X2lkIiwicmVwbHlfY291bnQiLCJjaGF0UmF5bGVDaGF0IiwiZ2V0Q2hhdE9uZSIsInNldEhhbmQiLCJmaW5kSGFuZHMiLCJIYW5kcyIsImZpbmRPbmUiLCJjaWQi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QUFKLEUiLCJzb3VyY2VSb290IjoiRDpcXEhUTUwrY3NzK2pzXFxub2RlX2tvYVxcc3JjXFxhcGlcXCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEpXVFBheWxvYWQsIGJhc2U2NFRvSW1nIH0gZnJvbSAnLi4vY29ubW9uL1V0aWxzJztcclxuLy8gaW1wb3J0IHsgZ2V0SldUUGF5bG9hZCB9IGZyb20gJy4uL2Nvbm1vbi9VdGlscyc7XHJcbmltcG9ydCBtb21lbnQgZnJvbSAnZGF5anMnO1xyXG5pbXBvcnQgY29uZmlnIGZyb20gJy4uL2NvbmZpZy9pbmRleCc7XHJcblxyXG5pbXBvcnQgQ29tbWVudHMgZnJvbSAnLi4vbW9kZWwvQ29tbWVudHMnO1xyXG5pbXBvcnQgUG9zdCBmcm9tICcuLi9tb2RlbC9Qb3N0JztcclxuaW1wb3J0IFVzZXJzIGZyb20gJy4uL21vZGVsL3Rlc3QnO1xyXG5pbXBvcnQgSGFuZHMgZnJvbSAnLi4vbW9kZWwvQ29tbWVudEhhbmRzJztcclxuaW1wb3J0IENoYXRzIGZyb20gJy4uL21vZGVsL0NvbW1lbnRDaGF0JztcclxuXHJcblxyXG5cclxuaW1wb3J0IGZzIGZyb20gJ2ZzJztcclxuaW1wb3J0IG1rZGlyIGZyb20gJ21ha2UtZGlyJztcclxuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XHJcblxyXG5jb25zdCBpc1N0YXR1cyA9IGFzeW5jICh0b2tlbikgPT4ge1xyXG4gIGNvbnN0IG9iaiA9IGdldEpXVFBheWxvYWQodG9rZW4pXHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJzLmZpbmRCeUlkKG9iai5faWQpXHJcbiAgcmV0dXJuIHVzZXIuc3RhdHVzID09PSAnMSdcclxufVxyXG5cclxuY2xhc3MgQ29tbWVudHNDb250cm9sbGVyIHtcclxuXHJcbiAgLy8g5paw5aKe6K+E6K66XHJcbiAgYXN5bmMgYWRkQ29tbWVudCAoY3R4KSB7XHJcbiAgICBjb25zdCBmaWxlID0gY3R4LnJlcXVlc3QuZmlsZXMuZmlsZVxyXG4gICAgY29uc3QgYm9keSA9IGN0eC5yZXF1ZXN0LmJvZHlcclxuICAgIGNvbnN0IGNvbW1lbnRPYmogPSB7fVxyXG4gICAgY29tbWVudE9iai5jb250ZW50ID0gYm9keS5jb250ZW50XHJcbiAgICBjb21tZW50T2JqLnRpZCA9IGJvZHkudGlkXHJcbiAgICBsZXQgZmxnID0gYXdhaXQgaXNTdGF0dXMoY3R4LmhlYWRlci5hdXRob3JpemF0aW9uKVxyXG4gICAgY29uc29sZS5sb2coJ2lzU3RhdHVzOiAnLCBpc1N0YXR1cyk7XHJcblxyXG4gICAgY29uc3Qgb2JqID0gYXdhaXQgZ2V0SldUUGF5bG9hZChjdHguaGVhZGVyLmF1dGhvcml6YXRpb24pXHJcblxyXG4gICAgLy8gY29uc3QgY29tbWVudE9iaiA9IHsgdGlkLCBjb250ZW50LCBjb21tZW50SW1nIH1cclxuXHJcbiAgICBpZiAoZmlsZSkge1xyXG4gICAgICBjb25zdCBleHQgPSBmaWxlLm5hbWUuc3BsaXQoJy4nKS5wb3AoKVxyXG4gICAgICBjb25zdCBkaXIgPSBgJHtjb25maWcudXBsb2FkUGF0aH0vJHttb21lbnQoKS5mb3JtYXQoJ1lZWVlNTUREJyl9YFxyXG4gICAgICBhd2FpdCBta2RpcihkaXIpXHJcbiAgICAgIGNvbnN0IHBpY25hbWUgPSB1dWlkdjQoKVxyXG4gICAgICBjb25zdCBkZXN0UGF0aCA9IGAke2Rpcn0vJHtwaWNuYW1lfS4ke2V4dH1gXHJcbiAgICAgIGNvbnN0IHJlbmRlciA9IGZzLmNyZWF0ZVJlYWRTdHJlYW0oZmlsZS5wYXRoKVxyXG4gICAgICBjb25zdCB1cFN0cmVhbSA9IGZzLmNyZWF0ZVdyaXRlU3RyZWFtKGRlc3RQYXRoKVxyXG4gICAgICByZW5kZXIucGlwZSh1cFN0cmVhbSlcclxuICAgICAgY29tbWVudE9iai5jb21tZW50SW1nID0gYC8ke21vbWVudCgpLmZvcm1hdCgnWVlZWU1NREQnKX0vJHtwaWNuYW1lfS4ke2V4dH1gXHJcbiAgICB9XHJcbiAgICBjb25zdCBuZXdDb21tZW50ID0gYXdhaXQgbmV3IENvbW1lbnRzKGNvbW1lbnRPYmopXHJcblxyXG4gICAgY29uc29sZS5sb2coJ29iajogJywgb2JqKTtcclxuICAgIC8vIGNvbnN0IG5ld0NvbW1lbnQgPSBuZXcgQ29tbWVudHMoeyBjb250ZW50OiBib2R5LmNvbnRlbnQgfSlcclxuXHJcbiAgICAvLyBuZXdDb21tZW50LmNvbnRlbnQgPSBib2R5LmNvbnRlbnRcclxuICAgIG5ld0NvbW1lbnQuY3VpZCA9IG9iai5faWRcclxuICAgIGNvbnN0IGNvbW1lbnQgPSBhd2FpdCBuZXdDb21tZW50LnNhdmUoKVxyXG4gICAgYXdhaXQgUG9zdC51cGRhdGVPbmUoeyBfaWQ6IGJvZHkudGlkIH0sIHtcclxuICAgICAgJGluYzoge1xyXG4gICAgICAgIGFuc3dlcjogKzFcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIGN0eC5ib2R5ID0ge1xyXG4gICAgICBjb2RlOiAyMDAsXHJcbiAgICAgIG1zZzogJ+ivhOiuuuaIkOWKnycsXHJcbiAgICAgIGRhdGE6IGNvbW1lbnRPYmpcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBmaW5kUG9zdCA9IGF3YWl0IFBvc3QuZmluZEJ5SWQoeyBfaWQ6IGJvZHkudGlkIH0pXHJcbiAgICBhd2FpdCBVc2Vycy51cGRhdGVPbmUoeyBfaWQ6IGZpbmRQb3N0LnVpZCB9LCB7XHJcbiAgICAgICRpbmM6IHtcclxuICAgICAgICB1bnJlYWRfbnVtOiAxXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZEJ5SWQoeyBfaWQ6IG9iai5faWQgfSlcclxuICAgIGNvbnNvbGUubG9nKCdmaW5kUG9zdDogJywgZmluZFBvc3QpO1xyXG4gICAgY29uc3Qgbm90Zml5ID0ge1xyXG4gICAgICB0aXRsZTogJ+aWh+eroOivhOiuuicsXHJcbiAgICAgIHVucmVhZF9udW06IHVzZXIudW5yZWFkX251bSxcclxuICAgICAgbWVzc2FnZTogYCR7dXNlci5uYW1lfeivhOiuuuS6huaCqOeahOaWh+eroCR7ZmluZFBvc3QudGl0bGV9YFxyXG4gICAgfVxyXG4gICAgZ2xvYmFsLndzLnNlbmQoZmluZFBvc3QudWlkLCBub3RmaXkpXHJcblxyXG4gIH1cclxuXHJcbiAgYXN5bmMgcmV2aXNlQ29tbWVudCAoY3R4KSB7XHJcbiAgICAvLyBjb25zdCBmaWxlID0gY3R4LnJlcXVlc3QuZmlsZXMuZmlsZVxyXG4gICAgLy8gY29uc29sZS5sb2coJ2ZpbGU6ICcsIGZpbGUpO1xyXG4gICAgY29uc3QgYm9keSA9IGN0eC5yZXF1ZXN0LmJvZHlcclxuICAgIC8vIGNvbnNvbGUubG9nKCdib2R5OiAnLCBib2R5KTtcclxuICAgIGNvbnN0IGNvbW1lbnQgPSBhd2FpdCBDb21tZW50cy5maW5kQnlJZChib2R5LmNvbW1lbnRJZClcclxuXHJcbiAgICBsZXQgcmVzdWx0ID0ge31cclxuXHJcbiAgICBjb25zdCBvYmogPSBhd2FpdCBnZXRKV1RQYXlsb2FkKGN0eC5oZWFkZXIuYXV0aG9yaXphdGlvbilcclxuICAgIGlmIChvYmouX2lkID09PSBjb21tZW50LmN1aWQpIHtcclxuICAgICAgaWYgKGJvZHkuY29udGVudCAhPT0gY29tbWVudC5jb250ZW50KSB7XHJcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgQ29tbWVudHMudXBkYXRlT25lKHsgX2lkOiBib2R5LmNvbW1lbnRJZCB9LCB7XHJcbiAgICAgICAgICBjb250ZW50OiBib2R5LmNvbnRlbnRcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChib2R5LmNvbW1lbnRJbWcgJiYgYm9keS5jb21tZW50SW1nICE9PSBjb21tZW50LmNvbW1lbnRJbWcpIHtcclxuICAgICAgICBjb25zdCBpbWdQYXRoID0gYXdhaXQgYmFzZTY0VG9JbWcoYm9keS5jb21tZW50SW1nKVxyXG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IENvbW1lbnRzLnVwZGF0ZU9uZSh7IF9pZDogYm9keS5jb21tZW50SWQgfSwge1xyXG5cclxuICAgICAgICAgIGNvbW1lbnRJbWc6IGltZ1BhdGhcclxuICAgICAgICB9KVxyXG4gICAgICB9IGVsc2UgaWYgKCFib2R5LmNvbW1lbnRJbWcgJiYgYm9keS5jb21tZW50SW1nICE9PSBjb21tZW50LmNvbW1lbnRJbWcpIHtcclxuICAgICAgICByZXN1bHQgPSBhd2FpdCBDb21tZW50cy51cGRhdGVPbmUoeyBfaWQ6IGJvZHkuY29tbWVudElkIH0sIHtcclxuXHJcbiAgICAgICAgICBjb21tZW50SW1nOiAnJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgICAgY29uc29sZS5sb2coJ3Jlc3VsdDogJywgcmVzdWx0KTtcclxuICAgICAgY29uc29sZS5sb2coJ2NvbW1lbnQ6ICcsIGNvbW1lbnQpO1xyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgQ29tbWVudHMuZmluZEJ5SWQoYm9keS5jb21tZW50SWQpXHJcbiAgICAgIGN0eC5ib2R5ID0ge1xyXG4gICAgICAgIGNvZGU6IDIwMCxcclxuICAgICAgICBtc2c6ICfkv67mlLnmiJDlip8nLFxyXG4gICAgICAgIGRhdGFcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY3R4LmJvZHkgPSB7XHJcbiAgICAgICAgY29kZTogNTAwLFxyXG4gICAgICAgIG1zZzogJ+S/ruaUueS6uuWSjOWIm+W7uuS6uuS4jeespuWQiCdcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiBcclxuICAgIGlmIChvYmouX2lkID09PSBjb21tZW50LmN1aWQpIHtcclxuICAgICAgY29uc29sZS5sb2coJ+agoemqjOaIkOWKnycpO1xyXG4gICAgICBsZXQgY29tbWVudEltZ1xyXG4gICAgICBpZiAoZmlsZSkge1xyXG4gICAgICAgIGNvbnN0IGV4dCA9IGZpbGUubmFtZS5zcGxpdCgnLicpLnBvcCgpXHJcbiAgICAgICAgY29uc3QgZGlyID0gYCR7Y29uZmlnLnVwbG9hZFBhdGh9LyR7bW9tZW50KCkuZm9ybWF0KCdZWVlZTU1ERCcpfWBcclxuICAgICAgICBhd2FpdCBta2RpcihkaXIpXHJcbiAgICAgICAgY29uc3QgcGljbmFtZSA9IHV1aWR2NCgpXHJcbiAgICAgICAgY29uc3QgZGVzdFBhdGggPSBgJHtkaXJ9LyR7cGljbmFtZX0uJHtleHR9YFxyXG4gICAgICAgIGNvbnN0IHJlbmRlciA9IGZzLmNyZWF0ZVJlYWRTdHJlYW0oZmlsZS5wYXRoKVxyXG4gICAgICAgIGNvbnN0IHVwU3RyZWFtID0gZnMuY3JlYXRlV3JpdGVTdHJlYW0oZGVzdFBhdGgpXHJcbiAgICAgICAgcmVuZGVyLnBpcGUodXBTdHJlYW0pXHJcbiAgICAgICAgY29tbWVudEltZyA9IGAvJHttb21lbnQoKS5mb3JtYXQoJ1lZWVlNTUREJyl9LyR7cGljbmFtZX0uJHtleHR9YFxyXG4gICAgICAgIGF3YWl0IENvbW1lbnRzLnVwZGF0ZU9uZSh7IF9pZDogYm9keS5jb21tZW50SWQgfSwge1xyXG4gICAgICAgICAgY29tbWVudEltZzogY29tbWVudEltZ1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH0gZWxzZSBpZiAoYm9keS5jb21tZW50SW1nID09PSAnJykge1xyXG4gICAgICAgIGF3YWl0IENvbW1lbnRzLnVwZGF0ZU9uZSh7IF9pZDogYm9keS5jb21tZW50SWQgfSwge1xyXG4gICAgICAgICAgY29tbWVudEltZzogJydcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcblxyXG4gICAgICBhd2FpdCBDb21tZW50cy51cGRhdGVPbmUoeyBfaWQ6IGJvZHkuY29tbWVudElkIH0sIHtcclxuICAgICAgICBjb250ZW50OiBib2R5LmNvbnRlbnRcclxuICAgICAgfSlcclxuICAgICAgXHJcbiAgICAgIGN0eC5ib2R5ID0ge1xyXG4gICAgICAgIGNvZGU6IDIwMCxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICBjb250ZW50OiBib2R5LmNvbnRlbnQsXHJcbiAgICAgICAgICBjb21tZW50SW1nXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjdHguYm9keSA9IHtcclxuICAgICAgICBjb2RlOiA1MDAsXHJcbiAgICAgICAgbXNnOiAn5L+u5pS55Lq65ZKM5Yib5bu65Lq65LiN56ym5ZCIJ1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAqL1xyXG4gIH1cclxuICAvLyDph4fnurPor4TorrpcclxuICBhc3luYyBhY2NlcHRDb21tZW50IChjdHgpIHtcclxuICAgIGNvbnN0IGJvZHkgPSBjdHgucmVxdWVzdC5ib2R5XHJcbiAgICBjb25zdCBib2R5VGlkID0gYm9keS50aWQuX2lkXHJcbiAgICBjb25zb2xlLmxvZygnYm9keVRpZDogJywgYm9keVRpZCk7XHJcbiAgICBjb25zdCBvYmogPSBhd2FpdCBnZXRKV1RQYXlsb2FkKGN0eC5oZWFkZXIuYXV0aG9yaXphdGlvbilcclxuICAgIGNvbnN0IGNvbW1lbnQgPSBhd2FpdCBDb21tZW50cy5maW5kQnlJZChib2R5LmlkKVxyXG4gICAgY29uc3QgcG9zdCA9IGF3YWl0IFBvc3QuZmluZEJ5SWQoYm9keVRpZClcclxuICAgIGlmIChwb3N0LnVpZCA9PT0gb2JqLl9pZCkge1xyXG4gICAgICBjb25zdCBmYXYgPSBwb3N0LmZhdnMgPyBwb3N0LmZhdnMgOiAwXHJcbiAgICAgIGlmIChjb21tZW50LnRpZCA9PT0gYm9keVRpZCAmJiBjb21tZW50LmlzQmVzdCAhPT0gJzEnICYmIHBvc3QuaXNFbmQgIT09ICcxJykge1xyXG4gICAgICAgIGF3YWl0IENvbW1lbnRzLnVwZGF0ZU9uZSh7IF9pZDogYm9keS5pZCB9LCB7XHJcbiAgICAgICAgICAkc2V0OiB7XHJcbiAgICAgICAgICAgIGlzQmVzdDogJzEnXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBhd2FpdCBQb3N0LnVwZGF0ZU9uZSh7IF9pZDogYm9keVRpZCB9LCB7XHJcbiAgICAgICAgICAkc2V0OiB7XHJcbiAgICAgICAgICAgIGlzRW5kOiAnMSdcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIGlmIChjb21tZW50LmN1aWQgIT09IHBvc3QudWlkKSB7XHJcbiAgICAgICAgICAvLyBhd2FpdCBVc2Vycy51cGRhdGVPbmUoeyBfaWQ6IHBvc3QudWlkIH0sIHtcclxuICAgICAgICAgIC8vICAgJGluYzoge1xyXG4gICAgICAgICAgLy8gICAgIGZhdnM6IC0gcGFyc2VJbnQoZmF2KVxyXG4gICAgICAgICAgLy8gICB9XHJcbiAgICAgICAgICAvLyB9KVxyXG4gICAgICAgICAgYXdhaXQgVXNlcnMudXBkYXRlT25lKHsgX2lkOiBjb21tZW50LmN1aWQgfSwge1xyXG4gICAgICAgICAgICAkaW5jOiB7XHJcbiAgICAgICAgICAgICAgZmF2czogcGFyc2VJbnQoZmF2KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZygnYm9keTogJywgYm9keSk7XHJcbiAgICAgICAgY3R4LmJvZHkgPSB7XHJcbiAgICAgICAgICBjb2RlOiAyMDBcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY3R4LmJvZHkgPSB7XHJcbiAgICAgICAgICBjb2RlOiA1MDEsXHJcbiAgICAgICAgICBtc2c6ICfmlofnq6Dlkozlr7nlupTor4TorrrkuI3kuIDoh7QnXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjdHguYm9keSA9IHtcclxuICAgICAgICBjb2RlOiA1MDAsXHJcbiAgICAgICAgbXNnOiAn5Y+q5pyJ5paH56ug5L2c6ICF5omN6IO96YeH57qzJ1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gIH1cclxuICAvL+ivhOiuuuWbnuWkjVxyXG4gIGFzeW5jIGNoYXRSYXlsZSAoY3R4KSB7XHJcbiAgICBjb25zdCBib2R5ID0gY3R4LnJlcXVlc3QuYm9keVxyXG4gICAgLy8gY29uc29sZS5sb2coJ2JvZHk6ICcsIGJvZHkpO2NcclxuICAgIGNvbnN0IGNvbW1lbnRJbWcgPSBib2R5LmNvbW1lbnRJbWcgPyBhd2FpdCBiYXNlNjRUb0ltZyhib2R5LmNvbW1lbnRJbWcpIDogJydcclxuICAgIGNvbnN0IG9iaiA9IGF3YWl0IGdldEpXVFBheWxvYWQoY3R4LmhlYWRlci5hdXRob3JpemF0aW9uKVxyXG4gICAgYm9keS5jb21tZW50SW1nID0gY29tbWVudEltZ1xyXG4gICAgYm9keS5jaGF0X2lkID0gb2JqLl9pZFxyXG4gICAgY29uc3QgY2hhdCA9IGF3YWl0IG5ldyBDaGF0cyhib2R5KVxyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hhdC5zYXZlKClcclxuICAgIGF3YWl0IENvbW1lbnRzLnVwZGF0ZU9uZSh7IF9pZDogYm9keS5jb21tZW50X2lkIH0sIHtcclxuICAgICAgJGluYzoge1xyXG4gICAgICAgIHJlcGx5X2NvdW50OiAxXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICBjb25zb2xlLmxvZygncmVzdWx0OiAnLCByZXN1bHQpO1xyXG4gICAgY3R4LmJvZHkgPSB7XHJcbiAgICAgIGNvZGU6IDIwMCxcclxuICAgICAgZGF0YTogcmVzdWx0XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vIOivhOiuuuWbnuWkjSDlho3lm57lpI1cclxuICBhc3luYyBjaGF0UmF5bGVDaGF0IChjdHgpIHtcclxuICAgIGNvbnN0IGJvZHkgPSBjdHgucmVxdWVzdC5ib2R5XHJcbiAgICBjb25zdCBjb21tZW50SW1nID0gYm9keS5jb21tZW50SW1nID8gYXdhaXQgYmFzZTY0VG9JbWcoYm9keS5jb21tZW50SW1nKSA6ICcnXHJcbiAgICBib2R5LmNvbW1lbnRJbWcgPSBjb21tZW50SW1nXHJcbiAgICBjb25zdCBvYmogPSBhd2FpdCBnZXRKV1RQYXlsb2FkKGN0eC5oZWFkZXIuYXV0aG9yaXphdGlvbilcclxuICAgIGJvZHkuY2hhdF9pZCA9IG9iai5faWRcclxuICAgIGNvbnNvbGUubG9nKCdib2R5OiAnLCBib2R5KTtcclxuICAgIGNvbnN0IGNoYXQgPSBhd2FpdCBuZXcgQ2hhdHMoYm9keSlcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNoYXQuc2F2ZSgpXHJcbiAgICBhd2FpdCBDb21tZW50cy51cGRhdGVPbmUoeyBfaWQ6IGJvZHkuY29tbWVudF9pZCB9LCB7XHJcbiAgICAgICRpbmM6IHtcclxuICAgICAgICByZXBseV9jb3VudDogMVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBDaGF0cy5nZXRDaGF0T25lKHJlc3VsdC5pZClcclxuICAgIGNvbnNvbGUubG9nKCdkYXRhOiAnLCBkYXRhKTtcclxuICAgIGN0eC5ib2R5ID0ge1xyXG4gICAgICBjb2RlOiAyMDAsXHJcbiAgICAgIGRhdGE6IGRhdGFcclxuICAgIH1cclxuICB9XHJcbiAgLy8g54K56LWeXHJcbiAgYXN5bmMgc2V0SGFuZCAoY3R4KSB7XHJcbiAgICBjb25zdCBib2R5ID0gY3R4LnJlcXVlc3QuYm9keVxyXG4gICAgY29uc29sZS5sb2coJ2JvZHk6ICcsIGJvZHkpO1xyXG4gICAgY29uc3Qgb2JqID0gYXdhaXQgZ2V0SldUUGF5bG9hZChjdHguaGVhZGVyLmF1dGhvcml6YXRpb24pXHJcblxyXG4gICAgY29uc3QgZmluZEhhbmRzID0gYXdhaXQgSGFuZHMuZmluZE9uZSh7IGNpZDogYm9keS5jaWQgfSlcclxuICAgIGlmIChib2R5LmhhbmRlZCA9PT0gJzAnICYmICFmaW5kSGFuZHMpIHtcclxuICAgICAgY29uc3QgaGFuZHMgPSBuZXcgSGFuZHMoYm9keSlcclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGhhbmRzLnNhdmUoKVxyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQ29tbWVudHMudXBkYXRlT25lKHsgX2lkOiBib2R5LmNpZCB9LCB7XHJcbiAgICAgICAgJGluYzoge1xyXG4gICAgICAgICAgaGFuZHM6IDFcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIGlmIChyZXN1bHQub2sgPT09IDEpIHtcclxuICAgICAgICBjdHguYm9keSA9IHtcclxuICAgICAgICAgIGNvZGU6IDIwMCxcclxuICAgICAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgICAgICBtc2c6ICfngrnotZ7miJDlip8nXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGN0eC5ib2R5ID0ge1xyXG4gICAgICAgICAgY29kZTogNTAwLFxyXG4gICAgICAgICAgbXNnOiDngrnotZ7lpLHotKVcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoYm9keS5oYW5kZWQgPT09ICcxJyAmJiBmaW5kSGFuZHMgJiYgb2JqLl9pZCA9PT0gZmluZEhhbmRzLnVpZCkge1xyXG4gICAgICBhd2FpdCBIYW5kcy5kZWxldGVPbmUoeyBfaWQ6IGZpbmRIYW5kcy5faWQgfSlcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQ29tbWVudHMudXBkYXRlT25lKHsgX2lkOiBib2R5LmNpZCB9LCB7XHJcbiAgICAgICAgJGluYzoge1xyXG4gICAgICAgICAgaGFuZHM6IC0xXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICBpZiAocmVzdWx0Lm9rID09PSAxKSB7XHJcbiAgICAgICAgY3R4LmJvZHkgPSB7XHJcbiAgICAgICAgICBjb2RlOiAyMDAsXHJcbiAgICAgICAgICBtc2c6ICflj5bmtojngrnotZ7miJDlip8nXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBuZXcgQ29tbWVudHNDb250cm9sbGVyKClcclxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "CommentsController.js"
      ],
      "names": [
        "isStatus",
        "token",
        "obj",
        "user",
        "Users",
        "findById",
        "_id",
        "status",
        "CommentsController",
        "addComment",
        "ctx",
        "file",
        "request",
        "files",
        "body",
        "commentObj",
        "content",
        "tid",
        "flg",
        "header",
        "authorization",
        "console",
        "log",
        "ext",
        "name",
        "split",
        "pop",
        "dir",
        "config",
        "uploadPath",
        "format",
        "picname",
        "destPath",
        "render",
        "fs",
        "createReadStream",
        "path",
        "upStream",
        "createWriteStream",
        "pipe",
        "commentImg",
        "newComment",
        "Comments",
        "cuid",
        "comment",
        "save",
        "Post",
        "updateOne",
        "$inc",
        "answer",
        "code",
        "msg",
        "data",
        "findPost",
        "uid",
        "unread_num",
        "notfiy",
        "title",
        "message",
        "global",
        "ws",
        "send",
        "reviseComment",
        "commentId",
        "result",
        "imgPath",
        "acceptComment",
        "bodyTid",
        "id",
        "post",
        "fav",
        "favs",
        "isBest",
        "isEnd",
        "$set",
        "parseInt",
        "chatRayle",
        "chat_id",
        "chat",
        "Chats",
        "comment_id",
        "reply_count",
        "chatRayleChat",
        "getChatOne",
        "setHand",
        "findHands",
        "Hands",
        "findOne",
        "cid",
        "handed",
        "hands",
        "ok",
        "点赞失败",
        "deleteOne"
      ],
      "mappings": ";;;;;;;AAAA;;AAEA;;AACA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AAIA;;AACA;;AACA;;;;AAdA;AAgBA,MAAMA,QAAQ,GAAG,MAAOC,KAAP,IAAiB;AAChC,QAAMC,GAAG,GAAG,0BAAcD,KAAd,CAAZ;AACA,QAAME,IAAI,GAAG,MAAMC,cAAMC,QAAN,CAAeH,GAAG,CAACI,GAAnB,CAAnB;AACA,SAAOH,IAAI,CAACI,MAAL,KAAgB,GAAvB;AACD,CAJD;;AAMA,MAAMC,kBAAN,CAAyB;AAEvB;AACgB,QAAVC,UAAU,CAAEC,GAAF,EAAO;AACrB,UAAMC,IAAI,GAAGD,GAAG,CAACE,OAAJ,CAAYC,KAAZ,CAAkBF,IAA/B;AACA,UAAMG,IAAI,GAAGJ,GAAG,CAACE,OAAJ,CAAYE,IAAzB;AACA,UAAMC,UAAU,GAAG,EAAnB;AACAA,IAAAA,UAAU,CAACC,OAAX,GAAqBF,IAAI,CAACE,OAA1B;AACAD,IAAAA,UAAU,CAACE,GAAX,GAAiBH,IAAI,CAACG,GAAtB;AACA,QAAIC,GAAG,GAAG,MAAMlB,QAAQ,CAACU,GAAG,CAACS,MAAJ,CAAWC,aAAZ,CAAxB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BtB,QAA1B;AAEA,UAAME,GAAG,GAAG,MAAM,0BAAcQ,GAAG,CAACS,MAAJ,CAAWC,aAAzB,CAAlB,CATqB,CAWrB;;AAEA,QAAIT,IAAJ,EAAU;AACR,YAAMY,GAAG,GAAGZ,IAAI,CAACa,IAAL,CAAUC,KAAV,CAAgB,GAAhB,EAAqBC,GAArB,EAAZ;AACA,YAAMC,GAAG,GAAI,GAAEC,eAAOC,UAAW,IAAG,sBAASC,MAAT,CAAgB,UAAhB,CAA4B,EAAhE;AACA,YAAM,sBAAMH,GAAN,CAAN;AACA,YAAMI,OAAO,GAAG,eAAhB;AACA,YAAMC,QAAQ,GAAI,GAAEL,GAAI,IAAGI,OAAQ,IAAGR,GAAI,EAA1C;;AACA,YAAMU,MAAM,GAAGC,YAAGC,gBAAH,CAAoBxB,IAAI,CAACyB,IAAzB,CAAf;;AACA,YAAMC,QAAQ,GAAGH,YAAGI,iBAAH,CAAqBN,QAArB,CAAjB;;AACAC,MAAAA,MAAM,CAACM,IAAP,CAAYF,QAAZ;AACAtB,MAAAA,UAAU,CAACyB,UAAX,GAAyB,IAAG,sBAASV,MAAT,CAAgB,UAAhB,CAA4B,IAAGC,OAAQ,IAAGR,GAAI,EAA1E;AACD;;AACD,UAAMkB,UAAU,GAAG,MAAM,IAAIC,iBAAJ,CAAa3B,UAAb,CAAzB;AAEAM,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBpB,GAArB,EA1BqB,CA2BrB;AAEA;;AACAuC,IAAAA,UAAU,CAACE,IAAX,GAAkBzC,GAAG,CAACI,GAAtB;AACA,UAAMsC,OAAO,GAAG,MAAMH,UAAU,CAACI,IAAX,EAAtB;AACA,UAAMC,cAAKC,SAAL,CAAe;AAAEzC,MAAAA,GAAG,EAAEQ,IAAI,CAACG;AAAZ,KAAf,EAAkC;AACtC+B,MAAAA,IAAI,EAAE;AACJC,QAAAA,MAAM,EAAE,CAAC;AADL;AADgC,KAAlC,CAAN;AAKAvC,IAAAA,GAAG,CAACI,IAAJ,GAAW;AACToC,MAAAA,IAAI,EAAE,GADG;AAETC,MAAAA,GAAG,EAAE,MAFI;AAGTC,MAAAA,IAAI,EAAErC;AAHG,KAAX;AAMA,UAAMsC,QAAQ,GAAG,MAAMP,cAAKzC,QAAL,CAAc;AAAEC,MAAAA,GAAG,EAAEQ,IAAI,CAACG;AAAZ,KAAd,CAAvB;AACA,UAAMb,cAAM2C,SAAN,CAAgB;AAAEzC,MAAAA,GAAG,EAAE+C,QAAQ,CAACC;AAAhB,KAAhB,EAAuC;AAC3CN,MAAAA,IAAI,EAAE;AACJO,QAAAA,UAAU,EAAE;AADR;AADqC,KAAvC,CAAN;AAKA,UAAMpD,IAAI,GAAG,MAAMC,cAAMC,QAAN,CAAe;AAAEC,MAAAA,GAAG,EAAEJ,GAAG,CAACI;AAAX,KAAf,CAAnB;AACAe,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0B+B,QAA1B;AACA,UAAMG,MAAM,GAAG;AACbC,MAAAA,KAAK,EAAE,MADM;AAEbF,MAAAA,UAAU,EAAEpD,IAAI,CAACoD,UAFJ;AAGbG,MAAAA,OAAO,EAAG,GAAEvD,IAAI,CAACqB,IAAK,UAAS6B,QAAQ,CAACI,KAAM;AAHjC,KAAf;AAKAE,IAAAA,MAAM,CAACC,EAAP,CAAUC,IAAV,CAAeR,QAAQ,CAACC,GAAxB,EAA6BE,MAA7B;AAED;;AAEkB,QAAbM,aAAa,CAAEpD,GAAF,EAAO;AACxB;AACA;AACA,UAAMI,IAAI,GAAGJ,GAAG,CAACE,OAAJ,CAAYE,IAAzB,CAHwB,CAIxB;;AACA,UAAM8B,OAAO,GAAG,MAAMF,kBAASrC,QAAT,CAAkBS,IAAI,CAACiD,SAAvB,CAAtB;AAEA,QAAIC,MAAM,GAAG,EAAb;AAEA,UAAM9D,GAAG,GAAG,MAAM,0BAAcQ,GAAG,CAACS,MAAJ,CAAWC,aAAzB,CAAlB;;AACA,QAAIlB,GAAG,CAACI,GAAJ,KAAYsC,OAAO,CAACD,IAAxB,EAA8B;AAC5B,UAAI7B,IAAI,CAACE,OAAL,KAAiB4B,OAAO,CAAC5B,OAA7B,EAAsC;AACpCgD,QAAAA,MAAM,GAAG,MAAMtB,kBAASK,SAAT,CAAmB;AAAEzC,UAAAA,GAAG,EAAEQ,IAAI,CAACiD;AAAZ,SAAnB,EAA4C;AACzD/C,UAAAA,OAAO,EAAEF,IAAI,CAACE;AAD2C,SAA5C,CAAf;AAGD;;AACD,UAAIF,IAAI,CAAC0B,UAAL,IAAmB1B,IAAI,CAAC0B,UAAL,KAAoBI,OAAO,CAACJ,UAAnD,EAA+D;AAC7D,cAAMyB,OAAO,GAAG,MAAM,wBAAYnD,IAAI,CAAC0B,UAAjB,CAAtB;AACAwB,QAAAA,MAAM,GAAG,MAAMtB,kBAASK,SAAT,CAAmB;AAAEzC,UAAAA,GAAG,EAAEQ,IAAI,CAACiD;AAAZ,SAAnB,EAA4C;AAEzDvB,UAAAA,UAAU,EAAEyB;AAF6C,SAA5C,CAAf;AAID,OAND,MAMO,IAAI,CAACnD,IAAI,CAAC0B,UAAN,IAAoB1B,IAAI,CAAC0B,UAAL,KAAoBI,OAAO,CAACJ,UAApD,EAAgE;AACrEwB,QAAAA,MAAM,GAAG,MAAMtB,kBAASK,SAAT,CAAmB;AAAEzC,UAAAA,GAAG,EAAEQ,IAAI,CAACiD;AAAZ,SAAnB,EAA4C;AAEzDvB,UAAAA,UAAU,EAAE;AAF6C,SAA5C,CAAf;AAID;;AACDnB,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwB0C,MAAxB;AACA3C,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBsB,OAAzB;AACA,YAAMQ,IAAI,GAAG,MAAMV,kBAASrC,QAAT,CAAkBS,IAAI,CAACiD,SAAvB,CAAnB;AACArD,MAAAA,GAAG,CAACI,IAAJ,GAAW;AACToC,QAAAA,IAAI,EAAE,GADG;AAETC,QAAAA,GAAG,EAAE,MAFI;AAGTC,QAAAA;AAHS,OAAX;AAKD,KA1BD,MA0BO;AACL1C,MAAAA,GAAG,CAACI,IAAJ,GAAW;AACToC,QAAAA,IAAI,EAAE,GADG;AAETC,QAAAA,GAAG,EAAE;AAFI,OAAX;AAID;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEG,GAnJsB,CAoJvB;;;AACmB,QAAbe,aAAa,CAAExD,GAAF,EAAO;AACxB,UAAMI,IAAI,GAAGJ,GAAG,CAACE,OAAJ,CAAYE,IAAzB;AACA,UAAMqD,OAAO,GAAGrD,IAAI,CAACG,GAAL,CAASX,GAAzB;AACAe,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyB6C,OAAzB;AACA,UAAMjE,GAAG,GAAG,MAAM,0BAAcQ,GAAG,CAACS,MAAJ,CAAWC,aAAzB,CAAlB;AACA,UAAMwB,OAAO,GAAG,MAAMF,kBAASrC,QAAT,CAAkBS,IAAI,CAACsD,EAAvB,CAAtB;AACA,UAAMC,IAAI,GAAG,MAAMvB,cAAKzC,QAAL,CAAc8D,OAAd,CAAnB;;AACA,QAAIE,IAAI,CAACf,GAAL,KAAapD,GAAG,CAACI,GAArB,EAA0B;AACxB,YAAMgE,GAAG,GAAGD,IAAI,CAACE,IAAL,GAAYF,IAAI,CAACE,IAAjB,GAAwB,CAApC;;AACA,UAAI3B,OAAO,CAAC3B,GAAR,KAAgBkD,OAAhB,IAA2BvB,OAAO,CAAC4B,MAAR,KAAmB,GAA9C,IAAqDH,IAAI,CAACI,KAAL,KAAe,GAAxE,EAA6E;AAC3E,cAAM/B,kBAASK,SAAT,CAAmB;AAAEzC,UAAAA,GAAG,EAAEQ,IAAI,CAACsD;AAAZ,SAAnB,EAAqC;AACzCM,UAAAA,IAAI,EAAE;AACJF,YAAAA,MAAM,EAAE;AADJ;AADmC,SAArC,CAAN;AAKA,cAAM1B,cAAKC,SAAL,CAAe;AAAEzC,UAAAA,GAAG,EAAE6D;AAAP,SAAf,EAAiC;AACrCO,UAAAA,IAAI,EAAE;AACJD,YAAAA,KAAK,EAAE;AADH;AAD+B,SAAjC,CAAN;;AAKA,YAAI7B,OAAO,CAACD,IAAR,KAAiB0B,IAAI,CAACf,GAA1B,EAA+B;AAC7B;AACA;AACA;AACA;AACA;AACA,gBAAMlD,cAAM2C,SAAN,CAAgB;AAAEzC,YAAAA,GAAG,EAAEsC,OAAO,CAACD;AAAf,WAAhB,EAAuC;AAC3CK,YAAAA,IAAI,EAAE;AACJuB,cAAAA,IAAI,EAAEI,QAAQ,CAACL,GAAD;AADV;AADqC,WAAvC,CAAN;AAKD;;AACDjD,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBR,IAAtB;AACAJ,QAAAA,GAAG,CAACI,IAAJ,GAAW;AACToC,UAAAA,IAAI,EAAE;AADG,SAAX;AAGD,OA3BD,MA2BO;AACLxC,QAAAA,GAAG,CAACI,IAAJ,GAAW;AACToC,UAAAA,IAAI,EAAE,GADG;AAETC,UAAAA,GAAG,EAAE;AAFI,SAAX;AAID;AACF,KAnCD,MAmCO;AACLzC,MAAAA,GAAG,CAACI,IAAJ,GAAW;AACToC,QAAAA,IAAI,EAAE,GADG;AAETC,QAAAA,GAAG,EAAE;AAFI,OAAX;AAID;AAEF,GAtMsB,CAuMvB;;;AACe,QAATyB,SAAS,CAAElE,GAAF,EAAO;AACpB,UAAMI,IAAI,GAAGJ,GAAG,CAACE,OAAJ,CAAYE,IAAzB,CADoB,CAEpB;;AACA,UAAM0B,UAAU,GAAG1B,IAAI,CAAC0B,UAAL,GAAkB,MAAM,wBAAY1B,IAAI,CAAC0B,UAAjB,CAAxB,GAAuD,EAA1E;AACA,UAAMtC,GAAG,GAAG,MAAM,0BAAcQ,GAAG,CAACS,MAAJ,CAAWC,aAAzB,CAAlB;AACAN,IAAAA,IAAI,CAAC0B,UAAL,GAAkBA,UAAlB;AACA1B,IAAAA,IAAI,CAAC+D,OAAL,GAAe3E,GAAG,CAACI,GAAnB;AACA,UAAMwE,IAAI,GAAG,MAAM,IAAIC,oBAAJ,CAAUjE,IAAV,CAAnB;AACA,UAAMkD,MAAM,GAAG,MAAMc,IAAI,CAACjC,IAAL,EAArB;AACA,UAAMH,kBAASK,SAAT,CAAmB;AAAEzC,MAAAA,GAAG,EAAEQ,IAAI,CAACkE;AAAZ,KAAnB,EAA6C;AACjDhC,MAAAA,IAAI,EAAE;AACJiC,QAAAA,WAAW,EAAE;AADT;AAD2C,KAA7C,CAAN;AAKA5D,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwB0C,MAAxB;AACAtD,IAAAA,GAAG,CAACI,IAAJ,GAAW;AACToC,MAAAA,IAAI,EAAE,GADG;AAETE,MAAAA,IAAI,EAAEY;AAFG,KAAX;AAID,GA3NsB,CA4NvB;;;AACmB,QAAbkB,aAAa,CAAExE,GAAF,EAAO;AACxB,UAAMI,IAAI,GAAGJ,GAAG,CAACE,OAAJ,CAAYE,IAAzB;AACA,UAAM0B,UAAU,GAAG1B,IAAI,CAAC0B,UAAL,GAAkB,MAAM,wBAAY1B,IAAI,CAAC0B,UAAjB,CAAxB,GAAuD,EAA1E;AACA1B,IAAAA,IAAI,CAAC0B,UAAL,GAAkBA,UAAlB;AACA,UAAMtC,GAAG,GAAG,MAAM,0BAAcQ,GAAG,CAACS,MAAJ,CAAWC,aAAzB,CAAlB;AACAN,IAAAA,IAAI,CAAC+D,OAAL,GAAe3E,GAAG,CAACI,GAAnB;AACAe,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBR,IAAtB;AACA,UAAMgE,IAAI,GAAG,MAAM,IAAIC,oBAAJ,CAAUjE,IAAV,CAAnB;AACA,UAAMkD,MAAM,GAAG,MAAMc,IAAI,CAACjC,IAAL,EAArB;AACA,UAAMH,kBAASK,SAAT,CAAmB;AAAEzC,MAAAA,GAAG,EAAEQ,IAAI,CAACkE;AAAZ,KAAnB,EAA6C;AACjDhC,MAAAA,IAAI,EAAE;AACJiC,QAAAA,WAAW,EAAE;AADT;AAD2C,KAA7C,CAAN;AAMA,UAAM7B,IAAI,GAAG,MAAM2B,qBAAMI,UAAN,CAAiBnB,MAAM,CAACI,EAAxB,CAAnB;AACA/C,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsB8B,IAAtB;AACA1C,IAAAA,GAAG,CAACI,IAAJ,GAAW;AACToC,MAAAA,IAAI,EAAE,GADG;AAETE,MAAAA,IAAI,EAAEA;AAFG,KAAX;AAID,GAlPsB,CAmPvB;;;AACa,QAAPgC,OAAO,CAAE1E,GAAF,EAAO;AAClB,UAAMI,IAAI,GAAGJ,GAAG,CAACE,OAAJ,CAAYE,IAAzB;AACAO,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBR,IAAtB;AACA,UAAMZ,GAAG,GAAG,MAAM,0BAAcQ,GAAG,CAACS,MAAJ,CAAWC,aAAzB,CAAlB;AAEA,UAAMiE,SAAS,GAAG,MAAMC,sBAAMC,OAAN,CAAc;AAAEC,MAAAA,GAAG,EAAE1E,IAAI,CAAC0E;AAAZ,KAAd,CAAxB;;AACA,QAAI1E,IAAI,CAAC2E,MAAL,KAAgB,GAAhB,IAAuB,CAACJ,SAA5B,EAAuC;AACrC,YAAMK,KAAK,GAAG,IAAIJ,qBAAJ,CAAUxE,IAAV,CAAd;AACA,YAAMsC,IAAI,GAAG,MAAMsC,KAAK,CAAC7C,IAAN,EAAnB;AAEA,YAAMmB,MAAM,GAAG,MAAMtB,kBAASK,SAAT,CAAmB;AAAEzC,QAAAA,GAAG,EAAEQ,IAAI,CAAC0E;AAAZ,OAAnB,EAAsC;AACzDxC,QAAAA,IAAI,EAAE;AACJ0C,UAAAA,KAAK,EAAE;AADH;AADmD,OAAtC,CAArB;;AAKA,UAAI1B,MAAM,CAAC2B,EAAP,KAAc,CAAlB,EAAqB;AACnBjF,QAAAA,GAAG,CAACI,IAAJ,GAAW;AACToC,UAAAA,IAAI,EAAE,GADG;AAETE,UAAAA,IAAI,EAAEA,IAFG;AAGTD,UAAAA,GAAG,EAAE;AAHI,SAAX;AAKD,OAND,MAMO;AACLzC,QAAAA,GAAG,CAACI,IAAJ,GAAW;AACToC,UAAAA,IAAI,EAAE,GADG;AAETC,UAAAA,GAAG,EAAEyC;AAFI,SAAX;AAID;AACF,KArBD,MAqBO,IAAI9E,IAAI,CAAC2E,MAAL,KAAgB,GAAhB,IAAuBJ,SAAvB,IAAoCnF,GAAG,CAACI,GAAJ,KAAY+E,SAAS,CAAC/B,GAA9D,EAAmE;AACxE,YAAMgC,sBAAMO,SAAN,CAAgB;AAAEvF,QAAAA,GAAG,EAAE+E,SAAS,CAAC/E;AAAjB,OAAhB,CAAN;AACA,YAAM0D,MAAM,GAAG,MAAMtB,kBAASK,SAAT,CAAmB;AAAEzC,QAAAA,GAAG,EAAEQ,IAAI,CAAC0E;AAAZ,OAAnB,EAAsC;AACzDxC,QAAAA,IAAI,EAAE;AACJ0C,UAAAA,KAAK,EAAE,CAAC;AADJ;AADmD,OAAtC,CAArB;;AAKA,UAAI1B,MAAM,CAAC2B,EAAP,KAAc,CAAlB,EAAqB;AACnBjF,QAAAA,GAAG,CAACI,IAAJ,GAAW;AACToC,UAAAA,IAAI,EAAE,GADG;AAETC,UAAAA,GAAG,EAAE;AAFI,SAAX;AAID;AAEF;AACF;;AA9RsB;;eAgSV,IAAI3C,kBAAJ,E",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\api\\",
      "sourcesContent": [
        "import { getJWTPayload, base64ToImg } from '../conmon/Utils';\r\n// import { getJWTPayload } from '../conmon/Utils';\r\nimport moment from 'dayjs';\r\nimport config from '../config/index';\r\n\r\nimport Comments from '../model/Comments';\r\nimport Post from '../model/Post';\r\nimport Users from '../model/test';\r\nimport Hands from '../model/CommentHands';\r\nimport Chats from '../model/CommentChat';\r\n\r\n\r\n\r\nimport fs from 'fs';\r\nimport mkdir from 'make-dir';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nconst isStatus = async (token) => {\r\n  const obj = getJWTPayload(token)\r\n  const user = await Users.findById(obj._id)\r\n  return user.status === '1'\r\n}\r\n\r\nclass CommentsController {\r\n\r\n  // 新增评论\r\n  async addComment (ctx) {\r\n    const file = ctx.request.files.file\r\n    const body = ctx.request.body\r\n    const commentObj = {}\r\n    commentObj.content = body.content\r\n    commentObj.tid = body.tid\r\n    let flg = await isStatus(ctx.header.authorization)\r\n    console.log('isStatus: ', isStatus);\r\n\r\n    const obj = await getJWTPayload(ctx.header.authorization)\r\n\r\n    // const commentObj = { tid, content, commentImg }\r\n\r\n    if (file) {\r\n      const ext = file.name.split('.').pop()\r\n      const dir = `${config.uploadPath}/${moment().format('YYYYMMDD')}`\r\n      await mkdir(dir)\r\n      const picname = uuidv4()\r\n      const destPath = `${dir}/${picname}.${ext}`\r\n      const render = fs.createReadStream(file.path)\r\n      const upStream = fs.createWriteStream(destPath)\r\n      render.pipe(upStream)\r\n      commentObj.commentImg = `/${moment().format('YYYYMMDD')}/${picname}.${ext}`\r\n    }\r\n    const newComment = await new Comments(commentObj)\r\n\r\n    console.log('obj: ', obj);\r\n    // const newComment = new Comments({ content: body.content })\r\n\r\n    // newComment.content = body.content\r\n    newComment.cuid = obj._id\r\n    const comment = await newComment.save()\r\n    await Post.updateOne({ _id: body.tid }, {\r\n      $inc: {\r\n        answer: +1\r\n      }\r\n    })\r\n    ctx.body = {\r\n      code: 200,\r\n      msg: '评论成功',\r\n      data: commentObj\r\n    }\r\n\r\n    const findPost = await Post.findById({ _id: body.tid })\r\n    await Users.updateOne({ _id: findPost.uid }, {\r\n      $inc: {\r\n        unread_num: 1\r\n      }\r\n    })\r\n    const user = await Users.findById({ _id: obj._id })\r\n    console.log('findPost: ', findPost);\r\n    const notfiy = {\r\n      title: '文章评论',\r\n      unread_num: user.unread_num,\r\n      message: `${user.name}评论了您的文章${findPost.title}`\r\n    }\r\n    global.ws.send(findPost.uid, notfiy)\r\n\r\n  }\r\n\r\n  async reviseComment (ctx) {\r\n    // const file = ctx.request.files.file\r\n    // console.log('file: ', file);\r\n    const body = ctx.request.body\r\n    // console.log('body: ', body);\r\n    const comment = await Comments.findById(body.commentId)\r\n\r\n    let result = {}\r\n\r\n    const obj = await getJWTPayload(ctx.header.authorization)\r\n    if (obj._id === comment.cuid) {\r\n      if (body.content !== comment.content) {\r\n        result = await Comments.updateOne({ _id: body.commentId }, {\r\n          content: body.content\r\n        })\r\n      }\r\n      if (body.commentImg && body.commentImg !== comment.commentImg) {\r\n        const imgPath = await base64ToImg(body.commentImg)\r\n        result = await Comments.updateOne({ _id: body.commentId }, {\r\n\r\n          commentImg: imgPath\r\n        })\r\n      } else if (!body.commentImg && body.commentImg !== comment.commentImg) {\r\n        result = await Comments.updateOne({ _id: body.commentId }, {\r\n\r\n          commentImg: ''\r\n        })\r\n      }\r\n      console.log('result: ', result);\r\n      console.log('comment: ', comment);\r\n      const data = await Comments.findById(body.commentId)\r\n      ctx.body = {\r\n        code: 200,\r\n        msg: '修改成功',\r\n        data\r\n      }\r\n    } else {\r\n      ctx.body = {\r\n        code: 500,\r\n        msg: '修改人和创建人不符合'\r\n      }\r\n    }\r\n\r\n    /** \r\n    if (obj._id === comment.cuid) {\r\n      console.log('校验成功');\r\n      let commentImg\r\n      if (file) {\r\n        const ext = file.name.split('.').pop()\r\n        const dir = `${config.uploadPath}/${moment().format('YYYYMMDD')}`\r\n        await mkdir(dir)\r\n        const picname = uuidv4()\r\n        const destPath = `${dir}/${picname}.${ext}`\r\n        const render = fs.createReadStream(file.path)\r\n        const upStream = fs.createWriteStream(destPath)\r\n        render.pipe(upStream)\r\n        commentImg = `/${moment().format('YYYYMMDD')}/${picname}.${ext}`\r\n        await Comments.updateOne({ _id: body.commentId }, {\r\n          commentImg: commentImg\r\n        })\r\n      } else if (body.commentImg === '') {\r\n        await Comments.updateOne({ _id: body.commentId }, {\r\n          commentImg: ''\r\n        })\r\n      }\r\n\r\n      await Comments.updateOne({ _id: body.commentId }, {\r\n        content: body.content\r\n      })\r\n      \r\n      ctx.body = {\r\n        code: 200,\r\n        data: {\r\n          content: body.content,\r\n          commentImg\r\n        }\r\n      }\r\n    } else {\r\n      ctx.body = {\r\n        code: 500,\r\n        msg: '修改人和创建人不符合'\r\n      }\r\n    }\r\n    */\r\n  }\r\n  // 采纳评论\r\n  async acceptComment (ctx) {\r\n    const body = ctx.request.body\r\n    const bodyTid = body.tid._id\r\n    console.log('bodyTid: ', bodyTid);\r\n    const obj = await getJWTPayload(ctx.header.authorization)\r\n    const comment = await Comments.findById(body.id)\r\n    const post = await Post.findById(bodyTid)\r\n    if (post.uid === obj._id) {\r\n      const fav = post.favs ? post.favs : 0\r\n      if (comment.tid === bodyTid && comment.isBest !== '1' && post.isEnd !== '1') {\r\n        await Comments.updateOne({ _id: body.id }, {\r\n          $set: {\r\n            isBest: '1'\r\n          }\r\n        })\r\n        await Post.updateOne({ _id: bodyTid }, {\r\n          $set: {\r\n            isEnd: '1'\r\n          }\r\n        })\r\n        if (comment.cuid !== post.uid) {\r\n          // await Users.updateOne({ _id: post.uid }, {\r\n          //   $inc: {\r\n          //     favs: - parseInt(fav)\r\n          //   }\r\n          // })\r\n          await Users.updateOne({ _id: comment.cuid }, {\r\n            $inc: {\r\n              favs: parseInt(fav)\r\n            }\r\n          })\r\n        }\r\n        console.log('body: ', body);\r\n        ctx.body = {\r\n          code: 200\r\n        }\r\n      } else {\r\n        ctx.body = {\r\n          code: 501,\r\n          msg: '文章和对应评论不一致'\r\n        }\r\n      }\r\n    } else {\r\n      ctx.body = {\r\n        code: 500,\r\n        msg: '只有文章作者才能采纳'\r\n      }\r\n    }\r\n\r\n  }\r\n  //评论回复\r\n  async chatRayle (ctx) {\r\n    const body = ctx.request.body\r\n    // console.log('body: ', body);c\r\n    const commentImg = body.commentImg ? await base64ToImg(body.commentImg) : ''\r\n    const obj = await getJWTPayload(ctx.header.authorization)\r\n    body.commentImg = commentImg\r\n    body.chat_id = obj._id\r\n    const chat = await new Chats(body)\r\n    const result = await chat.save()\r\n    await Comments.updateOne({ _id: body.comment_id }, {\r\n      $inc: {\r\n        reply_count: 1\r\n      }\r\n    })\r\n    console.log('result: ', result);\r\n    ctx.body = {\r\n      code: 200,\r\n      data: result\r\n    }\r\n  }\r\n  // 评论回复 再回复\r\n  async chatRayleChat (ctx) {\r\n    const body = ctx.request.body\r\n    const commentImg = body.commentImg ? await base64ToImg(body.commentImg) : ''\r\n    body.commentImg = commentImg\r\n    const obj = await getJWTPayload(ctx.header.authorization)\r\n    body.chat_id = obj._id\r\n    console.log('body: ', body);\r\n    const chat = await new Chats(body)\r\n    const result = await chat.save()\r\n    await Comments.updateOne({ _id: body.comment_id }, {\r\n      $inc: {\r\n        reply_count: 1\r\n      }\r\n    })\r\n\r\n    const data = await Chats.getChatOne(result.id)\r\n    console.log('data: ', data);\r\n    ctx.body = {\r\n      code: 200,\r\n      data: data\r\n    }\r\n  }\r\n  // 点赞\r\n  async setHand (ctx) {\r\n    const body = ctx.request.body\r\n    console.log('body: ', body);\r\n    const obj = await getJWTPayload(ctx.header.authorization)\r\n\r\n    const findHands = await Hands.findOne({ cid: body.cid })\r\n    if (body.handed === '0' && !findHands) {\r\n      const hands = new Hands(body)\r\n      const data = await hands.save()\r\n\r\n      const result = await Comments.updateOne({ _id: body.cid }, {\r\n        $inc: {\r\n          hands: 1\r\n        }\r\n      })\r\n      if (result.ok === 1) {\r\n        ctx.body = {\r\n          code: 200,\r\n          data: data,\r\n          msg: '点赞成功'\r\n        }\r\n      } else {\r\n        ctx.body = {\r\n          code: 500,\r\n          msg: 点赞失败\r\n        }\r\n      }\r\n    } else if (body.handed === '1' && findHands && obj._id === findHands.uid) {\r\n      await Hands.deleteOne({ _id: findHands._id })\r\n      const result = await Comments.updateOne({ _id: body.cid }, {\r\n        $inc: {\r\n          hands: -1\r\n        }\r\n      })\r\n      if (result.ok === 1) {\r\n        ctx.body = {\r\n          code: 200,\r\n          msg: '取消点赞成功'\r\n        }\r\n      }\r\n\r\n    }\r\n  }\r\n}\r\nexport default new CommentsController()\r\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1636863409245
  },
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\routes\\\\adminRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\routes\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\routes\\adminRouter.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\routes\\adminRouter.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\routes\\adminRouter.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\routes\\",
        "sourceFileName": "adminRouter.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _koaRouter = _interopRequireDefault(require(\"koa-router\"));\n\nvar _UserController = _interopRequireDefault(require(\"../api/UserController\"));\n\nvar _AdminController = _interopRequireDefault(require(\"../api/AdminController\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = new _koaRouter.default();\nrouter.prefix('/admin');\nrouter.post('/add_user', _UserController.default.addUser);\nrouter.post('/delete_user', _UserController.default.deleteUser);\nrouter.get('/get_menu', _AdminController.default.getMenu);\nrouter.post('/add_menu', _AdminController.default.addMenu);\nrouter.post('/update_menu', _AdminController.default.updateMenu);\nrouter.post('/delete_menu', _AdminController.default.deleteMenu);\nrouter.get('/get_roles', _AdminController.default.getRoles);\nrouter.post('/add_role', _AdminController.default.addRole);\nrouter.post('/update_role', _AdminController.default.updateRole);\nrouter.post('/delete_role', _AdminController.default.deleteRole);\nrouter.get('/get_roles_title', _AdminController.default.getRolesTitle);\nrouter.get('/get_routes', _AdminController.default.getRoutes);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluUm91dGVyLmpzIl0sIm5hbWVzIjpbInJvdXRlciIsIlJvdXRlciIsInByZWZpeCIsInBvc3QiLCJVc2VyQ29udHJvbGxlciIsImFkZFVzZXIiLCJkZWxldGVVc2VyIiwiZ2V0IiwiYWRtaW5Db250cm9sbGVyIiwiZ2V0TWVudSIsImFkZE1lbnUiLCJ1cGRhdGVNZW51IiwiZGVsZXRlTWVudSIsImdldFJvbGVzIiwiYWRkUm9sZSIsInVwZGF0ZVJvbGUiLCJkZWxldGVSb2xlIiwiZ2V0Um9sZXNUaXRsZSIsImdldFJvdXRlcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsTUFBTSxHQUFHLElBQUlDLGtCQUFKLEVBQWY7QUFFQUQsTUFBTSxDQUFDRSxNQUFQLENBQWMsUUFBZDtBQUVBRixNQUFNLENBQUNHLElBQVAsQ0FBWSxXQUFaLEVBQXlCQyx3QkFBZUMsT0FBeEM7QUFFQUwsTUFBTSxDQUFDRyxJQUFQLENBQVksY0FBWixFQUE0QkMsd0JBQWVFLFVBQTNDO0FBRUFOLE1BQU0sQ0FBQ08sR0FBUCxDQUFXLFdBQVgsRUFBd0JDLHlCQUFnQkMsT0FBeEM7QUFFQVQsTUFBTSxDQUFDRyxJQUFQLENBQVksV0FBWixFQUF5QksseUJBQWdCRSxPQUF6QztBQUVBVixNQUFNLENBQUNHLElBQVAsQ0FBWSxjQUFaLEVBQTRCSyx5QkFBZ0JHLFVBQTVDO0FBRUFYLE1BQU0sQ0FBQ0csSUFBUCxDQUFZLGNBQVosRUFBNEJLLHlCQUFnQkksVUFBNUM7QUFFQVosTUFBTSxDQUFDTyxHQUFQLENBQVcsWUFBWCxFQUF5QkMseUJBQWdCSyxRQUF6QztBQUVBYixNQUFNLENBQUNHLElBQVAsQ0FBWSxXQUFaLEVBQXlCSyx5QkFBZ0JNLE9BQXpDO0FBRUFkLE1BQU0sQ0FBQ0csSUFBUCxDQUFZLGNBQVosRUFBNEJLLHlCQUFnQk8sVUFBNUM7QUFFQWYsTUFBTSxDQUFDRyxJQUFQLENBQVksY0FBWixFQUE0QksseUJBQWdCUSxVQUE1QztBQUVBaEIsTUFBTSxDQUFDTyxHQUFQLENBQVcsa0JBQVgsRUFBK0JDLHlCQUFnQlMsYUFBL0M7QUFFQWpCLE1BQU0sQ0FBQ08sR0FBUCxDQUFXLGFBQVgsRUFBMEJDLHlCQUFnQlUsU0FBMUM7ZUFFZWxCLE0iLCJzb3VyY2VSb290IjoiRDpcXEhUTUwrY3NzK2pzXFxub2RlX2tvYVxcc3JjXFxyb3V0ZXNcXCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSb3V0ZXIgZnJvbSAna29hLXJvdXRlcic7XHJcbmltcG9ydCBVc2VyQ29udHJvbGxlciBmcm9tICcuLi9hcGkvVXNlckNvbnRyb2xsZXInO1xyXG5pbXBvcnQgYWRtaW5Db250cm9sbGVyIGZyb20gJy4uL2FwaS9BZG1pbkNvbnRyb2xsZXInO1xyXG5cclxuY29uc3Qgcm91dGVyID0gbmV3IFJvdXRlcigpXHJcblxyXG5yb3V0ZXIucHJlZml4KCcvYWRtaW4nKVxyXG5cclxucm91dGVyLnBvc3QoJy9hZGRfdXNlcicsIFVzZXJDb250cm9sbGVyLmFkZFVzZXIpXHJcblxyXG5yb3V0ZXIucG9zdCgnL2RlbGV0ZV91c2VyJywgVXNlckNvbnRyb2xsZXIuZGVsZXRlVXNlcilcclxuXHJcbnJvdXRlci5nZXQoJy9nZXRfbWVudScsIGFkbWluQ29udHJvbGxlci5nZXRNZW51KVxyXG5cclxucm91dGVyLnBvc3QoJy9hZGRfbWVudScsIGFkbWluQ29udHJvbGxlci5hZGRNZW51KVxyXG5cclxucm91dGVyLnBvc3QoJy91cGRhdGVfbWVudScsIGFkbWluQ29udHJvbGxlci51cGRhdGVNZW51KVxyXG5cclxucm91dGVyLnBvc3QoJy9kZWxldGVfbWVudScsIGFkbWluQ29udHJvbGxlci5kZWxldGVNZW51KVxyXG5cclxucm91dGVyLmdldCgnL2dldF9yb2xlcycsIGFkbWluQ29udHJvbGxlci5nZXRSb2xlcylcclxuXHJcbnJvdXRlci5wb3N0KCcvYWRkX3JvbGUnLCBhZG1pbkNvbnRyb2xsZXIuYWRkUm9sZSlcclxuXHJcbnJvdXRlci5wb3N0KCcvdXBkYXRlX3JvbGUnLCBhZG1pbkNvbnRyb2xsZXIudXBkYXRlUm9sZSlcclxuXHJcbnJvdXRlci5wb3N0KCcvZGVsZXRlX3JvbGUnLCBhZG1pbkNvbnRyb2xsZXIuZGVsZXRlUm9sZSlcclxuXHJcbnJvdXRlci5nZXQoJy9nZXRfcm9sZXNfdGl0bGUnLCBhZG1pbkNvbnRyb2xsZXIuZ2V0Um9sZXNUaXRsZSlcclxuXHJcbnJvdXRlci5nZXQoJy9nZXRfcm91dGVzJywgYWRtaW5Db250cm9sbGVyLmdldFJvdXRlcylcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHJvdXRlciJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "adminRouter.js"
      ],
      "names": [
        "router",
        "Router",
        "prefix",
        "post",
        "UserController",
        "addUser",
        "deleteUser",
        "get",
        "adminController",
        "getMenu",
        "addMenu",
        "updateMenu",
        "deleteMenu",
        "getRoles",
        "addRole",
        "updateRole",
        "deleteRole",
        "getRolesTitle",
        "getRoutes"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,IAAIC,kBAAJ,EAAf;AAEAD,MAAM,CAACE,MAAP,CAAc,QAAd;AAEAF,MAAM,CAACG,IAAP,CAAY,WAAZ,EAAyBC,wBAAeC,OAAxC;AAEAL,MAAM,CAACG,IAAP,CAAY,cAAZ,EAA4BC,wBAAeE,UAA3C;AAEAN,MAAM,CAACO,GAAP,CAAW,WAAX,EAAwBC,yBAAgBC,OAAxC;AAEAT,MAAM,CAACG,IAAP,CAAY,WAAZ,EAAyBK,yBAAgBE,OAAzC;AAEAV,MAAM,CAACG,IAAP,CAAY,cAAZ,EAA4BK,yBAAgBG,UAA5C;AAEAX,MAAM,CAACG,IAAP,CAAY,cAAZ,EAA4BK,yBAAgBI,UAA5C;AAEAZ,MAAM,CAACO,GAAP,CAAW,YAAX,EAAyBC,yBAAgBK,QAAzC;AAEAb,MAAM,CAACG,IAAP,CAAY,WAAZ,EAAyBK,yBAAgBM,OAAzC;AAEAd,MAAM,CAACG,IAAP,CAAY,cAAZ,EAA4BK,yBAAgBO,UAA5C;AAEAf,MAAM,CAACG,IAAP,CAAY,cAAZ,EAA4BK,yBAAgBQ,UAA5C;AAEAhB,MAAM,CAACO,GAAP,CAAW,kBAAX,EAA+BC,yBAAgBS,aAA/C;AAEAjB,MAAM,CAACO,GAAP,CAAW,aAAX,EAA0BC,yBAAgBU,SAA1C;eAEelB,M",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\routes\\",
      "sourcesContent": [
        "import Router from 'koa-router';\r\nimport UserController from '../api/UserController';\r\nimport adminController from '../api/AdminController';\r\n\r\nconst router = new Router()\r\n\r\nrouter.prefix('/admin')\r\n\r\nrouter.post('/add_user', UserController.addUser)\r\n\r\nrouter.post('/delete_user', UserController.deleteUser)\r\n\r\nrouter.get('/get_menu', adminController.getMenu)\r\n\r\nrouter.post('/add_menu', adminController.addMenu)\r\n\r\nrouter.post('/update_menu', adminController.updateMenu)\r\n\r\nrouter.post('/delete_menu', adminController.deleteMenu)\r\n\r\nrouter.get('/get_roles', adminController.getRoles)\r\n\r\nrouter.post('/add_role', adminController.addRole)\r\n\r\nrouter.post('/update_role', adminController.updateRole)\r\n\r\nrouter.post('/delete_role', adminController.deleteRole)\r\n\r\nrouter.get('/get_roles_title', adminController.getRolesTitle)\r\n\r\nrouter.get('/get_routes', adminController.getRoutes)\r\n\r\nexport default router"
      ]
    },
    "sourceType": "script",
    "mtime": 1637047476037
  },
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\api\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\api\\\\AdminController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\api\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\api\\AdminController.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\api\\AdminController.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\api\\AdminController.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\api\\",
        "sourceFileName": "AdminController.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _Utils = require(\"../conmon/Utils\");\n\nvar _Menus = _interopRequireDefault(require(\"../model/Menus\"));\n\nvar _Roles = _interopRequireDefault(require(\"../model/Roles\"));\n\nvar _test = _interopRequireDefault(require(\"../model/test\"));\n\nvar _toTree = require(\"./toTree\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass adminController {\n  async getMenu(ctx) {\n    const menu = await _Menus.default.find();\n    ctx.body = {\n      code: 200,\n      data: menu\n    };\n  }\n\n  async addMenu(ctx) {\n    const body = ctx.request.body; // \n    // const treeArr = toTree(source)\n    // \n\n    const newMenu = new _Menus.default(body);\n    const result = await newMenu.save();\n    ctx.body = {\n      code: 200,\n      data: result\n    };\n  }\n\n  async updateMenu(ctx) {\n    const {\n      body\n    } = ctx.request; // \n\n    const data = { ...body\n    };\n    delete data._id;\n    const result = await _Menus.default.updateOne({\n      _id: body._id\n    }, { ...data\n    });\n    ctx.body = {\n      code: 200,\n      data: result\n    };\n  }\n\n  async deleteMenu(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const result = await _Menus.default.deleteOne({\n      _id: body._id\n    });\n    ctx.body = {\n      code: 200,\n      data: result\n    };\n  }\n\n  async getRoles(ctx) {\n    const result = await _Roles.default.find();\n    ctx.body = {\n      code: 200,\n      data: result\n    };\n  }\n\n  async addRole(ctx) {\n    const body = ctx.request.body;\n    const newRole = new _Roles.default(body);\n    const result = await newRole.save();\n    ctx.body = {\n      code: 200,\n      data: result\n    };\n  }\n\n  async updateRole(ctx) {\n    const {\n      body\n    } = ctx.request; // \n\n    const data = { ...body\n    };\n    delete data._id;\n    const result = await _Roles.default.updateOne({\n      _id: body._id\n    }, { ...data\n    });\n    ctx.body = {\n      code: 200,\n      data: result\n    };\n  }\n\n  async deleteRole(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const result = await _Roles.default.deleteOne({\n      _id: body._id\n    });\n    ctx.body = {\n      code: 200,\n      data: result\n    };\n  }\n\n  async getRolesTitle(ctx) {\n    const result = await _Roles.default.find({}, {\n      menu: 0\n    });\n    ctx.body = {\n      code: 200,\n      data: result\n    };\n  }\n\n  async getRoutes(ctx) {\n    let menus = [];\n\n    if (!ctx.isAdmin) {\n      const user = await _test.default.findOne({\n        _id: ctx._id\n      });\n      const {\n        roles\n      } = user;\n\n      for (let i = 0; i < roles.length; i++) {\n        const element = roles[i];\n        const menu = await _Roles.default.findOne({\n          code: element\n        }, {\n          menu: 1\n        });\n        menus.push(...menu.menu);\n      }\n\n      menus = Array.from(new Set(menus));\n    }\n\n    const treeData = await _Menus.default.find();\n    const routes = (0, _Utils.menusGetMenuData)(treeData, menus, ctx.isAdmin);\n    ctx.body = {\n      code: 200,\n      data: routes\n    };\n  }\n\n}\n\nvar _default = new adminController();\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFkbWluQ29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhZG1pbkNvbnRyb2xsZXIiLCJnZXRNZW51IiwiY3R4IiwibWVudSIsIk1lbnVzIiwiZmluZCIsImJvZHkiLCJjb2RlIiwiZGF0YSIsImFkZE1lbnUiLCJyZXF1ZXN0IiwibmV3TWVudSIsInJlc3VsdCIsInNhdmUiLCJ1cGRhdGVNZW51IiwiX2lkIiwidXBkYXRlT25lIiwiZGVsZXRlTWVudSIsImRlbGV0ZU9uZSIsImdldFJvbGVzIiwiUm9sZXMiLCJhZGRSb2xlIiwibmV3Um9sZSIsInVwZGF0ZVJvbGUiLCJkZWxldGVSb2xlIiwiZ2V0Um9sZXNUaXRsZSIsImdldFJvdXRlcyIsIm1lbnVzIiwiaXNBZG1pbiIsInVzZXIiLCJVc2VyIiwiZmluZE9uZSIsInJvbGVzIiwiaSIsImxlbmd0aCIsImVsZW1lbnQiLCJwdXNoIiwiQXJyYXkiLCJmcm9tIiwiU2V0IiwidHJlZURhdGEiLCJyb3V0ZXMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQUVBLE1BQU1BLGVBQU4sQ0FBc0I7QUFDUCxRQUFQQyxPQUFPLENBQUVDLEdBQUYsRUFBTztBQUNsQixVQUFNQyxJQUFJLEdBQUcsTUFBTUMsZUFBTUMsSUFBTixFQUFuQjtBQUNBSCxJQUFBQSxHQUFHLENBQUNJLElBQUosR0FBVztBQUNUQyxNQUFBQSxJQUFJLEVBQUUsR0FERztBQUVUQyxNQUFBQSxJQUFJLEVBQUVMO0FBRkcsS0FBWDtBQUtEOztBQUVZLFFBQVBNLE9BQU8sQ0FBRVAsR0FBRixFQUFPO0FBQ2xCLFVBQU1JLElBQUksR0FBR0osR0FBRyxDQUFDUSxPQUFKLENBQVlKLElBQXpCLENBRGtCLENBR2xCO0FBQ0E7QUFDQTs7QUFDQSxVQUFNSyxPQUFPLEdBQUcsSUFBSVAsY0FBSixDQUFVRSxJQUFWLENBQWhCO0FBQ0EsVUFBTU0sTUFBTSxHQUFHLE1BQU1ELE9BQU8sQ0FBQ0UsSUFBUixFQUFy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VSxLQUFLLENBQUNDLElBQU4sQ0FBVyxJQUFJQyxHQUFKLENBQVFaLEtBQVIsQ0FBWCxDQUFSO0FBQ0Q7O0FBR0QsVUFBTWEsUUFBUSxHQUFHLE1BQU1wQyxlQUFNQyxJQUFOLEVBQXZCO0FBRUEsVUFBTW9DLE1BQU0sR0FBRyw2QkFBaUJELFFBQWpCLEVBQTJCYixLQUEzQixFQUFrQ3pCLEdBQUcsQ0FBQzBCLE9BQXRDLENBQWY7QUFDQTFCLElBQUFBLEdBQUcsQ0FBQ0ksSUFBSixHQUFXO0FBQ1RDLE1BQUFBLElBQUksRUFBRSxHQURHO0FBRVRDLE1BQUFBLElBQUksRUFBRWlDO0FBRkcsS0FBWDtBQUlEOztBQXpIbUI7O2VBNkhQLElBQUl6QyxlQUFKLEUiLCJzb3VyY2VSb290IjoiRDpcXEhUTUwrY3NzK2pzXFxub2RlX2tvYVxcc3JjXFxhcGlcXCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1lbnVzR2V0TWVudURhdGEgfSBmcm9tIFwiLi4vY29ubW9uL1V0aWxzXCI7XHJcbmltcG9ydCBNZW51cyBmcm9tIFwiLi4vbW9kZWwvTWVudXNcIjtcclxuaW1wb3J0IFJvbGVzIGZyb20gXCIuLi9tb2RlbC9Sb2xlc1wiO1xyXG5pbXBvcnQgVXNlciBmcm9tICcuLi9tb2RlbC90ZXN0JztcclxuaW1wb3J0IHsgc291cmNlLCB0b1RyZWUgfSBmcm9tICcuL3RvVHJlZSc7XHJcblxyXG5jbGFzcyBhZG1pbkNvbnRyb2xsZXIge1xyXG4gIGFzeW5jIGdldE1lbnUgKGN0eCkge1xyXG4gICAgY29uc3QgbWVudSA9IGF3YWl0IE1lbnVzLmZpbmQoKVxyXG4gICAgY3R4LmJvZHkgPSB7XHJcbiAgICAgIGNvZGU6IDIwMCxcclxuICAgICAgZGF0YTogbWVudVxyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIGFzeW5jIGFkZE1lbnUgKGN0eCkge1xyXG4gICAgY29uc3QgYm9keSA9IGN0eC5yZXF1ZXN0LmJvZHlcclxuXHJcbiAgICAvLyBcclxuICAgIC8vIGNvbnN0IHRyZWVBcnIgPSB0b1RyZWUoc291cmNlKVxyXG4gICAgLy8gXHJcbiAgICBjb25zdCBuZXdNZW51ID0gbmV3IE1lbnVzKGJvZHkpXHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBuZXdNZW51LnNhdmUoKVxyXG4gICAgY3R4LmJvZHkgPSB7XHJcbiAgICAgIGNvZGU6IDIwMCxcclxuICAgICAgZGF0YTogcmVzdWx0XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGRhdGVNZW51IChjdHgpIHtcclxuICAgIGNvbnN0IHsgYm9keSB9ID0gY3R4LnJlcXVlc3RcclxuICAgIC8vIFxyXG4gICAgY29uc3QgZGF0YSA9IHsgLi4uYm9keSB9XHJcbiAgICBkZWxldGUgZGF0YS5faWRcclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBNZW51cy51cGRhdGVPbmUoeyBfaWQ6IGJvZHkuX2lkIH0sIHsgLi4uZGF0YSB9KVxyXG4gICAgY3R4LmJvZHkgPSB7XHJcbiAgICAgIGNvZGU6IDIwMCxcclxuICAgICAgZGF0YTogcmVzdWx0XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBkZWxldGVNZW51IChjdHgpIHtcclxuICAgIGNvbnN0IHsgYm9keSB9ID0gY3R4LnJlcXVlc3RcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IE1lbnVzLmRlbGV0ZU9uZSh7IF9pZDogYm9keS5faWQgfSlcclxuICAgIGN0eC5ib2R5ID0ge1xyXG4gICAgICBjb2RlOiAyMDAsXHJcbiAgICAgIGRhdGE6IHJlc3VsdFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0Um9sZXMgKGN0eCkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUm9sZXMuZmluZCgpXHJcbiAgICBjdHguYm9keSA9IHtcclxuICAgICAgY29kZTogMjAwLFxyXG4gICAgICBkYXRhOiByZXN1bHRcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGFkZFJvbGUgKGN0eCkge1xyXG4gICAgY29uc3QgYm9keSA9IGN0eC5yZXF1ZXN0LmJvZHlcclxuXHJcbiAgICBjb25zdCBuZXdSb2xlID0gbmV3IFJvbGVzKGJvZHkpXHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBuZXdSb2xlLnNhdmUoKVxyXG4gICAgY3R4LmJvZHkgPSB7XHJcbiAgICAgIGNvZGU6IDIwMCxcclxuICAgICAgZGF0YTogcmVzdWx0XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGRhdGVSb2xlIChjdHgpIHtcclxuICAgIGNvbnN0IHsgYm9keSB9ID0gY3R4LnJlcXVlc3RcclxuICAgIC8vIFxyXG4gICAgY29uc3QgZGF0YSA9IHsgLi4uYm9keSB9XHJcbiAgICBkZWxldGUgZGF0YS5faWRcclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBSb2xlcy51cGRhdGVPbmUoeyBfaWQ6IGJvZHkuX2lkIH0sIHsgLi4uZGF0YSB9KVxyXG4gICAgY3R4LmJvZHkgPSB7XHJcbiAgICAgIGNvZGU6IDIwMCxcclxuICAgICAgZGF0YTogcmVzdWx0XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBkZWxldGVSb2xlIChjdHgpIHtcclxuICAgIGNvbnN0IHsgYm9keSB9ID0gY3R4LnJlcXVlc3RcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFJvbGVzLmRlbGV0ZU9uZSh7IF9pZDogYm9keS5faWQgfSlcclxuICAgIGN0eC5ib2R5ID0ge1xyXG4gICAgICBjb2RlOiAyMDAsXHJcbiAgICAgIGRhdGE6IHJlc3VsdFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0Um9sZXNUaXRsZSAoY3R4KSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBSb2xlcy5maW5kKHt9LCB7IG1lbnU6IDAgfSlcclxuICAgIGN0eC5ib2R5ID0ge1xyXG4gICAgICBjb2RlOiAyMDAsXHJcbiAgICAgIGRhdGE6IHJlc3VsdFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0Um91dGVzIChjdHgpIHtcclxuXHJcblxyXG5cclxuICAgIGxldCBtZW51cyA9IFtdXHJcblxyXG4gICAgaWYgKCFjdHguaXNBZG1pbikge1xyXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgX2lkOiBjdHguX2lkIH0pXHJcbiAgICAgIGNvbnN0IHsgcm9sZXMgfSA9IHVzZXJcclxuXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm9sZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBlbGVtZW50ID0gcm9sZXNbaV07XHJcbiAgICAgICAgY29uc3QgbWVudSA9IGF3YWl0IFJvbGVzLmZpbmRPbmUoeyBjb2RlOiBlbGVtZW50IH0sIHsgbWVudTogMSB9KVxyXG4gICAgICAgIG1lbnVzLnB1c2goLi4ubWVudS5tZW51KVxyXG4gICAgICB9XHJcbiAgICAgIG1lbnVzID0gQXJyYXkuZnJvbShuZXcgU2V0KG1lbnVzKSlcclxuICAgIH1cclxuXHJcblxyXG4gICAgY29uc3QgdHJlZURhdGEgPSBhd2FpdCBNZW51cy5maW5kKClcclxuXHJcbiAgICBjb25zdCByb3V0ZXMgPSBtZW51c0dldE1lbnVEYXRhKHRyZWVEYXRhLCBtZW51cywgY3R4LmlzQWRtaW4pXHJcbiAgICBjdHguYm9keSA9IHtcclxuICAgICAgY29kZTogMjAwLFxyXG4gICAgICBkYXRhOiByb3V0ZXNcclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBuZXcgYWRtaW5Db250cm9sbGVyKCkiXX0=",
    "map": {
      "version": 3,
      "sources": [
        "AdminController.js"
      ],
      "names": [
        "adminController",
        "getMenu",
        "ctx",
        "menu",
        "Menus",
        "find",
        "body",
        "code",
        "data",
        "addMenu",
        "request",
        "newMenu",
        "result",
        "save",
        "updateMenu",
        "_id",
        "updateOne",
        "deleteMenu",
        "deleteOne",
        "getRoles",
        "Roles",
        "addRole",
        "newRole",
        "updateRole",
        "deleteRole",
        "getRolesTitle",
        "getRoutes",
        "menus",
        "isAdmin",
        "user",
        "User",
        "findOne",
        "roles",
        "i",
        "length",
        "element",
        "push",
        "Array",
        "from",
        "Set",
        "treeData",
        "routes"
      ],
      "mappings": "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",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\api\\",
      "sourcesContent": [
        "import { menusGetMenuData } from \"../conmon/Utils\";\r\nimport Menus from \"../model/Menus\";\r\nimport Roles from \"../model/Roles\";\r\nimport User from '../model/test';\r\nimport { source, toTree } from './toTree';\r\n\r\nclass adminController {\r\n  async getMenu (ctx) {\r\n    const menu = await Menus.find()\r\n    ctx.body = {\r\n      code: 200,\r\n      data: menu\r\n    }\r\n\r\n  }\r\n\r\n  async addMenu (ctx) {\r\n    const body = ctx.request.body\r\n\r\n    // \r\n    // const treeArr = toTree(source)\r\n    // \r\n    const newMenu = new Menus(body)\r\n    const result = await newMenu.save()\r\n    ctx.body = {\r\n      code: 200,\r\n      data: result\r\n    }\r\n  }\r\n\r\n  async updateMenu (ctx) {\r\n    const { body } = ctx.request\r\n    // \r\n    const data = { ...body }\r\n    delete data._id\r\n\r\n    const result = await Menus.updateOne({ _id: body._id }, { ...data })\r\n    ctx.body = {\r\n      code: 200,\r\n      data: result\r\n    }\r\n  }\r\n\r\n  async deleteMenu (ctx) {\r\n    const { body } = ctx.request\r\n    const result = await Menus.deleteOne({ _id: body._id })\r\n    ctx.body = {\r\n      code: 200,\r\n      data: result\r\n    }\r\n  }\r\n\r\n  async getRoles (ctx) {\r\n    const result = await Roles.find()\r\n    ctx.body = {\r\n      code: 200,\r\n      data: result\r\n    }\r\n  }\r\n\r\n  async addRole (ctx) {\r\n    const body = ctx.request.body\r\n\r\n    const newRole = new Roles(body)\r\n    const result = await newRole.save()\r\n    ctx.body = {\r\n      code: 200,\r\n      data: result\r\n    }\r\n  }\r\n\r\n  async updateRole (ctx) {\r\n    const { body } = ctx.request\r\n    // \r\n    const data = { ...body }\r\n    delete data._id\r\n\r\n    const result = await Roles.updateOne({ _id: body._id }, { ...data })\r\n    ctx.body = {\r\n      code: 200,\r\n      data: result\r\n    }\r\n  }\r\n\r\n  async deleteRole (ctx) {\r\n    const { body } = ctx.request\r\n    const result = await Roles.deleteOne({ _id: body._id })\r\n    ctx.body = {\r\n      code: 200,\r\n      data: result\r\n    }\r\n  }\r\n\r\n  async getRolesTitle (ctx) {\r\n    const result = await Roles.find({}, { menu: 0 })\r\n    ctx.body = {\r\n      code: 200,\r\n      data: result\r\n    }\r\n  }\r\n\r\n  async getRoutes (ctx) {\r\n\r\n\r\n\r\n    let menus = []\r\n\r\n    if (!ctx.isAdmin) {\r\n      const user = await User.findOne({ _id: ctx._id })\r\n      const { roles } = user\r\n\r\n      for (let i = 0; i < roles.length; i++) {\r\n        const element = roles[i];\r\n        const menu = await Roles.findOne({ code: element }, { menu: 1 })\r\n        menus.push(...menu.menu)\r\n      }\r\n      menus = Array.from(new Set(menus))\r\n    }\r\n\r\n\r\n    const treeData = await Menus.find()\r\n\r\n    const routes = menusGetMenuData(treeData, menus, ctx.isAdmin)\r\n    ctx.body = {\r\n      code: 200,\r\n      data: routes\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport default new adminController()"
      ]
    },
    "sourceType": "script",
    "mtime": 1637065889047
  },
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\model\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\model\\\\Menus.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\model\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\model\\Menus.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\model\\Menus.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\model\\Menus.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\model\\",
        "sourceFileName": "Menus.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _DBHelpler = _interopRequireDefault(require(\"../config/DBHelpler\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import moment from 'dayjs';\nconst Schema = _DBHelpler.default.Schema;\nconst MenuSchema = new Schema({\n  title: {\n    type: String,\n    default: ''\n  },\n  path: {\n    type: String,\n    default: ''\n  },\n  type: {\n    type: String,\n    default: ''\n  },\n  name: {\n    type: String,\n    default: ''\n  },\n  href: {\n    type: String,\n    default: ''\n  },\n  component: {\n    type: String,\n    default: ''\n  },\n  sort: {\n    type: Number,\n    default: 0\n  },\n  hideInBread: {\n    type: Boolean,\n    default: false\n  },\n  hideInMenu: {\n    type: Boolean,\n    default: false\n  },\n  notCache: {\n    type: Boolean,\n    default: false\n  },\n  icon: {\n    type: String,\n    default: ''\n  },\n  redirect: {\n    type: String,\n    default: ''\n  },\n  expand: {\n    type: Boolean,\n    default: true\n  }\n});\nconst OperationSchema = new Schema({\n  name: {\n    type: String,\n    default: ''\n  },\n  type: {\n    type: String,\n    default: ''\n  },\n  method: {\n    type: String,\n    default: ''\n  },\n  path: {\n    type: String,\n    default: ''\n  },\n  regmark: {\n    type: String,\n    default: ''\n  }\n});\nMenuSchema.add({\n  children: [MenuSchema],\n  operation: [OperationSchema]\n});\n\nconst Menus = _DBHelpler.default.model('menus', MenuSchema);\n\nvar _default = Menus;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk1lbnVzLmpzIl0sIm5hbWVzIjpbIlNjaGVtYSIsIm1vbmdvb3NlIiwiTWVudVNjaGVtYSIsInRpdGxlIiwidHlwZSIsIlN0cmluZyIsImRlZmF1bHQiLCJwYXRoIiwibmFtZSIsImhyZWYiLCJjb21wb25lbnQiLCJzb3J0IiwiTnVtYmVyIiwiaGlkZUluQnJlYWQiLCJCb29sZWFuIiwiaGlkZUluTWVudSIsIm5vdENhY2hlIiwiaWNvbiIsInJlZGlyZWN0IiwiZXhwYW5kIiwiT3BlcmF0aW9uU2NoZW1hIiwibWV0aG9kIiwicmVnbWFyayIsImFkZCIsImNoaWxkcmVuIiwib3BlcmF0aW9uIiwiTWVudXMiLCJtb2RlbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0FBQ0E7QUFFQSxNQUFNQSxNQUFNLEdBQUdDLG1CQUFTRCxNQUF4QjtBQUVBLE1BQU1FLFVBQVUsR0FBRyxJQUFJRixNQUFKLENBQVc7QUFDNUJHLEVBQUFBLEtBQUssRUFBRTtBQUFFQyxJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLE9BQU8sRUFBRTtBQUF6QixHQURxQjtBQUU1QkMsRUFBQUEsSUFBSSxFQUFFO0FBQUVILElBQUFBLElBQUksRUFBRUMsTUFBUjtBQUFnQkMsSUFBQUEsT0FBTyxFQUFFO0FBQXpCLEdBRnNCO0FBRzVCRixFQUFBQSxJQUFJLEVBQUU7QUFBRUEsSUFBQUEsSUFBSSxFQUFFQyxNQUFSO0FBQWdCQyxJQUFBQSxPQUFPLEVBQUU7QUFBekIsR0FIc0I7QUFJNUJFLEVBQUFBLElBQUksRUFBRTtBQUFFSixJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLE9BQU8sRUFBRTtBQUF6QixHQUpzQjtBQUs1QkcsRUFBQUEsSUFBSSxFQUFFO0FBQUVMLElBQUFBLElBQUksRUFBRUMsTUFBUjtBQUFnQkMsSUFBQUEsT0FBTyxFQUFFO0FBQXpCLEdBTHNCO0FBTTVCSSxFQUFBQSxTQUFTLEVBQUU7QUFBRU4sSUFBQUEsSUFBSSxFQUFFQyxNQUFSO0FBQWdCQyxJQUFBQSxPQUFPLEVBQUU7QUFBekIsR0FOaUI7QUFPNUJLLEVBQUFBLElBQUksRUFBRTtBQUFFUCxJQUFBQSxJQUFJLEVBQUVRLE1BQVI7QUFBZ0JOLElBQUFBLE9BQU8sRUFBRTtBQUF6QixHQVBzQjtBQVE1Qk8sRUFBQUEsV0FBVyxFQUFFO0FBQUVULElBQUFBLElBQUksRUFBRVUsT0FBUjtBQUFpQlIsSUFBQUEsT0FBTyxFQUFFO0FBQTFCLEdBUmU7QUFTNUJTLEVBQUFBLFVBQVUsRUFBRTtBQUFFWCxJQUFBQSxJQUFJLEVBQUVVLE9BQVI7QUFBaUJSLElBQUFBLE9BQU8sRUFBRTtBQUExQixHQVRnQjtBQVU1QlUsRUFBQUEsUUFBUSxFQUFFO0FBQUVaLElBQUFBLElBQUksRUFBRVUsT0FBUjtBQUFpQlIsSUFBQUEsT0FBTyxFQUFFO0FBQTFCLEdBVmtCO0FBVzVCVyxFQUFBQSxJQUFJLEVBQUU7QUFBRWIsSUFBQUEsSUFBSSxFQUFFQyxNQUFSO0FBQWdCQyxJQUFBQSxPQUFPLEVBQUU7QUFBekIsR0FYc0I7QUFZNUJZLEVBQUFBLFFBQVEsRUFBRTtBQUFFZCxJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLE9BQU8sRUFBRTtBQUF6QixHQVprQjtBQWE1QmEsRUFBQUEsTUFBTSxFQUFFO0FBQUVmLElBQUFBLElBQUksRUFBRVUsT0FBUjtBQUFpQlIsSUFBQUEsT0FBTyxFQUFFO0FBQTFCO0FBYm9CLENBQVgsQ0FBbkI7QUFnQkEsTUFBTWMsZUFBZSxHQUFHLElBQUlwQixNQUFKLENBQVc7QUFDakNRLEVBQUFBLElBQUksRUFBRTtBQUFFSixJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLE9BQU8sRUFBRTtBQUF6QixHQUQyQjtBQUVqQ0YsRUFBQUEsSUFBSSxFQUFFO0FBQUVBLElBQUFBLElBQUksRUFBRUMsTUFBUjtBQUFnQkMsSUFBQUEsT0FBTyxFQUFFO0FBQXpCLEdBRjJCO0FBR2pDZSxFQUFBQSxNQUFNLEVBQUU7QUFBRWpCLElBQUFBLElBQUksRUFBRUMsTUFBUjtBQUFnQkMsSUFBQUEsT0FBTyxFQUFFO0FBQXpCLEdBSHlCO0FBSWpDQyxFQUFBQSxJQUFJLEVBQUU7QUFBRUgsSUFBQUEsSUFBSSxFQUFFQyxNQUFSO0FBQWdCQyxJQUFBQSxPQUFPLEVBQUU7QUFBekIsR0FKMkI7QUFLakNnQixFQUFBQSxPQUFPLEVBQUU7QUFBRWxCLElBQUFBLElBQUksRUFBRUMsTUFBUjtBQUFnQkMsSUFBQUEsT0FBTyxFQUFFO0FBQXpCO0FBTHdCLENBQVgsQ0FBeEI7QUFRQUosVUFBVSxDQUFDcUIsR0FBWCxDQUFlO0FBQ2JDLEVBQUFBLFFBQVEsRUFBRSxDQUFDdEIsVUFBRCxDQURHO0FBRWJ1QixFQUFBQSxTQUFTLEVBQUUsQ0FBQ0wsZUFBRDtBQUZFLENBQWY7O0FBS0EsTUFBTU0sS0FBSyxHQUFHekIsbUJBQVMwQixLQUFULENBQWUsT0FBZixFQUF3QnpCLFVBQXhCLENBQWQ7O2VBRWV3QixLIiwic291cmNlUm9vdCI6IkQ6XFxIVE1MK2Nzcytqc1xcbm9kZV9rb2FcXHNyY1xcbW9kZWxcXCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICcuLi9jb25maWcvREJIZWxwbGVyJztcclxuLy8gaW1wb3J0IG1vbWVudCBmcm9tICdkYXlqcyc7XHJcblxyXG5jb25zdCBTY2hlbWEgPSBtb25nb29zZS5TY2hlbWFcclxuXHJcbmNvbnN0IE1lbnVTY2hlbWEgPSBuZXcgU2NoZW1hKHtcclxuICB0aXRsZTogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcnIH0sXHJcbiAgcGF0aDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcnIH0sXHJcbiAgdHlwZTogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcnIH0sXHJcbiAgbmFtZTogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcnIH0sXHJcbiAgaHJlZjogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcnIH0sXHJcbiAgY29tcG9uZW50OiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJycgfSxcclxuICBzb3J0OiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxyXG4gIGhpZGVJbkJyZWFkOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH0sXHJcbiAgaGlkZUluTWVudTogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9LFxyXG4gIG5vdENhY2hlOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH0sXHJcbiAgaWNvbjogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcnIH0sXHJcbiAgcmVkaXJlY3Q6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LFxyXG4gIGV4cGFuZDogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiB0cnVlIH0sXHJcbn0pXHJcblxyXG5jb25zdCBPcGVyYXRpb25TY2hlbWEgPSBuZXcgU2NoZW1hKHtcclxuICBuYW1lOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJycgfSxcclxuICB0eXBlOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJycgfSxcclxuICBtZXRob2Q6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LFxyXG4gIHBhdGg6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LFxyXG4gIHJlZ21hcms6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LFxyXG59KVxyXG5cclxuTWVudVNjaGVtYS5hZGQoe1xyXG4gIGNoaWxkcmVuOiBbTWVudVNjaGVtYV0sXHJcbiAgb3BlcmF0aW9uOiBbT3BlcmF0aW9uU2NoZW1hXVxyXG59KVxyXG5cclxuY29uc3QgTWVudXMgPSBtb25nb29zZS5tb2RlbCgnbWVudXMnLCBNZW51U2NoZW1hKVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTWVudXMiXX0=",
    "map": {
      "version": 3,
      "sources": [
        "Menus.js"
      ],
      "names": [
        "Schema",
        "mongoose",
        "MenuSchema",
        "title",
        "type",
        "String",
        "default",
        "path",
        "name",
        "href",
        "component",
        "sort",
        "Number",
        "hideInBread",
        "Boolean",
        "hideInMenu",
        "notCache",
        "icon",
        "redirect",
        "expand",
        "OperationSchema",
        "method",
        "regmark",
        "add",
        "children",
        "operation",
        "Menus",
        "model"
      ],
      "mappings": ";;;;;;;AAAA;;;;AACA;AAEA,MAAMA,MAAM,GAAGC,mBAASD,MAAxB;AAEA,MAAME,UAAU,GAAG,IAAIF,MAAJ,CAAW;AAC5BG,EAAAA,KAAK,EAAE;AAAEC,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,OAAO,EAAE;AAAzB,GADqB;AAE5BC,EAAAA,IAAI,EAAE;AAAEH,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,OAAO,EAAE;AAAzB,GAFsB;AAG5BF,EAAAA,IAAI,EAAE;AAAEA,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,OAAO,EAAE;AAAzB,GAHsB;AAI5BE,EAAAA,IAAI,EAAE;AAAEJ,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,OAAO,EAAE;AAAzB,GAJsB;AAK5BG,EAAAA,IAAI,EAAE;AAAEL,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,OAAO,EAAE;AAAzB,GALsB;AAM5BI,EAAAA,SAAS,EAAE;AAAEN,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,OAAO,EAAE;AAAzB,GANiB;AAO5BK,EAAAA,IAAI,EAAE;AAAEP,IAAAA,IAAI,EAAEQ,MAAR;AAAgBN,IAAAA,OAAO,EAAE;AAAzB,GAPsB;AAQ5BO,EAAAA,WAAW,EAAE;AAAET,IAAAA,IAAI,EAAEU,OAAR;AAAiBR,IAAAA,OAAO,EAAE;AAA1B,GARe;AAS5BS,EAAAA,UAAU,EAAE;AAAEX,IAAAA,IAAI,EAAEU,OAAR;AAAiBR,IAAAA,OAAO,EAAE;AAA1B,GATgB;AAU5BU,EAAAA,QAAQ,EAAE;AAAEZ,IAAAA,IAAI,EAAEU,OAAR;AAAiBR,IAAAA,OAAO,EAAE;AAA1B,GAVkB;AAW5BW,EAAAA,IAAI,EAAE;AAAEb,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,OAAO,EAAE;AAAzB,GAXsB;AAY5BY,EAAAA,QAAQ,EAAE;AAAEd,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,OAAO,EAAE;AAAzB,GAZkB;AAa5Ba,EAAAA,MAAM,EAAE;AAAEf,IAAAA,IAAI,EAAEU,OAAR;AAAiBR,IAAAA,OAAO,EAAE;AAA1B;AAboB,CAAX,CAAnB;AAgBA,MAAMc,eAAe,GAAG,IAAIpB,MAAJ,CAAW;AACjCQ,EAAAA,IAAI,EAAE;AAAEJ,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,OAAO,EAAE;AAAzB,GAD2B;AAEjCF,EAAAA,IAAI,EAAE;AAAEA,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,OAAO,EAAE;AAAzB,GAF2B;AAGjCe,EAAAA,MAAM,EAAE;AAAEjB,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,OAAO,EAAE;AAAzB,GAHyB;AAIjCC,EAAAA,IAAI,EAAE;AAAEH,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,OAAO,EAAE;AAAzB,GAJ2B;AAKjCgB,EAAAA,OAAO,EAAE;AAAElB,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,OAAO,EAAE;AAAzB;AALwB,CAAX,CAAxB;AAQAJ,UAAU,CAACqB,GAAX,CAAe;AACbC,EAAAA,QAAQ,EAAE,CAACtB,UAAD,CADG;AAEbuB,EAAAA,SAAS,EAAE,CAACL,eAAD;AAFE,CAAf;;AAKA,MAAMM,KAAK,GAAGzB,mBAAS0B,KAAT,CAAe,OAAf,EAAwBzB,UAAxB,CAAd;;eAEewB,K",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\model\\",
      "sourcesContent": [
        "import mongoose from '../config/DBHelpler';\r\n// import moment from 'dayjs';\r\n\r\nconst Schema = mongoose.Schema\r\n\r\nconst MenuSchema = new Schema({\r\n  title: { type: String, default: '' },\r\n  path: { type: String, default: '' },\r\n  type: { type: String, default: '' },\r\n  name: { type: String, default: '' },\r\n  href: { type: String, default: '' },\r\n  component: { type: String, default: '' },\r\n  sort: { type: Number, default: 0 },\r\n  hideInBread: { type: Boolean, default: false },\r\n  hideInMenu: { type: Boolean, default: false },\r\n  notCache: { type: Boolean, default: false },\r\n  icon: { type: String, default: '' },\r\n  redirect: { type: String, default: '' },\r\n  expand: { type: Boolean, default: true },\r\n})\r\n\r\nconst OperationSchema = new Schema({\r\n  name: { type: String, default: '' },\r\n  type: { type: String, default: '' },\r\n  method: { type: String, default: '' },\r\n  path: { type: String, default: '' },\r\n  regmark: { type: String, default: '' },\r\n})\r\n\r\nMenuSchema.add({\r\n  children: [MenuSchema],\r\n  operation: [OperationSchema]\r\n})\r\n\r\nconst Menus = mongoose.model('menus', MenuSchema)\r\n\r\nexport default Menus"
      ]
    },
    "sourceType": "script",
    "mtime": 1637149870825
  },
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\model\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\model\\\\Roles.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\model\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\model\\Roles.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\model\\Roles.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\model\\Roles.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\model\\",
        "sourceFileName": "Roles.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _DBHelpler = _interopRequireDefault(require(\"../config/DBHelpler\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import moment from 'dayjs';\nconst Schema = _DBHelpler.default.Schema;\nconst RolesSchema = new Schema({\n  title: {\n    type: String,\n    default: ''\n  },\n  code: {\n    type: String,\n    default: ''\n  },\n  describe: {\n    type: String,\n    default: ''\n  },\n  menu: {\n    type: Array,\n    default: []\n  }\n});\n\nconst Roles = _DBHelpler.default.model('roles', RolesSchema);\n\nvar _default = Roles;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlJvbGVzLmpzIl0sIm5hbWVzIjpbIlNjaGVtYSIsIm1vbmdvb3NlIiwiUm9sZXNTY2hlbWEiLCJ0aXRsZSIsInR5cGUiLCJTdHJpbmciLCJkZWZhdWx0IiwiY29kZSIsImRlc2NyaWJlIiwibWVudSIsIkFycmF5IiwiUm9sZXMiLCJtb2RlbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0FBQ0E7QUFFQSxNQUFNQSxNQUFNLEdBQUdDLG1CQUFTRCxNQUF4QjtBQUVBLE1BQU1FLFdBQVcsR0FBRyxJQUFJRixNQUFKLENBQVc7QUFDN0JHLEVBQUFBLEtBQUssRUFBRTtBQUFFQyxJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLE9BQU8sRUFBRTtBQUF6QixHQURzQjtBQUU3QkMsRUFBQUEsSUFBSSxFQUFFO0FBQUVILElBQUFBLElBQUksRUFBRUMsTUFBUjtBQUFnQkMsSUFBQUEsT0FBTyxFQUFFO0FBQXpCLEdBRnVCO0FBRzdCRSxFQUFBQSxRQUFRLEVBQUU7QUFBRUosSUFBQUEsSUFBSSxFQUFFQyxNQUFSO0FBQWdCQyxJQUFBQSxPQUFPLEVBQUU7QUFBekIsR0FIbUI7QUFJN0JHLEVBQUFBLElBQUksRUFBRTtBQUFFTCxJQUFBQSxJQUFJLEVBQUVNLEtBQVI7QUFBZUosSUFBQUEsT0FBTyxFQUFFO0FBQXhCO0FBSnVCLENBQVgsQ0FBcEI7O0FBT0EsTUFBTUssS0FBSyxHQUFHVixtQkFBU1csS0FBVCxDQUFlLE9BQWYsRUFBd0JWLFdBQXhCLENBQWQ7O2VBRWVTLEsiLCJzb3VyY2VSb290IjoiRDpcXEhUTUwrY3NzK2pzXFxub2RlX2tvYVxcc3JjXFxtb2RlbFxcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJy4uL2NvbmZpZy9EQkhlbHBsZXInO1xyXG4vLyBpbXBvcnQgbW9tZW50IGZyb20gJ2RheWpzJztcclxuXHJcbmNvbnN0IFNjaGVtYSA9IG1vbmdvb3NlLlNjaGVtYVxyXG5cclxuY29uc3QgUm9sZXNTY2hlbWEgPSBuZXcgU2NoZW1hKHtcclxuICB0aXRsZTogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcnIH0sXHJcbiAgY29kZTogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcnIH0sXHJcbiAgZGVzY3JpYmU6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LFxyXG4gIG1lbnU6IHsgdHlwZTogQXJyYXksIGRlZmF1bHQ6IFtdIH1cclxufSlcclxuXHJcbmNvbnN0IFJvbGVzID0gbW9uZ29vc2UubW9kZWwoJ3JvbGVzJywgUm9sZXNTY2hlbWEpXHJcblxyXG5leHBvcnQgZGVmYXVsdCBSb2xlcyJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "Roles.js"
      ],
      "names": [
        "Schema",
        "mongoose",
        "RolesSchema",
        "title",
        "type",
        "String",
        "default",
        "code",
        "describe",
        "menu",
        "Array",
        "Roles",
        "model"
      ],
      "mappings": ";;;;;;;AAAA;;;;AACA;AAEA,MAAMA,MAAM,GAAGC,mBAASD,MAAxB;AAEA,MAAME,WAAW,GAAG,IAAIF,MAAJ,CAAW;AAC7BG,EAAAA,KAAK,EAAE;AAAEC,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,OAAO,EAAE;AAAzB,GADsB;AAE7BC,EAAAA,IAAI,EAAE;AAAEH,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,OAAO,EAAE;AAAzB,GAFuB;AAG7BE,EAAAA,QAAQ,EAAE;AAAEJ,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,OAAO,EAAE;AAAzB,GAHmB;AAI7BG,EAAAA,IAAI,EAAE;AAAEL,IAAAA,IAAI,EAAEM,KAAR;AAAeJ,IAAAA,OAAO,EAAE;AAAxB;AAJuB,CAAX,CAApB;;AAOA,MAAMK,KAAK,GAAGV,mBAASW,KAAT,CAAe,OAAf,EAAwBV,WAAxB,CAAd;;eAEeS,K",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\model\\",
      "sourcesContent": [
        "import mongoose from '../config/DBHelpler';\r\n// import moment from 'dayjs';\r\n\r\nconst Schema = mongoose.Schema\r\n\r\nconst RolesSchema = new Schema({\r\n  title: { type: String, default: '' },\r\n  code: { type: String, default: '' },\r\n  describe: { type: String, default: '' },\r\n  menu: { type: Array, default: [] }\r\n})\r\n\r\nconst Roles = mongoose.model('roles', RolesSchema)\r\n\r\nexport default Roles"
      ]
    },
    "sourceType": "script",
    "mtime": 1636863498972
  },
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\api\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\api\\\\toTree.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\api\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\api\\toTree.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\api\\toTree.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\api\\toTree.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\api\\",
        "sourceFileName": "toTree.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.toTree = exports.source = void 0;\nconst source = [{\n  id: 1,\n  pid: 0,\n  name: 'body'\n}, {\n  id: 2,\n  pid: 1,\n  name: 'title'\n}, {\n  id: 3,\n  pid: 1,\n  name: 'div'\n}, {\n  id: 4,\n  pid: 3,\n  name: 'span'\n}, {\n  id: 5,\n  pid: 3,\n  name: 'icon'\n}, {\n  id: 6,\n  pid: 4,\n  name: 'subspan'\n}];\nexports.source = source;\n\nconst toTree = data => {\n  let result = [];\n\n  while (data.length > 0) {\n    const q = data.shift();\n    data.filter(item => {\n      if (item.id === q.pid) {\n        (item.children || (item.children = [])).push(q);\n      } else {\n        result.push(q);\n      }\n    });\n  }\n\n  return result;\n};\n\nexports.toTree = toTree;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRvVHJlZS5qcyJdLCJuYW1lcyI6WyJzb3VyY2UiLCJpZCIsInBpZCIsIm5hbWUiLCJ0b1RyZWUiLCJkYXRhIiwicmVzdWx0IiwibGVuZ3RoIiwicSIsInNoaWZ0IiwiZmlsdGVyIiwiaXRlbSIsImNoaWxkcmVuIiwicHVzaCJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsTUFBTUEsTUFBTSxHQUFHLENBQUM7QUFDZEMsRUFBQUEsRUFBRSxFQUFFLENBRFU7QUFFZEMsRUFBQUEsR0FBRyxFQUFFLENBRlM7QUFHZEMsRUFBQUEsSUFBSSxFQUFFO0FBSFEsQ0FBRCxFQUlaO0FBQ0RGLEVBQUFBLEVBQUUsRUFBRSxDQURIO0FBRURDLEVBQUFBLEdBQUcsRUFBRSxDQUZKO0FBR0RDLEVBQUFBLElBQUksRUFBRTtBQUhMLENBSlksRUFRWjtBQUNERixFQUFBQSxFQUFFLEVBQUUsQ0FESDtBQUVEQyxFQUFBQSxHQUFHLEVBQUUsQ0FGSjtBQUdEQyxFQUFBQSxJQUFJLEVBQUU7QUFITCxDQVJZLEVBWVo7QUFDREYsRUFBQUEsRUFBRSxFQUFFLENBREg7QUFFREMsRUFBQUEsR0FBRyxFQUFFLENBRko7QUFHREMsRUFBQUEsSUFBSSxFQUFFO0FBSEwsQ0FaWSxFQWdCWjtBQUNERixFQUFBQSxFQUFFLEVBQUUsQ0FESDtBQUVEQyxFQUFBQSxHQUFHLEVBQUUsQ0FGSjtBQUdEQyxFQUFBQSxJQUFJLEVBQUU7QUFITCxDQWhCWSxFQW9CWjtBQUNERixFQUFBQSxFQUFFLEVBQUUsQ0FESDtBQUVEQyxFQUFBQSxHQUFHLEVBQUUsQ0FGSjtBQUdEQyxFQUFBQSxJQUFJLEVBQUU7QUFITCxDQXBCWSxDQUFmOzs7QUEwQkEsTUFBTUMsTUFBTSxHQUFJQyxJQUFELElBQVU7QUFDdkIsTUFBSUMsTUFBTSxHQUFHLEVBQWI7O0FBQ0EsU0FBT0QsSUFBSSxDQUFDRSxNQUFMLEdBQWMsQ0FBckIsRUFBd0I7QUFDdEIsVUFBTUMsQ0FBQyxHQUFHSCxJQUFJLENBQUNJLEtBQUwsRUFBVjtBQUNBSixJQUFBQSxJQUFJLENBQUNLLE1BQUwsQ0FBWUMsSUFBSSxJQUFJO0FBQ2xCLFVBQUlBLElBQUksQ0FBQ1YsRUFBTCxLQUFZTyxDQUFDLENBQUNOLEdBQWxCLEVBQXVCO0FBQ3JCLFNBQUNTLElBQUksQ0FBQ0MsUUFBTCxLQUFrQkQsSUFBSSxDQUFDQyxRQUFMLEdBQWdCLEVBQWxDLENBQUQsRUFBd0NDLElBQXhDLENBQTZDTCxDQUE3QztBQUNELE9BRkQsTUFFTztBQUNMRixRQUFBQSxNQUFNLENBQUNPLElBQVAsQ0FBWUwsQ0FBWjtBQUNEO0FBQ0YsS0FORDtBQU9EOztBQUNELFNBQU9GLE1BQVA7QUFDRCxDQWJEIiwic291cmNlUm9vdCI6IkQ6XFxIVE1MK2Nzcytqc1xcbm9kZV9rb2FcXHNyY1xcYXBpXFwiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzb3VyY2UgPSBbe1xyXG4gIGlkOiAxLFxyXG4gIHBpZDogMCxcclxuICBuYW1lOiAnYm9keSdcclxufSwge1xyXG4gIGlkOiAyLFxyXG4gIHBpZDogMSxcclxuICBuYW1lOiAndGl0bGUnXHJcbn0sIHtcclxuICBpZDogMyxcclxuICBwaWQ6IDEsXHJcbiAgbmFtZTogJ2RpdidcclxufSwge1xyXG4gIGlkOiA0LFxyXG4gIHBpZDogMyxcclxuICBuYW1lOiAnc3BhbidcclxufSwge1xyXG4gIGlkOiA1LFxyXG4gIHBpZDogMyxcclxuICBuYW1lOiAnaWNvbidcclxufSwge1xyXG4gIGlkOiA2LFxyXG4gIHBpZDogNCxcclxuICBuYW1lOiAnc3Vic3BhbidcclxufV1cclxuXHJcbmNvbnN0IHRvVHJlZSA9IChkYXRhKSA9PiB7XHJcbiAgbGV0IHJlc3VsdCA9IFtdXHJcbiAgd2hpbGUgKGRhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgY29uc3QgcSA9IGRhdGEuc2hpZnQoKVxyXG4gICAgZGF0YS5maWx0ZXIoaXRlbSA9PiB7XHJcbiAgICAgIGlmIChpdGVtLmlkID09PSBxLnBpZCkge1xyXG4gICAgICAgIChpdGVtLmNoaWxkcmVuIHx8IChpdGVtLmNoaWxkcmVuID0gW10pKS5wdXNoKHEpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVzdWx0LnB1c2gocSlcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcbiAgcmV0dXJuIHJlc3VsdFxyXG59XHJcblxyXG5leHBvcnQgeyBzb3VyY2UsIHRvVHJlZSB9Il19",
    "map": {
      "version": 3,
      "sources": [
        "toTree.js"
      ],
      "names": [
        "source",
        "id",
        "pid",
        "name",
        "toTree",
        "data",
        "result",
        "length",
        "q",
        "shift",
        "filter",
        "item",
        "children",
        "push"
      ],
      "mappings": ";;;;;;AAAA,MAAMA,MAAM,GAAG,CAAC;AACdC,EAAAA,EAAE,EAAE,CADU;AAEdC,EAAAA,GAAG,EAAE,CAFS;AAGdC,EAAAA,IAAI,EAAE;AAHQ,CAAD,EAIZ;AACDF,EAAAA,EAAE,EAAE,CADH;AAEDC,EAAAA,GAAG,EAAE,CAFJ;AAGDC,EAAAA,IAAI,EAAE;AAHL,CAJY,EAQZ;AACDF,EAAAA,EAAE,EAAE,CADH;AAEDC,EAAAA,GAAG,EAAE,CAFJ;AAGDC,EAAAA,IAAI,EAAE;AAHL,CARY,EAYZ;AACDF,EAAAA,EAAE,EAAE,CADH;AAEDC,EAAAA,GAAG,EAAE,CAFJ;AAGDC,EAAAA,IAAI,EAAE;AAHL,CAZY,EAgBZ;AACDF,EAAAA,EAAE,EAAE,CADH;AAEDC,EAAAA,GAAG,EAAE,CAFJ;AAGDC,EAAAA,IAAI,EAAE;AAHL,CAhBY,EAoBZ;AACDF,EAAAA,EAAE,EAAE,CADH;AAEDC,EAAAA,GAAG,EAAE,CAFJ;AAGDC,EAAAA,IAAI,EAAE;AAHL,CApBY,CAAf;;;AA0BA,MAAMC,MAAM,GAAIC,IAAD,IAAU;AACvB,MAAIC,MAAM,GAAG,EAAb;;AACA,SAAOD,IAAI,CAACE,MAAL,GAAc,CAArB,EAAwB;AACtB,UAAMC,CAAC,GAAGH,IAAI,CAACI,KAAL,EAAV;AACAJ,IAAAA,IAAI,CAACK,MAAL,CAAYC,IAAI,IAAI;AAClB,UAAIA,IAAI,CAACV,EAAL,KAAYO,CAAC,CAACN,GAAlB,EAAuB;AACrB,SAACS,IAAI,CAACC,QAAL,KAAkBD,IAAI,CAACC,QAAL,GAAgB,EAAlC,CAAD,EAAwCC,IAAxC,CAA6CL,CAA7C;AACD,OAFD,MAEO;AACLF,QAAAA,MAAM,CAACO,IAAP,CAAYL,CAAZ;AACD;AACF,KAND;AAOD;;AACD,SAAOF,MAAP;AACD,CAbD",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\api\\",
      "sourcesContent": [
        "const source = [{\r\n  id: 1,\r\n  pid: 0,\r\n  name: 'body'\r\n}, {\r\n  id: 2,\r\n  pid: 1,\r\n  name: 'title'\r\n}, {\r\n  id: 3,\r\n  pid: 1,\r\n  name: 'div'\r\n}, {\r\n  id: 4,\r\n  pid: 3,\r\n  name: 'span'\r\n}, {\r\n  id: 5,\r\n  pid: 3,\r\n  name: 'icon'\r\n}, {\r\n  id: 6,\r\n  pid: 4,\r\n  name: 'subspan'\r\n}]\r\n\r\nconst toTree = (data) => {\r\n  let result = []\r\n  while (data.length > 0) {\r\n    const q = data.shift()\r\n    data.filter(item => {\r\n      if (item.id === q.pid) {\r\n        (item.children || (item.children = [])).push(q)\r\n      } else {\r\n        result.push(q)\r\n      }\r\n    })\r\n  }\r\n  return result\r\n}\r\n\r\nexport { source, toTree }"
      ]
    },
    "sourceType": "script",
    "mtime": 1634052090110
  },
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\routes\\\\routera.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\routes\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\routes\\routera.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\routes\\routera.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\routes\\routera.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\routes\\",
        "sourceFileName": "routera.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _a = _interopRequireDefault(require(\"../api/a\"));\n\nvar _ContentController = _interopRequireDefault(require(\"../api/ContentController\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Router = require('koa-router'); // import {a} from '../api/a'\n// const a = require('../api/a')\n\n\nconst router = new Router();\nrouter.get('/svgcap', _a.default.getSvgCaptcha);\nrouter.post('/submitLogin', _a.default.submitLogin);\nrouter.post('/toSvg', _a.default.toSvg);\nrouter.post('/reg', _a.default.reg);\nrouter.get('/isEmail', _a.default.isEmail);\nrouter.get('/get_lists', _ContentController.default.getLists);\nrouter.get('/userInfo', _a.default.getUserInfo);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvdXRlcmEuanMiXSwibmFtZXMiOlsiUm91dGVyIiwicmVxdWlyZSIsInJvdXRlciIsImdldCIsIkxvZ2luIiwiZ2V0U3ZnQ2FwdGNoYSIsInBvc3QiLCJzdWJtaXRMb2dpbiIsInRvU3ZnIiwicmVnIiwiaXNFbWFpbCIsIkNvbnRlbnRDb250cm9sbGVyIiwiZ2V0TGlzdHMiLCJnZXRVc2VySW5mbyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7O0FBR0E7O0FBQ0E7Ozs7QUFKQSxNQUFNQSxNQUFNLEdBQUdDLE9BQU8sQ0FBQyxZQUFELENBQXRCLEMsQ0FDQTtBQUNBOzs7QUFLQSxNQUFNQyxNQUFNLEdBQUcsSUFBSUYsTUFBSixFQUFmO0FBRUFFLE1BQU0sQ0FBQ0MsR0FBUCxDQUFXLFNBQVgsRUFBc0JDLFdBQU1DLGFBQTVCO0FBQ0FILE1BQU0sQ0FBQ0ksSUFBUCxDQUFZLGNBQVosRUFBNEJGLFdBQU1HLFdBQWxDO0FBQ0FMLE1BQU0sQ0FBQ0ksSUFBUCxDQUFZLFFBQVosRUFBc0JGLFdBQU1JLEtBQTVCO0FBQ0FOLE1BQU0sQ0FBQ0ksSUFBUCxDQUFZLE1BQVosRUFBb0JGLFdBQU1LLEdBQTFCO0FBQ0FQLE1BQU0sQ0FBQ0MsR0FBUCxDQUFXLFVBQVgsRUFBdUJDLFdBQU1NLE9BQTdCO0FBQ0FSLE1BQU0sQ0FBQ0MsR0FBUCxDQUFXLFlBQVgsRUFBeUJRLDJCQUFrQkMsUUFBM0M7QUFDQVYsTUFBTSxDQUFDQyxHQUFQLENBQVcsV0FBWCxFQUF3QkMsV0FBTVMsV0FBOUI7QUFHQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCYixNQUFqQiIsInNvdXJjZVJvb3QiOiJEOlxcSFRNTCtjc3MranNcXG5vZGVfa29hXFxzcmNcXHJvdXRlc1xcIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUm91dGVyID0gcmVxdWlyZSgna29hLXJvdXRlcicpXHJcbi8vIGltcG9ydCB7YX0gZnJvbSAnLi4vYXBpL2EnXHJcbi8vIGNvbnN0IGEgPSByZXF1aXJlKCcuLi9hcGkvYScpXHJcbmltcG9ydCBMb2dpbiBmcm9tICcuLi9hcGkvYSc7XHJcbmltcG9ydCBDb250ZW50Q29udHJvbGxlciBmcm9tICcuLi9hcGkvQ29udGVudENvbnRyb2xsZXInO1xyXG5cclxuXHJcbmNvbnN0IHJvdXRlciA9IG5ldyBSb3V0ZXIoKVxyXG5cclxucm91dGVyLmdldCgnL3N2Z2NhcCcsIExvZ2luLmdldFN2Z0NhcHRjaGEpXHJcbnJvdXRlci5wb3N0KCcvc3VibWl0TG9naW4nLCBMb2dpbi5zdWJtaXRMb2dpbilcclxucm91dGVyLnBvc3QoJy90b1N2ZycsIExvZ2luLnRvU3ZnKVxyXG5yb3V0ZXIucG9zdCgnL3JlZycsIExvZ2luLnJlZylcclxucm91dGVyLmdldCgnL2lzRW1haWwnLCBMb2dpbi5pc0VtYWlsKVxyXG5yb3V0ZXIuZ2V0KCcvZ2V0X2xpc3RzJywgQ29udGVudENvbnRyb2xsZXIuZ2V0TGlzdHMpXHJcbnJvdXRlci5nZXQoJy91c2VySW5mbycsIExvZ2luLmdldFVzZXJJbmZvKVxyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcm91dGVyIl19",
    "map": {
      "version": 3,
      "sources": [
        "routera.js"
      ],
      "names": [
        "Router",
        "require",
        "router",
        "get",
        "Login",
        "getSvgCaptcha",
        "post",
        "submitLogin",
        "toSvg",
        "reg",
        "isEmail",
        "ContentController",
        "getLists",
        "getUserInfo",
        "module",
        "exports"
      ],
      "mappings": ";;AAGA;;AACA;;;;AAJA,MAAMA,MAAM,GAAGC,OAAO,CAAC,YAAD,CAAtB,C,CACA;AACA;;;AAKA,MAAMC,MAAM,GAAG,IAAIF,MAAJ,EAAf;AAEAE,MAAM,CAACC,GAAP,CAAW,SAAX,EAAsBC,WAAMC,aAA5B;AACAH,MAAM,CAACI,IAAP,CAAY,cAAZ,EAA4BF,WAAMG,WAAlC;AACAL,MAAM,CAACI,IAAP,CAAY,QAAZ,EAAsBF,WAAMI,KAA5B;AACAN,MAAM,CAACI,IAAP,CAAY,MAAZ,EAAoBF,WAAMK,GAA1B;AACAP,MAAM,CAACC,GAAP,CAAW,UAAX,EAAuBC,WAAMM,OAA7B;AACAR,MAAM,CAACC,GAAP,CAAW,YAAX,EAAyBQ,2BAAkBC,QAA3C;AACAV,MAAM,CAACC,GAAP,CAAW,WAAX,EAAwBC,WAAMS,WAA9B;AAGAC,MAAM,CAACC,OAAP,GAAiBb,MAAjB",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\routes\\",
      "sourcesContent": [
        "const Router = require('koa-router')\r\n// import {a} from '../api/a'\r\n// const a = require('../api/a')\r\nimport Login from '../api/a';\r\nimport ContentController from '../api/ContentController';\r\n\r\n\r\nconst router = new Router()\r\n\r\nrouter.get('/svgcap', Login.getSvgCaptcha)\r\nrouter.post('/submitLogin', Login.submitLogin)\r\nrouter.post('/toSvg', Login.toSvg)\r\nrouter.post('/reg', Login.reg)\r\nrouter.get('/isEmail', Login.isEmail)\r\nrouter.get('/get_lists', ContentController.getLists)\r\nrouter.get('/userInfo', Login.getUserInfo)\r\n\r\n\r\nmodule.exports = router"
      ]
    },
    "sourceType": "script",
    "mtime": 1632481678811
  },
  "{\"assumptions\":{},\"sourceRoot\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\api\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\HTML+css+js\\\\node_koa\",\"filename\":\"D:\\\\HTML+css+js\\\\node_koa\\\\src\\\\api\\\\a.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\HTML+css+js\\\\node_koa\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.14.3": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\api\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "D:\\HTML+css+js\\node_koa",
      "filename": "D:\\HTML+css+js\\node_koa\\src\\api\\a.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "D:\\HTML+css+js\\node_koa",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\HTML+css+js\\node_koa\\src\\api\\a.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "D:\\HTML+css+js\\node_koa\\src\\api\\a.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\api\\",
        "sourceFileName": "a.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _svgCaptcha = _interopRequireDefault(require(\"svg-captcha\"));\n\nvar _RedisConfig = require(\"../config/RedisConfig\");\n\nvar _Utils = require(\"../conmon/Utils\");\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _index = _interopRequireDefault(require(\"../config/index\"));\n\nvar _test = _interopRequireDefault(require(\"../model/test\"));\n\nvar _Roles = _interopRequireDefault(require(\"../model/Roles\"));\n\nvar _SignRecord = _interopRequireDefault(require(\"../model/SignRecord\"));\n\nvar _dayjs = _interopRequireDefault(require(\"dayjs\"));\n\nvar _Menus = _interopRequireDefault(require(\"../model/Menus\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//新加接口前记得在jwt里面放行\nclass Login {\n  constructor() {}\n\n  getSvgCaptcha = async ctx => {\n    let body = ctx.request.query;\n\n    let svgCaptcha = _svgCaptcha.default.create({\n      size: 4,\n      ignoreChars: '0o1il',\n      color: true,\n      noise: Math.floor(Math.random() * 5),\n      width: 150,\n      height: 50\n    }); // \n\n\n    if (body.sid) {\n      (0, _RedisConfig.setValue)(body.sid, svgCaptcha.text, 10 * 60); //设置10分钟的失效时间\n    }\n\n    (0, _RedisConfig.getValue)(body.sid);\n    ctx.body = {\n      svg: svgCaptcha.data\n    };\n  };\n\n  async submitLogin(ctx) {\n    const body1 = ctx.request.body; // \n\n    let sid = body1.sid;\n    let code = body1.code;\n    const checkCodes = await (0, _Utils.checkCode)(sid, code);\n\n    if (checkCodes == 1) {\n      let checkeUserPasswd = false;\n      let users = await _test.default.findOne({\n        username: body1.username\n      });\n\n      if (users && users.password === body1.password) {\n        const userObj = users.toJSON(); // \n\n        let arr = ['password'];\n        arr.map(item => {\n          delete userObj[item];\n        });\n\n        let token = _jsonwebtoken.default.sign({\n          _id: userObj._id\n        }, _index.default.JWT_SECRET, {\n          expiresIn: '7d'\n        });\n\n        const signRecord = await _SignRecord.default.findByUid(userObj._id);\n\n        if (signRecord !== null) {\n          if ((0, _dayjs.default)(signRecord.created).format('YYYY-MM-DD') === (0, _dayjs.default)().format('YYYY-MM-DD')) {\n            userObj.isSign = true;\n          } else {\n            userObj.isSign = false;\n          }\n\n          userObj.lastSign = signRecord.created;\n        } else {\n          userObj.isSign = false;\n        } // 获取用户的路由数据\n\n\n        const {\n          roles\n        } = users;\n        let menus = [];\n\n        for (let i = 0; i < roles.length; i++) {\n          const element = roles[i];\n          const menu = await _Roles.default.findOne({\n            code: element\n          }, {\n            menu: 1\n          });\n          menus.push(...menu.menu);\n        }\n\n        menus = Array.from(new Set(menus));\n        const treeData = await _Menus.default.find();\n        const routes = (0, _Utils.menusGetMenuData)(treeData, menus);\n        ctx.body = {\n          code: 200,\n          data: userObj,\n          routes: routes,\n          token: token\n        };\n      } else {\n        ctx.body = {\n          code: 401,\n          msg: '用户名或者密码错误'\n        };\n      }\n    } else if (checkCodes === 2) {\n      // ctx.status = 401\n      ctx.body = {\n        code: 401,\n        msg: '验证码失效, 请重新输入'\n      };\n    } else {\n      // ctx.status = 401,\n      ctx.body = {\n        code: 401,\n        msg: '验证码错误, 请重新输入'\n      };\n    } // if(code==)\n\n  } // 获取用户信息\n\n\n  async getUserInfo(ctx) {\n    const token = ctx.header.authorization;\n    const obj = await (0, _Utils.getJWTPayload)(token);\n    const user = await _test.default.findById(obj._id);\n    let arr = ['password'];\n    arr = arr.map(item => {\n      delete user[item];\n    }); // 获取用户的路由数据\n\n    const {\n      roles\n    } = user;\n    let menus = [];\n\n    for (let i = 0; i < roles.length; i++) {\n      const element = roles[i];\n      const menu = await _Roles.default.findOne({\n        code: element\n      }, {\n        menu: 1\n      });\n      menus.push(...menu.menu);\n    }\n\n    menus = Array.from(new Set(menus));\n    const treeData = await _Menus.default.find();\n    const routes = (0, _Utils.menusGetMenuData)(treeData, menus);\n    ctx.body = {\n      code: 200,\n      data: user,\n      routes\n    };\n  }\n\n  toSvg = async ctx => {\n    // let text = ctx.request.query\n    // \n    ctx.body = {\n      svg: '!!!'\n    };\n  };\n  /*\r\n      注册接口\r\n  */\n\n  async reg(ctx) {\n    const body1 = ctx.request.body;\n    let sid = body1.sid;\n    let code = body1.svgValue;\n    const checkCodes = await (0, _Utils.checkCode)(sid, code); //校验验证码是否正确 或者 过期\n\n    if (checkCodes == 1) {\n      let checkeUserPasswd = false;\n      let users = await _test.default.findOne({\n        username: body1.email\n      }); //验证用户名是否存在\n\n      if (!users) {\n        const data = new _test.default({\n          username: body1.email,\n          password: body1.password\n        });\n        let users = await data.save();\n        ctx.body = {\n          code: 200\n        };\n      } else {\n        ctx.body = {\n          code: 501,\n          msg: '邮箱已存在'\n        };\n      } // \n\n    } else if (checkCodes === 2) {\n      // ctx.status = 401\n      ctx.body = {\n        code: 401,\n        msg: '验证码失效, 请重新输入'\n      };\n    } else {\n      // ctx.status = 401,\n      ctx.body = {\n        code: 401,\n        msg: '验证码错误, 请重新输入'\n      };\n    } // ctx.body = {\n    //     code: 200,\n    //     msg: 'ok'\n    // }\n\n  }\n\n  async isEmail(ctx) {\n    ctx.body = {\n      code: 200\n    };\n  }\n\n}\n\nvar _default = new Login(); // module.exports = {a}\n\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImEuanMiXSwibmFtZXMiOlsiTG9naW4iLCJjb25zdHJ1Y3RvciIsImdldFN2Z0NhcHRjaGEiLCJjdHgiLCJib2R5IiwicmVxdWVzdCIsInF1ZXJ5Iiwic3ZnQ2FwdGNoYSIsIlN2Z0NhcHRjaGEiLCJjcmVhdGUiLCJzaXplIiwiaWdub3JlQ2hhcnMiLCJjb2xvciIsIm5vaXNlIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwid2lkdGgiLCJoZWlnaHQiLCJzaWQiLCJ0ZXh0Iiwic3ZnIiwiZGF0YSIsInN1Ym1pdExvZ2luIiwiYm9keTEiLCJjb2RlIiwiY2hlY2tDb2RlcyIsImNoZWNrZVVzZXJQYXNzd2QiLCJ1c2VycyIsIlVzZXIiLCJmaW5kT25lIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsInVzZXJPYmoiLCJ0b0pTT04iLCJhcnIiLCJtYXAiLCJpdGVtIiwidG9rZW4iLCJqc29ud2VidG9rZW4iLCJzaWduIiwiX2lkIiwiY29uZmlnIiwiSldUX1NFQ1JFVCIsImV4cGlyZXNJbiIsInNpZ25SZWNvcmQiLCJTaWduUmVjb3JkIiwiZmluZEJ5VWlkIiwiY3JlYXRlZCIsImZvcm1hdCIsImlzU2lnbiIsImxhc3RTaWduIiwicm9sZXMiLCJtZW51cyIsImkiLCJsZW5ndGgiLCJlbGVtZW50IiwibWVudSIsIlJvbGVzIiwicHVzaCIsIkFycmF5IiwiZnJvbSIsIlNldCIsInRyZWVEYXRhIiwiTWVudXMiLCJmaW5kIiwicm91dGVzIiwibXNnIiwiZ2V0VXNlckluZm8iLCJoZWFkZXIiLCJhdXRob3JpemF0aW9uIiwib2JqIiwidXNlciIsImZpbmRCeUlkIiwidG9TdmciLCJyZWciLCJzdmdWYWx1ZSIsImVtYWlsIiwic2F2ZSIsImlzRW1haWwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQTs7QUFDQTs7QUFHQTs7QUFDQTs7QUFFQTs7QUFDQTs7QUFDQTs7OztBQUdBO0FBRUEsTUFBTUEsS0FBTixDQUFZO0FBQ1JDLEVBQUFBLFdB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LElBQUl6QixLQUFKLEUsRUFDZiIsInNvdXJjZVJvb3QiOiJEOlxcSFRNTCtjc3MranNcXG5vZGVfa29hXFxzcmNcXGFwaVxcIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmltcG9ydCBTdmdDYXB0Y2hhIGZyb20gJ3N2Zy1jYXB0Y2hhJztcclxuaW1wb3J0IHsgc2V0VmFsdWUsIGdldFZhbHVlIH0gZnJvbSAnLi4vY29uZmlnL1JlZGlzQ29uZmlnJ1xyXG5pbXBvcnQgeyBnZXRKV1RQYXlsb2FkLCBtZW51c0dldE1lbnVEYXRhIH0gZnJvbSAnLi4vY29ubW9uL1V0aWxzJztcclxuXHJcbmltcG9ydCBqc29ud2VidG9rZW4gZnJvbSAnanNvbndlYnRva2VuJztcclxuaW1wb3J0IGNvbmZpZyBmcm9tICcuLi9jb25maWcvaW5kZXgnO1xyXG5pbXBvcnQgeyBjaGVja0NvZGUgfSBmcm9tICcuLi9jb25tb24vVXRpbHMnO1xyXG5cclxuaW1wb3J0IFVzZXIgZnJvbSAnLi4vbW9kZWwvdGVzdCc7XHJcbmltcG9ydCBSb2xlcyBmcm9tICcuLi9tb2RlbC9Sb2xlcyc7XHJcblxyXG5pbXBvcnQgU2lnblJlY29yZCBmcm9tICcuLi9tb2RlbC9TaWduUmVjb3JkJztcclxuaW1wb3J0IG1vbWVudCBmcm9tICdkYXlqcyc7XHJcbmltcG9ydCBNZW51cyBmcm9tICcuLi9tb2RlbC9NZW51cyc7XHJcblxyXG5cclxuLy/mlrDliqDmjqXlj6PliY3orrDlvpflnKhqd3Tph4zpnaLmlL7ooYxcclxuXHJcbmNsYXNzIExvZ2luIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgfVxyXG4gICAgZ2V0U3ZnQ2FwdGNoYSA9IGFzeW5jIChjdHgpID0+IHtcclxuICAgICAgICBsZXQgYm9keSA9IGN0eC5yZXF1ZXN0LnF1ZXJ5XHJcblxyXG4gICAgICAgIGxldCBzdmdDYXB0Y2hhID0gU3ZnQ2FwdGNoYS5jcmVhdGUoe1xyXG4gICAgICAgICAgICBzaXplOiA0LFxyXG4gICAgICAgICAgICBpZ25vcmVDaGFyczogJzBvMWlsJyxcclxuICAgICAgICAgICAgY29sb3I6IHRydWUsXHJcbiAgICAgICAgICAgIG5vaXNlOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA1KSxcclxuICAgICAgICAgICAgd2lkdGg6IDE1MCxcclxuICAgICAgICAgICAgaGVpZ2h0OiA1MFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLy8gXHJcbiAgICAgICAgaWYgKGJvZHkuc2lkKSB7XHJcbiAgICAgICAgICAgIHNldFZhbHVlKGJvZHkuc2lkLCBzdmdDYXB0Y2hhLnRleHQsIDEwICogNjApLy/orr7nva4xMOWIhumSn+eahOWkseaViOaXtumXtFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZ2V0VmFsdWUoYm9keS5zaWQpXHJcbiAgICAgICAgY3R4LmJvZHkgPSB7XHJcbiAgICAgICAgICAgIHN2Zzogc3ZnQ2FwdGNoYS5kYXRhXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXN5bmMgc3VibWl0TG9naW4gKGN0eCkge1xyXG4gICAgICAgIGNvbnN0IGJvZHkxID0gY3R4LnJlcXVlc3QuYm9keVxyXG5cclxuICAgICAgICAvLyBcclxuICAgICAgICBsZXQgc2lkID0gYm9keTEuc2lkXHJcbiAgICAgICAgbGV0IGNvZGUgPSBib2R5MS5jb2RlXHJcbiAgICAgICAgY29uc3QgY2hlY2tDb2RlcyA9IGF3YWl0IGNoZWNrQ29kZShzaWQsIGNvZGUpXHJcbiAgICAgICAgaWYgKGNoZWNrQ29kZXMgPT0gMSkge1xyXG4gICAgICAgICAgICBsZXQgY2hlY2tlVXNlclBhc3N3ZCA9IGZhbHNlXHJcblxyXG5cclxuICAgICAgICAgICAgbGV0IHVzZXJzID0gYXdhaXQgVXNlci5maW5kT25lKHsgdXNlcm5hbWU6IGJvZHkxLnVzZXJuYW1lIH0pXHJcblxyXG4gICAgICAgICAgICBpZiAodXNlcnMgJiYgdXNlcnMucGFzc3dvcmQgPT09IGJvZHkxLnBhc3N3b3JkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyT2JqID0gdXNlcnMudG9KU09OKClcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgYXJyID0gWydwYXNzd29yZCddXHJcbiAgICAgICAgICAgICAgICBhcnIubWFwKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB1c2VyT2JqW2l0ZW1dXHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAgIGxldCB0b2tlbiA9IGpzb253ZWJ0b2tlbi5zaWduKFxyXG4gICAgICAgICAgICAgICAgICAgIHsgX2lkOiB1c2VyT2JqLl9pZCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy5KV1RfU0VDUkVULFxyXG4gICAgICAgICAgICAgICAgICAgIHsgZXhwaXJlc0luOiAnN2QnIH1cclxuICAgICAgICAgICAgICAgIClcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2lnblJlY29yZCA9IGF3YWl0IFNpZ25SZWNvcmQuZmluZEJ5VWlkKHVzZXJPYmouX2lkKVxyXG4gICAgICAgICAgICAgICAgaWYgKHNpZ25SZWNvcmQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobW9tZW50KHNpZ25SZWNvcmQuY3JlYXRlZCkuZm9ybWF0KCdZWVlZLU1NLUREJykgPT09IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTS1ERCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJPYmouaXNTaWduID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJPYmouaXNTaWduID0gZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlck9iai5sYXN0U2lnbiA9IHNpZ25SZWNvcmQuY3JlYXRlZFxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB1c2VyT2JqLmlzU2lnbiA9IGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8g6I635Y+W55So5oi355qE6Lev55Sx5pWw5o2uXHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHJvbGVzIH0gPSB1c2Vyc1xyXG4gICAgICAgICAgICAgICAgbGV0IG1lbnVzID0gW11cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm9sZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gcm9sZXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVudSA9IGF3YWl0IFJvbGVzLmZpbmRPbmUoeyBjb2RlOiBlbGVtZW50IH0sIHsgbWVudTogMSB9KVxyXG4gICAgICAgICAgICAgICAgICAgIG1lbnVzLnB1c2goLi4ubWVudS5tZW51KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbWVudXMgPSBBcnJheS5mcm9tKG5ldyBTZXQobWVudXMpKVxyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJlZURhdGEgPSBhd2FpdCBNZW51cy5maW5kKClcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJvdXRlcyA9IG1lbnVzR2V0TWVudURhdGEodHJlZURhdGEsIG1lbnVzKVxyXG5cclxuICAgICAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IDIwMCxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB1c2VyT2JqLFxyXG4gICAgICAgICAgICAgICAgICAgIHJvdXRlczogcm91dGVzLFxyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuOiB0b2tlblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY3R4LmJvZHkgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29kZTogNDAxLFxyXG4gICAgICAgICAgICAgICAgICAgIG1zZzogJ+eUqOaIt+WQjeaIluiAheWvhueggemUmeivrydcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9IGVsc2UgaWYgKGNoZWNrQ29kZXMgPT09IDIpIHtcclxuICAgICAgICAgICAgLy8gY3R4LnN0YXR1cyA9IDQwMVxyXG5cclxuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XHJcbiAgICAgICAgICAgICAgICBjb2RlOiA0MDEsXHJcbiAgICAgICAgICAgICAgICBtc2c6ICfpqozor4HnoIHlpLHmlYgsIOivt+mHjeaWsOi+k+WFpSdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGN0eC5zdGF0dXMgPSA0MDEsXHJcblxyXG4gICAgICAgICAgICBjdHguYm9keSA9IHtcclxuICAgICAgICAgICAgICAgIGNvZGU6IDQwMSxcclxuICAgICAgICAgICAgICAgIG1zZzogJ+mqjOivgeeggemUmeivrywg6K+36YeN5paw6L6T5YWlJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmKGNvZGU9PSlcclxuXHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8vIOiOt+WPlueUqOaIt+S/oeaBr1xyXG4gICAgYXN5bmMgZ2V0VXNlckluZm8gKGN0eCkge1xyXG4gICAgICAgIGNvbnN0IHRva2VuID0gY3R4LmhlYWRlci5hdXRob3JpemF0aW9uXHJcblxyXG4gICAgICAgIGNvbnN0IG9iaiA9IGF3YWl0IGdldEpXVFBheWxvYWQodG9rZW4pXHJcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQob2JqLl9pZClcclxuICAgICAgICBsZXQgYXJyID0gWydwYXNzd29yZCddXHJcbiAgICAgICAgYXJyID0gYXJyLm1hcChpdGVtID0+IHtcclxuICAgICAgICAgICAgZGVsZXRlIHVzZXJbaXRlbV1cclxuICAgICAgICB9KVxyXG5cclxuXHJcbiAgICAgICAgLy8g6I635Y+W55So5oi355qE6Lev55Sx5pWw5o2uXHJcbiAgICAgICAgY29uc3QgeyByb2xlcyB9ID0gdXNlclxyXG4gICAgICAgIGxldCBtZW51cyA9IFtdXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb2xlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gcm9sZXNbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IG1lbnUgPSBhd2FpdCBSb2xlcy5maW5kT25lKHsgY29kZTogZWxlbWVudCB9LCB7IG1lbnU6IDEgfSlcclxuICAgICAgICAgICAgbWVudXMucHVzaCguLi5tZW51Lm1lbnUpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1lbnVzID0gQXJyYXkuZnJvbShuZXcgU2V0KG1lbnVzKSlcclxuICAgICAgICBjb25zdCB0cmVlRGF0YSA9IGF3YWl0IE1lbnVzLmZpbmQoKVxyXG4gICAgICAgIGNvbnN0IHJvdXRlcyA9IG1lbnVzR2V0TWVudURhdGEodHJlZURhdGEsIG1lbnVzKVxyXG5cclxuICAgICAgICBjdHguYm9keSA9IHtcclxuICAgICAgICAgICAgY29kZTogMjAwLFxyXG4gICAgICAgICAgICBkYXRhOiB1c2VyLFxyXG4gICAgICAgICAgICByb3V0ZXNcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB0b1N2ZyA9IGFzeW5jIChjdHgpID0+IHtcclxuXHJcbiAgICAgICAgLy8gbGV0IHRleHQgPSBjdHgucmVxdWVzdC5xdWVyeVxyXG4gICAgICAgIC8vIFxyXG4gICAgICAgIGN0eC5ib2R5ID0ge1xyXG4gICAgICAgICAgICBzdmc6ICchISEnXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLypcclxuICAgICAgICDms6jlhozmjqXlj6NcclxuICAgICovXHJcbiAgICBhc3luYyByZWcgKGN0eCkge1xyXG4gICAgICAgIGNvbnN0IGJvZHkxID0gY3R4LnJlcXVlc3QuYm9keVxyXG5cclxuICAgICAgICBsZXQgc2lkID0gYm9keTEuc2lkXHJcbiAgICAgICAgbGV0IGNvZGUgPSBib2R5MS5zdmdWYWx1ZVxyXG4gICAgICAgIGNvbnN0IGNoZWNrQ29kZXMgPSBhd2FpdCBjaGVja0NvZGUoc2lkLCBjb2RlKVxyXG4gICAgICAgIC8v5qCh6aqM6aqM6K+B56CB5piv5ZCm5q2j56GuIOaIluiAhSDov4fmnJ9cclxuICAgICAgICBpZiAoY2hlY2tDb2RlcyA9PSAxKSB7XHJcbiAgICAgICAgICAgIGxldCBjaGVja2VVc2VyUGFzc3dkID0gZmFsc2VcclxuXHJcblxyXG4gICAgICAgICAgICBsZXQgdXNlcnMgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyB1c2VybmFtZTogYm9keTEuZW1haWwgfSlcclxuICAgICAgICAgICAgLy/pqozor4HnlKjmiLflkI3mmK/lkKblrZjlnKhcclxuXHJcbiAgICAgICAgICAgIGlmICghdXNlcnMpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gbmV3IFVzZXIoe1xyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBib2R5MS5lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogYm9keTEucGFzc3dvcmRcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICBsZXQgdXNlcnMgPSBhd2FpdCBkYXRhLnNhdmUoKVxyXG4gICAgICAgICAgICAgICAgY3R4LmJvZHkgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29kZTogMjAwLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IDUwMSxcclxuICAgICAgICAgICAgICAgICAgICBtc2c6ICfpgq7nrrHlt7LlrZjlnKgnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gXHJcbiAgICAgICAgfSBlbHNlIGlmIChjaGVja0NvZGVzID09PSAyKSB7XHJcbiAgICAgICAgICAgIC8vIGN0eC5zdGF0dXMgPSA0MDFcclxuXHJcbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xyXG4gICAgICAgICAgICAgICAgY29kZTogNDAxLFxyXG4gICAgICAgICAgICAgICAgbXNnOiAn6aqM6K+B56CB5aSx5pWILCDor7fph43mlrDovpPlhaUnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBjdHguc3RhdHVzID0gNDAxLFxyXG5cclxuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XHJcbiAgICAgICAgICAgICAgICBjb2RlOiA0MDEsXHJcbiAgICAgICAgICAgICAgICBtc2c6ICfpqozor4HnoIHplJnor68sIOivt+mHjeaWsOi+k+WFpSdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjdHguYm9keSA9IHtcclxuICAgICAgICAvLyAgICAgY29kZTogMjAwLFxyXG4gICAgICAgIC8vICAgICBtc2c6ICdvaydcclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcbiAgICBhc3luYyBpc0VtYWlsIChjdHgpIHtcclxuXHJcbiAgICAgICAgY3R4LmJvZHkgPSB7XHJcbiAgICAgICAgICAgIGNvZGU6IDIwMFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBuZXcgTG9naW4oKVxyXG4vLyBtb2R1bGUuZXhwb3J0cyA9IHthfSJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "a.js"
      ],
      "names": [
        "Login",
        "constructor",
        "getSvgCaptcha",
        "ctx",
        "body",
        "request",
        "query",
        "svgCaptcha",
        "SvgCaptcha",
        "create",
        "size",
        "ignoreChars",
        "color",
        "noise",
        "Math",
        "floor",
        "random",
        "width",
        "height",
        "sid",
        "text",
        "svg",
        "data",
        "submitLogin",
        "body1",
        "code",
        "checkCodes",
        "checkeUserPasswd",
        "users",
        "User",
        "findOne",
        "username",
        "password",
        "userObj",
        "toJSON",
        "arr",
        "map",
        "item",
        "token",
        "jsonwebtoken",
        "sign",
        "_id",
        "config",
        "JWT_SECRET",
        "expiresIn",
        "signRecord",
        "SignRecord",
        "findByUid",
        "created",
        "format",
        "isSign",
        "lastSign",
        "roles",
        "menus",
        "i",
        "length",
        "element",
        "menu",
        "Roles",
        "push",
        "Array",
        "from",
        "Set",
        "treeData",
        "Menus",
        "find",
        "routes",
        "msg",
        "getUserInfo",
        "header",
        "authorization",
        "obj",
        "user",
        "findById",
        "toSvg",
        "reg",
        "svgValue",
        "email",
        "save",
        "isEmail"
      ],
      "mappings": "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",
      "sourceRoot": "D:\\HTML+css+js\\node_koa\\src\\api\\",
      "sourcesContent": [
        "\r\nimport SvgCaptcha from 'svg-captcha';\r\nimport { setValue, getValue } from '../config/RedisConfig'\r\nimport { getJWTPayload, menusGetMenuData } from '../conmon/Utils';\r\n\r\nimport jsonwebtoken from 'jsonwebtoken';\r\nimport config from '../config/index';\r\nimport { checkCode } from '../conmon/Utils';\r\n\r\nimport User from '../model/test';\r\nimport Roles from '../model/Roles';\r\n\r\nimport SignRecord from '../model/SignRecord';\r\nimport moment from 'dayjs';\r\nimport Menus from '../model/Menus';\r\n\r\n\r\n//新加接口前记得在jwt里面放行\r\n\r\nclass Login {\r\n    constructor() {\r\n    }\r\n    getSvgCaptcha = async (ctx) => {\r\n        let body = ctx.request.query\r\n\r\n        let svgCaptcha = SvgCaptcha.create({\r\n            size: 4,\r\n            ignoreChars: '0o1il',\r\n            color: true,\r\n            noise: Math.floor(Math.random() * 5),\r\n            width: 150,\r\n            height: 50\r\n        })\r\n        // \r\n        if (body.sid) {\r\n            setValue(body.sid, svgCaptcha.text, 10 * 60)//设置10分钟的失效时间\r\n        }\r\n\r\n        getValue(body.sid)\r\n        ctx.body = {\r\n            svg: svgCaptcha.data\r\n        }\r\n    }\r\n    async submitLogin (ctx) {\r\n        const body1 = ctx.request.body\r\n\r\n        // \r\n        let sid = body1.sid\r\n        let code = body1.code\r\n        const checkCodes = await checkCode(sid, code)\r\n        if (checkCodes == 1) {\r\n            let checkeUserPasswd = false\r\n\r\n\r\n            let users = await User.findOne({ username: body1.username })\r\n\r\n            if (users && users.password === body1.password) {\r\n                const userObj = users.toJSON()\r\n\r\n                // \r\n\r\n                let arr = ['password']\r\n                arr.map(item => {\r\n                    delete userObj[item]\r\n                })\r\n\r\n                let token = jsonwebtoken.sign(\r\n                    { _id: userObj._id },\r\n                    config.JWT_SECRET,\r\n                    { expiresIn: '7d' }\r\n                )\r\n\r\n\r\n                const signRecord = await SignRecord.findByUid(userObj._id)\r\n                if (signRecord !== null) {\r\n                    if (moment(signRecord.created).format('YYYY-MM-DD') === moment().format('YYYY-MM-DD')) {\r\n                        userObj.isSign = true\r\n                    } else {\r\n                        userObj.isSign = false\r\n                    }\r\n                    userObj.lastSign = signRecord.created\r\n                } else {\r\n                    userObj.isSign = false\r\n                }\r\n\r\n                // 获取用户的路由数据\r\n                const { roles } = users\r\n                let menus = []\r\n                for (let i = 0; i < roles.length; i++) {\r\n                    const element = roles[i];\r\n                    const menu = await Roles.findOne({ code: element }, { menu: 1 })\r\n                    menus.push(...menu.menu)\r\n                }\r\n                menus = Array.from(new Set(menus))\r\n                const treeData = await Menus.find()\r\n                const routes = menusGetMenuData(treeData, menus)\r\n\r\n                ctx.body = {\r\n                    code: 200,\r\n                    data: userObj,\r\n                    routes: routes,\r\n                    token: token\r\n                }\r\n            } else {\r\n                ctx.body = {\r\n                    code: 401,\r\n                    msg: '用户名或者密码错误'\r\n                }\r\n            }\r\n\r\n        } else if (checkCodes === 2) {\r\n            // ctx.status = 401\r\n\r\n            ctx.body = {\r\n                code: 401,\r\n                msg: '验证码失效, 请重新输入'\r\n            }\r\n        } else {\r\n            // ctx.status = 401,\r\n\r\n            ctx.body = {\r\n                code: 401,\r\n                msg: '验证码错误, 请重新输入'\r\n            }\r\n        }\r\n        // if(code==)\r\n\r\n\r\n    }\r\n\r\n    // 获取用户信息\r\n    async getUserInfo (ctx) {\r\n        const token = ctx.header.authorization\r\n\r\n        const obj = await getJWTPayload(token)\r\n        const user = await User.findById(obj._id)\r\n        let arr = ['password']\r\n        arr = arr.map(item => {\r\n            delete user[item]\r\n        })\r\n\r\n\r\n        // 获取用户的路由数据\r\n        const { roles } = user\r\n        let menus = []\r\n        for (let i = 0; i < roles.length; i++) {\r\n            const element = roles[i];\r\n            const menu = await Roles.findOne({ code: element }, { menu: 1 })\r\n            menus.push(...menu.menu)\r\n        }\r\n        menus = Array.from(new Set(menus))\r\n        const treeData = await Menus.find()\r\n        const routes = menusGetMenuData(treeData, menus)\r\n\r\n        ctx.body = {\r\n            code: 200,\r\n            data: user,\r\n            routes\r\n        }\r\n    }\r\n    toSvg = async (ctx) => {\r\n\r\n        // let text = ctx.request.query\r\n        // \r\n        ctx.body = {\r\n            svg: '!!!'\r\n        }\r\n    }\r\n    /*\r\n        注册接口\r\n    */\r\n    async reg (ctx) {\r\n        const body1 = ctx.request.body\r\n\r\n        let sid = body1.sid\r\n        let code = body1.svgValue\r\n        const checkCodes = await checkCode(sid, code)\r\n        //校验验证码是否正确 或者 过期\r\n        if (checkCodes == 1) {\r\n            let checkeUserPasswd = false\r\n\r\n\r\n            let users = await User.findOne({ username: body1.email })\r\n            //验证用户名是否存在\r\n\r\n            if (!users) {\r\n\r\n                const data = new User({\r\n                    username: body1.email,\r\n                    password: body1.password\r\n                })\r\n                let users = await data.save()\r\n                ctx.body = {\r\n                    code: 200,\r\n                }\r\n            } else {\r\n\r\n                ctx.body = {\r\n                    code: 501,\r\n                    msg: '邮箱已存在'\r\n                }\r\n            }\r\n            // \r\n        } else if (checkCodes === 2) {\r\n            // ctx.status = 401\r\n\r\n            ctx.body = {\r\n                code: 401,\r\n                msg: '验证码失效, 请重新输入'\r\n            }\r\n        } else {\r\n            // ctx.status = 401,\r\n\r\n            ctx.body = {\r\n                code: 401,\r\n                msg: '验证码错误, 请重新输入'\r\n            }\r\n        }\r\n        // ctx.body = {\r\n        //     code: 200,\r\n        //     msg: 'ok'\r\n        // }\r\n    }\r\n    async isEmail (ctx) {\r\n\r\n        ctx.body = {\r\n            code: 200\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default new Login()\r\n// module.exports = {a}"
      ]
    },
    "sourceType": "script",
    "mtime": 1637114272482
  }
}